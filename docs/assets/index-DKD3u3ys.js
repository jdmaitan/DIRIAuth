var yS=Object.defineProperty;var vS=(t,e,n)=>e in t?yS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Or=(t,e,n)=>vS(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Bc={exports:{}},Ns={},$c={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function wS(){if(Xm)return le;Xm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,O={};function x(T,M,oe){this.props=T,this.context=M,this.refs=O,this.updater=oe||C}x.prototype.isReactComponent={},x.prototype.setState=function(T,M){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,M,"setState")},x.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function D(){}D.prototype=x.prototype;function W(T,M,oe){this.props=T,this.context=M,this.refs=O,this.updater=oe||C}var b=W.prototype=new D;b.constructor=W,I(b,x.prototype),b.isPureReactComponent=!0;var B=Array.isArray,Y=Object.prototype.hasOwnProperty,J={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function ee(T,M,oe){var ue,pe={},me=null,Se=null;if(M!=null)for(ue in M.ref!==void 0&&(Se=M.ref),M.key!==void 0&&(me=""+M.key),M)Y.call(M,ue)&&!se.hasOwnProperty(ue)&&(pe[ue]=M[ue]);var ye=arguments.length-2;if(ye===1)pe.children=oe;else if(1<ye){for(var Pe=Array(ye),wt=0;wt<ye;wt++)Pe[wt]=arguments[wt+2];pe.children=Pe}if(T&&T.defaultProps)for(ue in ye=T.defaultProps,ye)pe[ue]===void 0&&(pe[ue]=ye[ue]);return{$$typeof:t,type:T,key:me,ref:Se,props:pe,_owner:J.current}}function fe(T,M){return{$$typeof:t,type:T.type,key:M,ref:T.ref,props:T.props,_owner:T._owner}}function De(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function Rt(T){var M={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(oe){return M[oe]})}var Yt=/\/+/g;function vt(T,M){return typeof T=="object"&&T!==null&&T.key!=null?Rt(""+T.key):M.toString(36)}function Mt(T,M,oe,ue,pe){var me=typeof T;(me==="undefined"||me==="boolean")&&(T=null);var Se=!1;if(T===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(T.$$typeof){case t:case e:Se=!0}}if(Se)return Se=T,pe=pe(Se),T=ue===""?"."+vt(Se,0):ue,B(pe)?(oe="",T!=null&&(oe=T.replace(Yt,"$&/")+"/"),Mt(pe,M,oe,"",function(wt){return wt})):pe!=null&&(De(pe)&&(pe=fe(pe,oe+(!pe.key||Se&&Se.key===pe.key?"":(""+pe.key).replace(Yt,"$&/")+"/")+T)),M.push(pe)),1;if(Se=0,ue=ue===""?".":ue+":",B(T))for(var ye=0;ye<T.length;ye++){me=T[ye];var Pe=ue+vt(me,ye);Se+=Mt(me,M,oe,Pe,pe)}else if(Pe=v(T),typeof Pe=="function")for(T=Pe.call(T),ye=0;!(me=T.next()).done;)me=me.value,Pe=ue+vt(me,ye++),Se+=Mt(me,M,oe,Pe,pe);else if(me==="object")throw M=String(T),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Se}function Jt(T,M,oe){if(T==null)return T;var ue=[],pe=0;return Mt(T,ue,"","",function(me){return M.call(oe,me,pe++)}),ue}function dt(T){if(T._status===-1){var M=T._result;M=M(),M.then(function(oe){(T._status===0||T._status===-1)&&(T._status=1,T._result=oe)},function(oe){(T._status===0||T._status===-1)&&(T._status=2,T._result=oe)}),T._status===-1&&(T._status=0,T._result=M)}if(T._status===1)return T._result.default;throw T._result}var Le={current:null},$={transition:null},te={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:$,ReactCurrentOwner:J};function G(){throw Error("act(...) is not supported in production builds of React.")}return le.Children={map:Jt,forEach:function(T,M,oe){Jt(T,function(){M.apply(this,arguments)},oe)},count:function(T){var M=0;return Jt(T,function(){M++}),M},toArray:function(T){return Jt(T,function(M){return M})||[]},only:function(T){if(!De(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},le.Component=x,le.Fragment=n,le.Profiler=o,le.PureComponent=W,le.StrictMode=s,le.Suspense=h,le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,le.act=G,le.cloneElement=function(T,M,oe){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ue=I({},T.props),pe=T.key,me=T.ref,Se=T._owner;if(M!=null){if(M.ref!==void 0&&(me=M.ref,Se=J.current),M.key!==void 0&&(pe=""+M.key),T.type&&T.type.defaultProps)var ye=T.type.defaultProps;for(Pe in M)Y.call(M,Pe)&&!se.hasOwnProperty(Pe)&&(ue[Pe]=M[Pe]===void 0&&ye!==void 0?ye[Pe]:M[Pe])}var Pe=arguments.length-2;if(Pe===1)ue.children=oe;else if(1<Pe){ye=Array(Pe);for(var wt=0;wt<Pe;wt++)ye[wt]=arguments[wt+2];ue.children=ye}return{$$typeof:t,type:T.type,key:pe,ref:me,props:ue,_owner:Se}},le.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:a,_context:T},T.Consumer=T},le.createElement=ee,le.createFactory=function(T){var M=ee.bind(null,T);return M.type=T,M},le.createRef=function(){return{current:null}},le.forwardRef=function(T){return{$$typeof:f,render:T}},le.isValidElement=De,le.lazy=function(T){return{$$typeof:_,_payload:{_status:-1,_result:T},_init:dt}},le.memo=function(T,M){return{$$typeof:m,type:T,compare:M===void 0?null:M}},le.startTransition=function(T){var M=$.transition;$.transition={};try{T()}finally{$.transition=M}},le.unstable_act=G,le.useCallback=function(T,M){return Le.current.useCallback(T,M)},le.useContext=function(T){return Le.current.useContext(T)},le.useDebugValue=function(){},le.useDeferredValue=function(T){return Le.current.useDeferredValue(T)},le.useEffect=function(T,M){return Le.current.useEffect(T,M)},le.useId=function(){return Le.current.useId()},le.useImperativeHandle=function(T,M,oe){return Le.current.useImperativeHandle(T,M,oe)},le.useInsertionEffect=function(T,M){return Le.current.useInsertionEffect(T,M)},le.useLayoutEffect=function(T,M){return Le.current.useLayoutEffect(T,M)},le.useMemo=function(T,M){return Le.current.useMemo(T,M)},le.useReducer=function(T,M,oe){return Le.current.useReducer(T,M,oe)},le.useRef=function(T){return Le.current.useRef(T)},le.useState=function(T){return Le.current.useState(T)},le.useSyncExternalStore=function(T,M,oe){return Le.current.useSyncExternalStore(T,M,oe)},le.useTransition=function(){return Le.current.useTransition()},le.version="18.3.1",le}var Zm;function ka(){return Zm||(Zm=1,$c.exports=wS()),$c.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function ES(){if(eg)return Ns;eg=1;var t=ka(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var _,y={},v=null,C=null;m!==void 0&&(v=""+m),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(C=h.ref);for(_ in h)s.call(h,_)&&!a.hasOwnProperty(_)&&(y[_]=h[_]);if(f&&f.defaultProps)for(_ in h=f.defaultProps,h)y[_]===void 0&&(y[_]=h[_]);return{$$typeof:e,type:f,key:v,ref:C,props:y,_owner:o.current}}return Ns.Fragment=n,Ns.jsx=c,Ns.jsxs=c,Ns}var tg;function SS(){return tg||(tg=1,Bc.exports=ES()),Bc.exports}var A=SS(),N=ka(),jl={},Vc={exports:{}},_t={},Hc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng;function CS(){return ng||(ng=1,function(t){function e($,te){var G=$.length;$.push(te);e:for(;0<G;){var T=G-1>>>1,M=$[T];if(0<o(M,te))$[T]=te,$[G]=M,G=T;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var te=$[0],G=$.pop();if(G!==te){$[0]=G;e:for(var T=0,M=$.length,oe=M>>>1;T<oe;){var ue=2*(T+1)-1,pe=$[ue],me=ue+1,Se=$[me];if(0>o(pe,G))me<M&&0>o(Se,pe)?($[T]=Se,$[me]=G,T=me):($[T]=pe,$[ue]=G,T=ue);else if(me<M&&0>o(Se,G))$[T]=Se,$[me]=G,T=me;else break e}}return te}function o($,te){var G=$.sortIndex-te.sortIndex;return G!==0?G:$.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var h=[],m=[],_=1,y=null,v=3,C=!1,I=!1,O=!1,x=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var te=n(m);te!==null;){if(te.callback===null)s(m);else if(te.startTime<=$)s(m),te.sortIndex=te.expirationTime,e(h,te);else break;te=n(m)}}function B($){if(O=!1,b($),!I)if(n(h)!==null)I=!0,dt(Y);else{var te=n(m);te!==null&&Le(B,te.startTime-$)}}function Y($,te){I=!1,O&&(O=!1,D(ee),ee=-1),C=!0;var G=v;try{for(b(te),y=n(h);y!==null&&(!(y.expirationTime>te)||$&&!Rt());){var T=y.callback;if(typeof T=="function"){y.callback=null,v=y.priorityLevel;var M=T(y.expirationTime<=te);te=t.unstable_now(),typeof M=="function"?y.callback=M:y===n(h)&&s(h),b(te)}else s(h);y=n(h)}if(y!==null)var oe=!0;else{var ue=n(m);ue!==null&&Le(B,ue.startTime-te),oe=!1}return oe}finally{y=null,v=G,C=!1}}var J=!1,se=null,ee=-1,fe=5,De=-1;function Rt(){return!(t.unstable_now()-De<fe)}function Yt(){if(se!==null){var $=t.unstable_now();De=$;var te=!0;try{te=se(!0,$)}finally{te?vt():(J=!1,se=null)}}else J=!1}var vt;if(typeof W=="function")vt=function(){W(Yt)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,Jt=Mt.port2;Mt.port1.onmessage=Yt,vt=function(){Jt.postMessage(null)}}else vt=function(){x(Yt,0)};function dt($){se=$,J||(J=!0,vt())}function Le($,te){ee=x(function(){$(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||C||(I=!0,dt(Y))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var G=v;v=te;try{return $()}finally{v=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=v;v=$;try{return te()}finally{v=G}},t.unstable_scheduleCallback=function($,te,G){var T=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?T+G:T):G=T,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=G+M,$={id:_++,callback:te,priorityLevel:$,startTime:G,expirationTime:M,sortIndex:-1},G>T?($.sortIndex=G,e(m,$),n(h)===null&&$===n(m)&&(O?(D(ee),ee=-1):O=!0,Le(B,G-T))):($.sortIndex=M,e(h,$),I||C||(I=!0,dt(Y))),$},t.unstable_shouldYield=Rt,t.unstable_wrapCallback=function($){var te=v;return function(){var G=v;v=te;try{return $.apply(this,arguments)}finally{v=G}}}}(Gc)),Gc}var rg;function IS(){return rg||(rg=1,Hc.exports=CS()),Hc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function TS(){if(ig)return _t;ig=1;var t=ka(),e=IS();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},y={};function v(r){return h.call(y,r)?!0:h.call(_,r)?!1:m.test(r)?y[r]=!0:(_[r]=!0,!1)}function C(r,i,l,u){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function I(r,i,l,u){if(i===null||typeof i>"u"||C(r,i,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function O(r,i,l,u,d,p,g){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=p,this.removeEmptyString=g}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){x[r]=new O(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];x[i]=new O(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){x[r]=new O(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){x[r]=new O(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){x[r]=new O(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){x[r]=new O(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){x[r]=new O(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){x[r]=new O(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){x[r]=new O(r,5,!1,r.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function W(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(D,W);x[i]=new O(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(D,W);x[i]=new O(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(D,W);x[i]=new O(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){x[r]=new O(r,1,!1,r.toLowerCase(),null,!1,!1)}),x.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){x[r]=new O(r,1,!1,r.toLowerCase(),null,!0,!0)});function b(r,i,l,u){var d=x.hasOwnProperty(i)?x[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(I(i,l,d,u)&&(l=null),u||d===null?v(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):d.mustUseProperty?r[d.propertyName]=l===null?d.type===3?!1:"":l:(i=d.attributeName,u=d.attributeNamespace,l===null?r.removeAttribute(i):(d=d.type,l=d===3||d===4&&l===!0?"":""+l,u?r.setAttributeNS(u,i,l):r.setAttribute(i,l))))}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),J=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),Rt=Symbol.for("react.context"),Yt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),Mt=Symbol.for("react.suspense_list"),Jt=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),$=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=$&&r[$]||r["@@iterator"],typeof r=="function"?r:null)}var G=Object.assign,T;function M(r){if(T===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);T=i&&i[1]||""}return`
`+T+r}var oe=!1;function ue(r,i){if(!r||oe)return"";oe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(P){var u=P}Reflect.construct(r,[],i)}else{try{i.call()}catch(P){u=P}r.call(i.prototype)}else{try{throw Error()}catch(P){u=P}r()}}catch(P){if(P&&u&&typeof P.stack=="string"){for(var d=P.stack.split(`
`),p=u.stack.split(`
`),g=d.length-1,w=p.length-1;1<=g&&0<=w&&d[g]!==p[w];)w--;for(;1<=g&&0<=w;g--,w--)if(d[g]!==p[w]){if(g!==1||w!==1)do if(g--,w--,0>w||d[g]!==p[w]){var E=`
`+d[g].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=g&&0<=w);break}}}finally{oe=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?M(r):""}function pe(r){switch(r.tag){case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return r=ue(r.type,!1),r;case 11:return r=ue(r.type.render,!1),r;case 1:return r=ue(r.type,!0),r;default:return""}}function me(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case se:return"Fragment";case J:return"Portal";case fe:return"Profiler";case ee:return"StrictMode";case vt:return"Suspense";case Mt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Rt:return(r.displayName||"Context")+".Consumer";case De:return(r._context.displayName||"Context")+".Provider";case Yt:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Jt:return i=r.displayName||null,i!==null?i:me(r.type)||"Memo";case dt:i=r._payload,r=r._init;try{return me(r(i))}catch{}}return null}function Se(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(i);case 8:return i===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ye(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Pe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wt(r){var i=Pe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,p=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(g){u=""+g,p.call(this,g)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(g){u=""+g},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function No(r){r._valueTracker||(r._valueTracker=wt(r))}function ih(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return r&&(u=Pe(r)?r.checked?"true":"false":r.value),r=u,r!==l?(i.setValue(r),!0):!1}function xo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Qa(r,i){var l=i.checked;return G({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function sh(r,i){var l=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;l=ye(i.value!=null?i.value:l),r._wrapperState={initialChecked:u,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function oh(r,i){i=i.checked,i!=null&&b(r,"checked",i,!1)}function Ya(r,i){oh(r,i);var l=ye(i.value),u=i.type;if(l!=null)u==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?Ja(r,i.type,l):i.hasOwnProperty("defaultValue")&&Ja(r,i.type,ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function lh(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ja(r,i,l){(i!=="number"||xo(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Vi=Array.isArray;function qr(r,i,l,u){if(r=r.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<r.length;l++)d=i.hasOwnProperty("$"+r[l].value),r[l].selected!==d&&(r[l].selected=d),d&&u&&(r[l].defaultSelected=!0)}else{for(l=""+ye(l),i=null,d=0;d<r.length;d++){if(r[d].value===l){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function Xa(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ah(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(n(92));if(Vi(l)){if(1<l.length)throw Error(n(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:ye(l)}}function uh(r,i){var l=ye(i.value),u=ye(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),u!=null&&(r.defaultValue=""+u)}function ch(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function dh(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Za(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?dh(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ao,fh=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,u,d){MSApp.execUnsafeLocalFunction(function(){return r(i,l,u,d)})}:r}(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Ao=Ao||document.createElement("div"),Ao.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ao.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Hi(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cw=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(r){Cw.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Gi[i]=Gi[r]})});function hh(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Gi.hasOwnProperty(r)&&Gi[r]?(""+i).trim():i+"px"}function ph(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var u=l.indexOf("--")===0,d=hh(l,i[l],u);l==="float"&&(l="cssFloat"),u?r.setProperty(l,d):r[l]=d}}var Iw=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eu(r,i){if(i){if(Iw[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function tu(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nu=null;function ru(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var iu=null,Qr=null,Yr=null;function mh(r){if(r=ps(r)){if(typeof iu!="function")throw Error(n(280));var i=r.stateNode;i&&(i=el(i),iu(r.stateNode,r.type,i))}}function gh(r){Qr?Yr?Yr.push(r):Yr=[r]:Qr=r}function _h(){if(Qr){var r=Qr,i=Yr;if(Yr=Qr=null,mh(r),i)for(r=0;r<i.length;r++)mh(i[r])}}function yh(r,i){return r(i)}function vh(){}var su=!1;function wh(r,i,l){if(su)return r(i,l);su=!0;try{return yh(r,i,l)}finally{su=!1,(Qr!==null||Yr!==null)&&(vh(),_h())}}function Ki(r,i){var l=r.stateNode;if(l===null)return null;var u=el(l);if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var ou=!1;if(f)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){ou=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{ou=!1}function Tw(r,i,l,u,d,p,g,w,E){var P=Array.prototype.slice.call(arguments,3);try{i.apply(l,P)}catch(F){this.onError(F)}}var Qi=!1,Oo=null,Do=!1,lu=null,kw={onError:function(r){Qi=!0,Oo=r}};function Rw(r,i,l,u,d,p,g,w,E){Qi=!1,Oo=null,Tw.apply(kw,arguments)}function Pw(r,i,l,u,d,p,g,w,E){if(Rw.apply(this,arguments),Qi){if(Qi){var P=Oo;Qi=!1,Oo=null}else throw Error(n(198));Do||(Do=!0,lu=P)}}function vr(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,i.flags&4098&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Eh(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Sh(r){if(vr(r)!==r)throw Error(n(188))}function Nw(r){var i=r.alternate;if(!i){if(i=vr(r),i===null)throw Error(n(188));return i!==r?null:r}for(var l=r,u=i;;){var d=l.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){l=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===l)return Sh(d),r;if(p===u)return Sh(d),i;p=p.sibling}throw Error(n(188))}if(l.return!==u.return)l=d,u=p;else{for(var g=!1,w=d.child;w;){if(w===l){g=!0,l=d,u=p;break}if(w===u){g=!0,u=d,l=p;break}w=w.sibling}if(!g){for(w=p.child;w;){if(w===l){g=!0,l=p,u=d;break}if(w===u){g=!0,u=p,l=d;break}w=w.sibling}if(!g)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:i}function Ch(r){return r=Nw(r),r!==null?Ih(r):null}function Ih(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Ih(r);if(i!==null)return i;r=r.sibling}return null}var Th=e.unstable_scheduleCallback,kh=e.unstable_cancelCallback,xw=e.unstable_shouldYield,Aw=e.unstable_requestPaint,Ue=e.unstable_now,Ow=e.unstable_getCurrentPriorityLevel,au=e.unstable_ImmediatePriority,Rh=e.unstable_UserBlockingPriority,Lo=e.unstable_NormalPriority,Dw=e.unstable_LowPriority,Ph=e.unstable_IdlePriority,bo=null,Xt=null;function Lw(r){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(bo,r,void 0,(r.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Fw,bw=Math.log,Mw=Math.LN2;function Fw(r){return r>>>=0,r===0?32:31-(bw(r)/Mw|0)|0}var Mo=64,Fo=4194304;function Yi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Uo(r,i){var l=r.pendingLanes;if(l===0)return 0;var u=0,d=r.suspendedLanes,p=r.pingedLanes,g=l&268435455;if(g!==0){var w=g&~d;w!==0?u=Yi(w):(p&=g,p!==0&&(u=Yi(p)))}else g=l&~d,g!==0?u=Yi(g):p!==0&&(u=Yi(p));if(u===0)return 0;if(i!==0&&i!==u&&!(i&d)&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if(u&4&&(u|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=u;0<i;)l=31-Ft(i),d=1<<l,u|=r[l],i&=~d;return u}function Uw(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jw(r,i){for(var l=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var g=31-Ft(p),w=1<<g,E=d[g];E===-1?(!(w&l)||w&u)&&(d[g]=Uw(w,i)):E<=i&&(r.expiredLanes|=w),p&=~w}}function uu(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Nh(){var r=Mo;return Mo<<=1,!(Mo&4194240)&&(Mo=64),r}function cu(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Ji(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Ft(i),r[i]=l}function zw(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<l;){var d=31-Ft(l),p=1<<d;i[d]=0,u[d]=-1,r[d]=-1,l&=~p}}function du(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var u=31-Ft(l),d=1<<u;d&i|r[u]&i&&(r[u]|=i),l&=~d}}var ve=0;function xh(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Ah,fu,Oh,Dh,Lh,hu=!1,jo=[],On=null,Dn=null,Ln=null,Xi=new Map,Zi=new Map,bn=[],Ww="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bh(r,i){switch(r){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Xi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(i.pointerId)}}function es(r,i,l,u,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=ps(i),i!==null&&fu(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Bw(r,i,l,u,d){switch(i){case"focusin":return On=es(On,r,i,l,u,d),!0;case"dragenter":return Dn=es(Dn,r,i,l,u,d),!0;case"mouseover":return Ln=es(Ln,r,i,l,u,d),!0;case"pointerover":var p=d.pointerId;return Xi.set(p,es(Xi.get(p)||null,r,i,l,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Zi.set(p,es(Zi.get(p)||null,r,i,l,u,d)),!0}return!1}function Mh(r){var i=wr(r.target);if(i!==null){var l=vr(i);if(l!==null){if(i=l.tag,i===13){if(i=Eh(l),i!==null){r.blockedOn=i,Lh(r.priority,function(){Oh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function zo(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=mu(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);nu=u,l.target.dispatchEvent(u),nu=null}else return i=ps(l),i!==null&&fu(i),r.blockedOn=l,!1;i.shift()}return!0}function Fh(r,i,l){zo(r)&&l.delete(i)}function $w(){hu=!1,On!==null&&zo(On)&&(On=null),Dn!==null&&zo(Dn)&&(Dn=null),Ln!==null&&zo(Ln)&&(Ln=null),Xi.forEach(Fh),Zi.forEach(Fh)}function ts(r,i){r.blockedOn===i&&(r.blockedOn=null,hu||(hu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$w)))}function ns(r){function i(d){return ts(d,r)}if(0<jo.length){ts(jo[0],r);for(var l=1;l<jo.length;l++){var u=jo[l];u.blockedOn===r&&(u.blockedOn=null)}}for(On!==null&&ts(On,r),Dn!==null&&ts(Dn,r),Ln!==null&&ts(Ln,r),Xi.forEach(i),Zi.forEach(i),l=0;l<bn.length;l++)u=bn[l],u.blockedOn===r&&(u.blockedOn=null);for(;0<bn.length&&(l=bn[0],l.blockedOn===null);)Mh(l),l.blockedOn===null&&bn.shift()}var Jr=B.ReactCurrentBatchConfig,Wo=!0;function Vw(r,i,l,u){var d=ve,p=Jr.transition;Jr.transition=null;try{ve=1,pu(r,i,l,u)}finally{ve=d,Jr.transition=p}}function Hw(r,i,l,u){var d=ve,p=Jr.transition;Jr.transition=null;try{ve=4,pu(r,i,l,u)}finally{ve=d,Jr.transition=p}}function pu(r,i,l,u){if(Wo){var d=mu(r,i,l,u);if(d===null)Ou(r,i,u,Bo,l),bh(r,u);else if(Bw(d,r,i,l,u))u.stopPropagation();else if(bh(r,u),i&4&&-1<Ww.indexOf(r)){for(;d!==null;){var p=ps(d);if(p!==null&&Ah(p),p=mu(r,i,l,u),p===null&&Ou(r,i,u,Bo,l),p===d)break;d=p}d!==null&&u.stopPropagation()}else Ou(r,i,u,null,l)}}var Bo=null;function mu(r,i,l,u){if(Bo=null,r=ru(u),r=wr(r),r!==null)if(i=vr(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Eh(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Bo=r,null}function Uh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ow()){case au:return 1;case Rh:return 4;case Lo:case Dw:return 16;case Ph:return 536870912;default:return 16}default:return 16}}var Mn=null,gu=null,$o=null;function jh(){if($o)return $o;var r,i=gu,l=i.length,u,d="value"in Mn?Mn.value:Mn.textContent,p=d.length;for(r=0;r<l&&i[r]===d[r];r++);var g=l-r;for(u=1;u<=g&&i[l-u]===d[p-u];u++);return $o=d.slice(r,1<u?1-u:void 0)}function Vo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ho(){return!0}function zh(){return!1}function Et(r){function i(l,u,d,p,g){this._reactName=l,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=g,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(l=r[w],this[w]=l?l(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ho:zh,this.isPropagationStopped=zh,this}return G(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),i}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=Et(Xr),rs=G({},Xr,{view:0,detail:0}),Gw=Et(rs),yu,vu,is,Go=G({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==is&&(is&&r.type==="mousemove"?(yu=r.screenX-is.screenX,vu=r.screenY-is.screenY):vu=yu=0,is=r),yu)},movementY:function(r){return"movementY"in r?r.movementY:vu}}),Wh=Et(Go),Kw=G({},Go,{dataTransfer:0}),qw=Et(Kw),Qw=G({},rs,{relatedTarget:0}),wu=Et(Qw),Yw=G({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jw=Et(Yw),Xw=G({},Xr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Zw=Et(Xw),eE=G({},Xr,{data:0}),Bh=Et(eE),tE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iE(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=rE[r])?!!i[r]:!1}function Eu(){return iE}var sE=G({},rs,{key:function(r){if(r.key){var i=tE[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Vo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nE[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(r){return r.type==="keypress"?Vo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Vo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),oE=Et(sE),lE=G({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$h=Et(lE),aE=G({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),uE=Et(aE),cE=G({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),dE=Et(cE),fE=G({},Go,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),hE=Et(fE),pE=[9,13,27,32],Su=f&&"CompositionEvent"in window,ss=null;f&&"documentMode"in document&&(ss=document.documentMode);var mE=f&&"TextEvent"in window&&!ss,Vh=f&&(!Su||ss&&8<ss&&11>=ss),Hh=" ",Gh=!1;function Kh(r,i){switch(r){case"keyup":return pE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qh(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zr=!1;function gE(r,i){switch(r){case"compositionend":return qh(i);case"keypress":return i.which!==32?null:(Gh=!0,Hh);case"textInput":return r=i.data,r===Hh&&Gh?null:r;default:return null}}function _E(r,i){if(Zr)return r==="compositionend"||!Su&&Kh(r,i)?(r=jh(),$o=gu=Mn=null,Zr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vh&&i.locale!=="ko"?null:i.data;default:return null}}var yE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!yE[r.type]:i==="textarea"}function Yh(r,i,l,u){gh(u),i=Jo(i,"onChange"),0<i.length&&(l=new _u("onChange","change",null,l,u),r.push({event:l,listeners:i}))}var os=null,ls=null;function vE(r){pp(r,0)}function Ko(r){var i=ii(r);if(ih(i))return r}function wE(r,i){if(r==="change")return i}var Jh=!1;if(f){var Cu;if(f){var Iu="oninput"in document;if(!Iu){var Xh=document.createElement("div");Xh.setAttribute("oninput","return;"),Iu=typeof Xh.oninput=="function"}Cu=Iu}else Cu=!1;Jh=Cu&&(!document.documentMode||9<document.documentMode)}function Zh(){os&&(os.detachEvent("onpropertychange",ep),ls=os=null)}function ep(r){if(r.propertyName==="value"&&Ko(ls)){var i=[];Yh(i,ls,r,ru(r)),wh(vE,i)}}function EE(r,i,l){r==="focusin"?(Zh(),os=i,ls=l,os.attachEvent("onpropertychange",ep)):r==="focusout"&&Zh()}function SE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ko(ls)}function CE(r,i){if(r==="click")return Ko(i)}function IE(r,i){if(r==="input"||r==="change")return Ko(i)}function TE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ut=typeof Object.is=="function"?Object.is:TE;function as(r,i){if(Ut(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var d=l[u];if(!h.call(i,d)||!Ut(r[d],i[d]))return!1}return!0}function tp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function np(r,i){var l=tp(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=i&&u>=i)return{node:l,offset:i-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=tp(l)}}function rp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?rp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function ip(){for(var r=window,i=xo();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=xo(r.document)}return i}function Tu(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function kE(r){var i=ip(),l=r.focusedElem,u=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&rp(l.ownerDocument.documentElement,l)){if(u!==null&&Tu(l)){if(i=u.start,r=u.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=l.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!r.extend&&p>u&&(d=u,u=p,p=d),d=np(l,p);var g=np(l,u);d&&g&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==g.node||r.focusOffset!==g.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),p>u?(r.addRange(i),r.extend(g.node,g.offset)):(i.setEnd(g.node,g.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var RE=f&&"documentMode"in document&&11>=document.documentMode,ei=null,ku=null,us=null,Ru=!1;function sp(r,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ru||ei==null||ei!==xo(u)||(u=ei,"selectionStart"in u&&Tu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),us&&as(us,u)||(us=u,u=Jo(ku,"onSelect"),0<u.length&&(i=new _u("onSelect","select",null,i,l),r.push({event:i,listeners:u}),i.target=ei)))}function qo(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var ti={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},Pu={},op={};f&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function Qo(r){if(Pu[r])return Pu[r];if(!ti[r])return r;var i=ti[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in op)return Pu[r]=i[l];return r}var lp=Qo("animationend"),ap=Qo("animationiteration"),up=Qo("animationstart"),cp=Qo("transitionend"),dp=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(r,i){dp.set(r,i),a(i,[r])}for(var Nu=0;Nu<fp.length;Nu++){var xu=fp[Nu],PE=xu.toLowerCase(),NE=xu[0].toUpperCase()+xu.slice(1);Fn(PE,"on"+NE)}Fn(lp,"onAnimationEnd"),Fn(ap,"onAnimationIteration"),Fn(up,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(cp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function hp(r,i,l){var u=r.type||"unknown-event";r.currentTarget=l,Pw(u,i,void 0,r),r.currentTarget=null}function pp(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var g=u.length-1;0<=g;g--){var w=u[g],E=w.instance,P=w.currentTarget;if(w=w.listener,E!==p&&d.isPropagationStopped())break e;hp(d,w,P),p=E}else for(g=0;g<u.length;g++){if(w=u[g],E=w.instance,P=w.currentTarget,w=w.listener,E!==p&&d.isPropagationStopped())break e;hp(d,w,P),p=E}}}if(Do)throw r=lu,Do=!1,lu=null,r}function ke(r,i){var l=i[Uu];l===void 0&&(l=i[Uu]=new Set);var u=r+"__bubble";l.has(u)||(mp(i,r,2,!1),l.add(u))}function Au(r,i,l){var u=0;i&&(u|=4),mp(l,r,u,i)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function ds(r){if(!r[Yo]){r[Yo]=!0,s.forEach(function(l){l!=="selectionchange"&&(xE.has(l)||Au(l,!1,r),Au(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Yo]||(i[Yo]=!0,Au("selectionchange",!1,i))}}function mp(r,i,l,u){switch(Uh(i)){case 1:var d=Vw;break;case 4:d=Hw;break;default:d=pu}l=d.bind(null,i,l,r),d=void 0,!ou||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(i,l,{capture:!0,passive:d}):r.addEventListener(i,l,!0):d!==void 0?r.addEventListener(i,l,{passive:d}):r.addEventListener(i,l,!1)}function Ou(r,i,l,u,d){var p=u;if(!(i&1)&&!(i&2)&&u!==null)e:for(;;){if(u===null)return;var g=u.tag;if(g===3||g===4){var w=u.stateNode.containerInfo;if(w===d||w.nodeType===8&&w.parentNode===d)break;if(g===4)for(g=u.return;g!==null;){var E=g.tag;if((E===3||E===4)&&(E=g.stateNode.containerInfo,E===d||E.nodeType===8&&E.parentNode===d))return;g=g.return}for(;w!==null;){if(g=wr(w),g===null)return;if(E=g.tag,E===5||E===6){u=p=g;continue e}w=w.parentNode}}u=u.return}wh(function(){var P=p,F=ru(l),U=[];e:{var L=dp.get(r);if(L!==void 0){var V=_u,K=r;switch(r){case"keypress":if(Vo(l)===0)break e;case"keydown":case"keyup":V=oE;break;case"focusin":K="focus",V=wu;break;case"focusout":K="blur",V=wu;break;case"beforeblur":case"afterblur":V=wu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=uE;break;case lp:case ap:case up:V=Jw;break;case cp:V=dE;break;case"scroll":V=Gw;break;case"wheel":V=hE;break;case"copy":case"cut":case"paste":V=Zw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=$h}var q=(i&4)!==0,je=!q&&r==="scroll",k=q?L!==null?L+"Capture":null:L;q=[];for(var S=P,R;S!==null;){R=S;var j=R.stateNode;if(R.tag===5&&j!==null&&(R=j,k!==null&&(j=Ki(S,k),j!=null&&q.push(fs(S,j,R)))),je)break;S=S.return}0<q.length&&(L=new V(L,K,null,l,F),U.push({event:L,listeners:q}))}}if(!(i&7)){e:{if(L=r==="mouseover"||r==="pointerover",V=r==="mouseout"||r==="pointerout",L&&l!==nu&&(K=l.relatedTarget||l.fromElement)&&(wr(K)||K[dn]))break e;if((V||L)&&(L=F.window===F?F:(L=F.ownerDocument)?L.defaultView||L.parentWindow:window,V?(K=l.relatedTarget||l.toElement,V=P,K=K?wr(K):null,K!==null&&(je=vr(K),K!==je||K.tag!==5&&K.tag!==6)&&(K=null)):(V=null,K=P),V!==K)){if(q=Wh,j="onMouseLeave",k="onMouseEnter",S="mouse",(r==="pointerout"||r==="pointerover")&&(q=$h,j="onPointerLeave",k="onPointerEnter",S="pointer"),je=V==null?L:ii(V),R=K==null?L:ii(K),L=new q(j,S+"leave",V,l,F),L.target=je,L.relatedTarget=R,j=null,wr(F)===P&&(q=new q(k,S+"enter",K,l,F),q.target=R,q.relatedTarget=je,j=q),je=j,V&&K)t:{for(q=V,k=K,S=0,R=q;R;R=ni(R))S++;for(R=0,j=k;j;j=ni(j))R++;for(;0<S-R;)q=ni(q),S--;for(;0<R-S;)k=ni(k),R--;for(;S--;){if(q===k||k!==null&&q===k.alternate)break t;q=ni(q),k=ni(k)}q=null}else q=null;V!==null&&gp(U,L,V,q,!1),K!==null&&je!==null&&gp(U,je,K,q,!0)}}e:{if(L=P?ii(P):window,V=L.nodeName&&L.nodeName.toLowerCase(),V==="select"||V==="input"&&L.type==="file")var Q=wE;else if(Qh(L))if(Jh)Q=IE;else{Q=SE;var X=EE}else(V=L.nodeName)&&V.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(Q=CE);if(Q&&(Q=Q(r,P))){Yh(U,Q,l,F);break e}X&&X(r,L,P),r==="focusout"&&(X=L._wrapperState)&&X.controlled&&L.type==="number"&&Ja(L,"number",L.value)}switch(X=P?ii(P):window,r){case"focusin":(Qh(X)||X.contentEditable==="true")&&(ei=X,ku=P,us=null);break;case"focusout":us=ku=ei=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,sp(U,l,F);break;case"selectionchange":if(RE)break;case"keydown":case"keyup":sp(U,l,F)}var Z;if(Su)e:{switch(r){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Zr?Kh(r,l)&&(ie="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ie="onCompositionStart");ie&&(Vh&&l.locale!=="ko"&&(Zr||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Zr&&(Z=jh()):(Mn=F,gu="value"in Mn?Mn.value:Mn.textContent,Zr=!0)),X=Jo(P,ie),0<X.length&&(ie=new Bh(ie,r,null,l,F),U.push({event:ie,listeners:X}),Z?ie.data=Z:(Z=qh(l),Z!==null&&(ie.data=Z)))),(Z=mE?gE(r,l):_E(r,l))&&(P=Jo(P,"onBeforeInput"),0<P.length&&(F=new Bh("onBeforeInput","beforeinput",null,l,F),U.push({event:F,listeners:P}),F.data=Z))}pp(U,i)})}function fs(r,i,l){return{instance:r,listener:i,currentTarget:l}}function Jo(r,i){for(var l=i+"Capture",u=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ki(r,l),p!=null&&u.unshift(fs(r,p,d)),p=Ki(r,i),p!=null&&u.push(fs(r,p,d))),r=r.return}return u}function ni(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function gp(r,i,l,u,d){for(var p=i._reactName,g=[];l!==null&&l!==u;){var w=l,E=w.alternate,P=w.stateNode;if(E!==null&&E===u)break;w.tag===5&&P!==null&&(w=P,d?(E=Ki(l,p),E!=null&&g.unshift(fs(l,E,w))):d||(E=Ki(l,p),E!=null&&g.push(fs(l,E,w)))),l=l.return}g.length!==0&&r.push({event:i,listeners:g})}var AE=/\r\n?/g,OE=/\u0000|\uFFFD/g;function _p(r){return(typeof r=="string"?r:""+r).replace(AE,`
`).replace(OE,"")}function Xo(r,i,l){if(i=_p(i),_p(r)!==i&&l)throw Error(n(425))}function Zo(){}var Du=null,Lu=null;function bu(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,DE=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,LE=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(r){return yp.resolve(null).then(r).catch(bE)}:Mu;function bE(r){setTimeout(function(){throw r})}function Fu(r,i){var l=i,u=0;do{var d=l.nextSibling;if(r.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(u===0){r.removeChild(d),ns(i);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=d}while(l);ns(i)}function Un(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function vp(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var ri=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ri,hs="__reactProps$"+ri,dn="__reactContainer$"+ri,Uu="__reactEvents$"+ri,ME="__reactListeners$"+ri,FE="__reactHandles$"+ri;function wr(r){var i=r[Zt];if(i)return i;for(var l=r.parentNode;l;){if(i=l[dn]||l[Zt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=vp(r);r!==null;){if(l=r[Zt])return l;r=vp(r)}return i}r=l,l=r.parentNode}return null}function ps(r){return r=r[Zt]||r[dn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ii(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function el(r){return r[hs]||null}var ju=[],si=-1;function jn(r){return{current:r}}function Re(r){0>si||(r.current=ju[si],ju[si]=null,si--)}function Ce(r,i){si++,ju[si]=r.current,r.current=i}var zn={},tt=jn(zn),ft=jn(!1),Er=zn;function oi(r,i){var l=r.type.contextTypes;if(!l)return zn;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in l)d[p]=i[p];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function ht(r){return r=r.childContextTypes,r!=null}function tl(){Re(ft),Re(tt)}function wp(r,i,l){if(tt.current!==zn)throw Error(n(168));Ce(tt,i),Ce(ft,l)}function Ep(r,i,l){var u=r.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(n(108,Se(r)||"Unknown",d));return G({},l,u)}function nl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||zn,Er=tt.current,Ce(tt,r),Ce(ft,ft.current),!0}function Sp(r,i,l){var u=r.stateNode;if(!u)throw Error(n(169));l?(r=Ep(r,i,Er),u.__reactInternalMemoizedMergedChildContext=r,Re(ft),Re(tt),Ce(tt,r)):Re(ft),Ce(ft,l)}var fn=null,rl=!1,zu=!1;function Cp(r){fn===null?fn=[r]:fn.push(r)}function UE(r){rl=!0,Cp(r)}function Wn(){if(!zu&&fn!==null){zu=!0;var r=0,i=ve;try{var l=fn;for(ve=1;r<l.length;r++){var u=l[r];do u=u(!0);while(u!==null)}fn=null,rl=!1}catch(d){throw fn!==null&&(fn=fn.slice(r+1)),Th(au,Wn),d}finally{ve=i,zu=!1}}return null}var li=[],ai=0,il=null,sl=0,Pt=[],Nt=0,Sr=null,hn=1,pn="";function Cr(r,i){li[ai++]=sl,li[ai++]=il,il=r,sl=i}function Ip(r,i,l){Pt[Nt++]=hn,Pt[Nt++]=pn,Pt[Nt++]=Sr,Sr=r;var u=hn;r=pn;var d=32-Ft(u)-1;u&=~(1<<d),l+=1;var p=32-Ft(i)+d;if(30<p){var g=d-d%5;p=(u&(1<<g)-1).toString(32),u>>=g,d-=g,hn=1<<32-Ft(i)+d|l<<d|u,pn=p+r}else hn=1<<p|l<<d|u,pn=r}function Wu(r){r.return!==null&&(Cr(r,1),Ip(r,1,0))}function Bu(r){for(;r===il;)il=li[--ai],li[ai]=null,sl=li[--ai],li[ai]=null;for(;r===Sr;)Sr=Pt[--Nt],Pt[Nt]=null,pn=Pt[--Nt],Pt[Nt]=null,hn=Pt[--Nt],Pt[Nt]=null}var St=null,Ct=null,Ne=!1,jt=null;function Tp(r,i){var l=Dt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function kp(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,St=r,Ct=Un(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,St=r,Ct=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Sr!==null?{id:hn,overflow:pn}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Dt(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,St=r,Ct=null,!0):!1;default:return!1}}function $u(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Vu(r){if(Ne){var i=Ct;if(i){var l=i;if(!kp(r,i)){if($u(r))throw Error(n(418));i=Un(l.nextSibling);var u=St;i&&kp(r,i)?Tp(u,l):(r.flags=r.flags&-4097|2,Ne=!1,St=r)}}else{if($u(r))throw Error(n(418));r.flags=r.flags&-4097|2,Ne=!1,St=r}}}function Rp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;St=r}function ol(r){if(r!==St)return!1;if(!Ne)return Rp(r),Ne=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!bu(r.type,r.memoizedProps)),i&&(i=Ct)){if($u(r))throw Pp(),Error(n(418));for(;i;)Tp(r,i),i=Un(i.nextSibling)}if(Rp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Ct=Un(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Ct=null}}else Ct=St?Un(r.stateNode.nextSibling):null;return!0}function Pp(){for(var r=Ct;r;)r=Un(r.nextSibling)}function ui(){Ct=St=null,Ne=!1}function Hu(r){jt===null?jt=[r]:jt.push(r)}var jE=B.ReactCurrentBatchConfig;function ms(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var u=l.stateNode}if(!u)throw Error(n(147,r));var d=u,p=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(g){var w=d.refs;g===null?delete w[p]:w[p]=g},i._stringRef=p,i)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function ll(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Np(r){var i=r._init;return i(r._payload)}function xp(r){function i(k,S){if(r){var R=k.deletions;R===null?(k.deletions=[S],k.flags|=16):R.push(S)}}function l(k,S){if(!r)return null;for(;S!==null;)i(k,S),S=S.sibling;return null}function u(k,S){for(k=new Map;S!==null;)S.key!==null?k.set(S.key,S):k.set(S.index,S),S=S.sibling;return k}function d(k,S){return k=Qn(k,S),k.index=0,k.sibling=null,k}function p(k,S,R){return k.index=R,r?(R=k.alternate,R!==null?(R=R.index,R<S?(k.flags|=2,S):R):(k.flags|=2,S)):(k.flags|=1048576,S)}function g(k){return r&&k.alternate===null&&(k.flags|=2),k}function w(k,S,R,j){return S===null||S.tag!==6?(S=Mc(R,k.mode,j),S.return=k,S):(S=d(S,R),S.return=k,S)}function E(k,S,R,j){var Q=R.type;return Q===se?F(k,S,R.props.children,j,R.key):S!==null&&(S.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===dt&&Np(Q)===S.type)?(j=d(S,R.props),j.ref=ms(k,S,R),j.return=k,j):(j=Al(R.type,R.key,R.props,null,k.mode,j),j.ref=ms(k,S,R),j.return=k,j)}function P(k,S,R,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==R.containerInfo||S.stateNode.implementation!==R.implementation?(S=Fc(R,k.mode,j),S.return=k,S):(S=d(S,R.children||[]),S.return=k,S)}function F(k,S,R,j,Q){return S===null||S.tag!==7?(S=Ar(R,k.mode,j,Q),S.return=k,S):(S=d(S,R),S.return=k,S)}function U(k,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Mc(""+S,k.mode,R),S.return=k,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Y:return R=Al(S.type,S.key,S.props,null,k.mode,R),R.ref=ms(k,null,S),R.return=k,R;case J:return S=Fc(S,k.mode,R),S.return=k,S;case dt:var j=S._init;return U(k,j(S._payload),R)}if(Vi(S)||te(S))return S=Ar(S,k.mode,R,null),S.return=k,S;ll(k,S)}return null}function L(k,S,R,j){var Q=S!==null?S.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Q!==null?null:w(k,S,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Y:return R.key===Q?E(k,S,R,j):null;case J:return R.key===Q?P(k,S,R,j):null;case dt:return Q=R._init,L(k,S,Q(R._payload),j)}if(Vi(R)||te(R))return Q!==null?null:F(k,S,R,j,null);ll(k,R)}return null}function V(k,S,R,j,Q){if(typeof j=="string"&&j!==""||typeof j=="number")return k=k.get(R)||null,w(S,k,""+j,Q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Y:return k=k.get(j.key===null?R:j.key)||null,E(S,k,j,Q);case J:return k=k.get(j.key===null?R:j.key)||null,P(S,k,j,Q);case dt:var X=j._init;return V(k,S,R,X(j._payload),Q)}if(Vi(j)||te(j))return k=k.get(R)||null,F(S,k,j,Q,null);ll(S,j)}return null}function K(k,S,R,j){for(var Q=null,X=null,Z=S,ie=S=0,Ke=null;Z!==null&&ie<R.length;ie++){Z.index>ie?(Ke=Z,Z=null):Ke=Z.sibling;var ge=L(k,Z,R[ie],j);if(ge===null){Z===null&&(Z=Ke);break}r&&Z&&ge.alternate===null&&i(k,Z),S=p(ge,S,ie),X===null?Q=ge:X.sibling=ge,X=ge,Z=Ke}if(ie===R.length)return l(k,Z),Ne&&Cr(k,ie),Q;if(Z===null){for(;ie<R.length;ie++)Z=U(k,R[ie],j),Z!==null&&(S=p(Z,S,ie),X===null?Q=Z:X.sibling=Z,X=Z);return Ne&&Cr(k,ie),Q}for(Z=u(k,Z);ie<R.length;ie++)Ke=V(Z,k,ie,R[ie],j),Ke!==null&&(r&&Ke.alternate!==null&&Z.delete(Ke.key===null?ie:Ke.key),S=p(Ke,S,ie),X===null?Q=Ke:X.sibling=Ke,X=Ke);return r&&Z.forEach(function(Yn){return i(k,Yn)}),Ne&&Cr(k,ie),Q}function q(k,S,R,j){var Q=te(R);if(typeof Q!="function")throw Error(n(150));if(R=Q.call(R),R==null)throw Error(n(151));for(var X=Q=null,Z=S,ie=S=0,Ke=null,ge=R.next();Z!==null&&!ge.done;ie++,ge=R.next()){Z.index>ie?(Ke=Z,Z=null):Ke=Z.sibling;var Yn=L(k,Z,ge.value,j);if(Yn===null){Z===null&&(Z=Ke);break}r&&Z&&Yn.alternate===null&&i(k,Z),S=p(Yn,S,ie),X===null?Q=Yn:X.sibling=Yn,X=Yn,Z=Ke}if(ge.done)return l(k,Z),Ne&&Cr(k,ie),Q;if(Z===null){for(;!ge.done;ie++,ge=R.next())ge=U(k,ge.value,j),ge!==null&&(S=p(ge,S,ie),X===null?Q=ge:X.sibling=ge,X=ge);return Ne&&Cr(k,ie),Q}for(Z=u(k,Z);!ge.done;ie++,ge=R.next())ge=V(Z,k,ie,ge.value,j),ge!==null&&(r&&ge.alternate!==null&&Z.delete(ge.key===null?ie:ge.key),S=p(ge,S,ie),X===null?Q=ge:X.sibling=ge,X=ge);return r&&Z.forEach(function(_S){return i(k,_S)}),Ne&&Cr(k,ie),Q}function je(k,S,R,j){if(typeof R=="object"&&R!==null&&R.type===se&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Y:e:{for(var Q=R.key,X=S;X!==null;){if(X.key===Q){if(Q=R.type,Q===se){if(X.tag===7){l(k,X.sibling),S=d(X,R.props.children),S.return=k,k=S;break e}}else if(X.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===dt&&Np(Q)===X.type){l(k,X.sibling),S=d(X,R.props),S.ref=ms(k,X,R),S.return=k,k=S;break e}l(k,X);break}else i(k,X);X=X.sibling}R.type===se?(S=Ar(R.props.children,k.mode,j,R.key),S.return=k,k=S):(j=Al(R.type,R.key,R.props,null,k.mode,j),j.ref=ms(k,S,R),j.return=k,k=j)}return g(k);case J:e:{for(X=R.key;S!==null;){if(S.key===X)if(S.tag===4&&S.stateNode.containerInfo===R.containerInfo&&S.stateNode.implementation===R.implementation){l(k,S.sibling),S=d(S,R.children||[]),S.return=k,k=S;break e}else{l(k,S);break}else i(k,S);S=S.sibling}S=Fc(R,k.mode,j),S.return=k,k=S}return g(k);case dt:return X=R._init,je(k,S,X(R._payload),j)}if(Vi(R))return K(k,S,R,j);if(te(R))return q(k,S,R,j);ll(k,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,S!==null&&S.tag===6?(l(k,S.sibling),S=d(S,R),S.return=k,k=S):(l(k,S),S=Mc(R,k.mode,j),S.return=k,k=S),g(k)):l(k,S)}return je}var ci=xp(!0),Ap=xp(!1),al=jn(null),ul=null,di=null,Gu=null;function Ku(){Gu=di=ul=null}function qu(r){var i=al.current;Re(al),r._currentValue=i}function Qu(r,i,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===l)break;r=r.return}}function fi(r,i){ul=r,Gu=di=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&i&&(pt=!0),r.firstContext=null)}function xt(r){var i=r._currentValue;if(Gu!==r)if(r={context:r,memoizedValue:i,next:null},di===null){if(ul===null)throw Error(n(308));di=r,ul.dependencies={lanes:0,firstContext:r}}else di=di.next=r;return i}var Ir=null;function Yu(r){Ir===null?Ir=[r]:Ir.push(r)}function Op(r,i,l,u){var d=i.interleaved;return d===null?(l.next=l,Yu(i)):(l.next=d.next,d.next=l),i.interleaved=l,mn(r,u)}function mn(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Bn=!1;function Ju(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dp(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function gn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function $n(r,i,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,he&2){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,mn(r,l)}return d=u.interleaved,d===null?(i.next=i,Yu(u)):(i.next=d.next,d.next=i),u.interleaved=i,mn(r,l)}function cl(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,du(r,l)}}function Lp(r,i){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var d=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var g={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};p===null?d=p=g:p=p.next=g,l=l.next}while(l!==null);p===null?d=p=i:p=p.next=i}else d=p=i;l={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function dl(r,i,l,u){var d=r.updateQueue;Bn=!1;var p=d.firstBaseUpdate,g=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var E=w,P=E.next;E.next=null,g===null?p=P:g.next=P,g=E;var F=r.alternate;F!==null&&(F=F.updateQueue,w=F.lastBaseUpdate,w!==g&&(w===null?F.firstBaseUpdate=P:w.next=P,F.lastBaseUpdate=E))}if(p!==null){var U=d.baseState;g=0,F=P=E=null,w=p;do{var L=w.lane,V=w.eventTime;if((u&L)===L){F!==null&&(F=F.next={eventTime:V,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var K=r,q=w;switch(L=i,V=l,q.tag){case 1:if(K=q.payload,typeof K=="function"){U=K.call(V,U,L);break e}U=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=q.payload,L=typeof K=="function"?K.call(V,U,L):K,L==null)break e;U=G({},U,L);break e;case 2:Bn=!0}}w.callback!==null&&w.lane!==0&&(r.flags|=64,L=d.effects,L===null?d.effects=[w]:L.push(w))}else V={eventTime:V,lane:L,tag:w.tag,payload:w.payload,callback:w.callback,next:null},F===null?(P=F=V,E=U):F=F.next=V,g|=L;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;L=w,w=L.next,L.next=null,d.lastBaseUpdate=L,d.shared.pending=null}}while(!0);if(F===null&&(E=U),d.baseState=E,d.firstBaseUpdate=P,d.lastBaseUpdate=F,i=d.shared.interleaved,i!==null){d=i;do g|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);Rr|=g,r.lanes=g,r.memoizedState=U}}function bp(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var u=r[i],d=u.callback;if(d!==null){if(u.callback=null,u=l,typeof d!="function")throw Error(n(191,d));d.call(u)}}}var gs={},en=jn(gs),_s=jn(gs),ys=jn(gs);function Tr(r){if(r===gs)throw Error(n(174));return r}function Xu(r,i){switch(Ce(ys,i),Ce(_s,r),Ce(en,gs),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Za(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Za(i,r)}Re(en),Ce(en,i)}function hi(){Re(en),Re(_s),Re(ys)}function Mp(r){Tr(ys.current);var i=Tr(en.current),l=Za(i,r.type);i!==l&&(Ce(_s,r),Ce(en,l))}function Zu(r){_s.current===r&&(Re(en),Re(_s))}var Ae=jn(0);function fl(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ec=[];function tc(){for(var r=0;r<ec.length;r++)ec[r]._workInProgressVersionPrimary=null;ec.length=0}var hl=B.ReactCurrentDispatcher,nc=B.ReactCurrentBatchConfig,kr=0,Oe=null,We=null,He=null,pl=!1,vs=!1,ws=0,zE=0;function nt(){throw Error(n(321))}function rc(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Ut(r[l],i[l]))return!1;return!0}function ic(r,i,l,u,d,p){if(kr=p,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,hl.current=r===null||r.memoizedState===null?VE:HE,r=l(u,d),vs){p=0;do{if(vs=!1,ws=0,25<=p)throw Error(n(301));p+=1,He=We=null,i.updateQueue=null,hl.current=GE,r=l(u,d)}while(vs)}if(hl.current=_l,i=We!==null&&We.next!==null,kr=0,He=We=Oe=null,pl=!1,i)throw Error(n(300));return r}function sc(){var r=ws!==0;return ws=0,r}function tn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Oe.memoizedState=He=r:He=He.next=r,He}function At(){if(We===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=We.next;var i=He===null?Oe.memoizedState:He.next;if(i!==null)He=i,We=r;else{if(r===null)throw Error(n(310));We=r,r={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},He===null?Oe.memoizedState=He=r:He=He.next=r}return He}function Es(r,i){return typeof i=="function"?i(r):i}function oc(r){var i=At(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var u=We,d=u.baseQueue,p=l.pending;if(p!==null){if(d!==null){var g=d.next;d.next=p.next,p.next=g}u.baseQueue=d=p,l.pending=null}if(d!==null){p=d.next,u=u.baseState;var w=g=null,E=null,P=p;do{var F=P.lane;if((kr&F)===F)E!==null&&(E=E.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),u=P.hasEagerState?P.eagerState:r(u,P.action);else{var U={lane:F,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};E===null?(w=E=U,g=u):E=E.next=U,Oe.lanes|=F,Rr|=F}P=P.next}while(P!==null&&P!==p);E===null?g=u:E.next=w,Ut(u,i.memoizedState)||(pt=!0),i.memoizedState=u,i.baseState=g,i.baseQueue=E,l.lastRenderedState=u}if(r=l.interleaved,r!==null){d=r;do p=d.lane,Oe.lanes|=p,Rr|=p,d=d.next;while(d!==r)}else d===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function lc(r){var i=At(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var u=l.dispatch,d=l.pending,p=i.memoizedState;if(d!==null){l.pending=null;var g=d=d.next;do p=r(p,g.action),g=g.next;while(g!==d);Ut(p,i.memoizedState)||(pt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),l.lastRenderedState=p}return[p,u]}function Fp(){}function Up(r,i){var l=Oe,u=At(),d=i(),p=!Ut(u.memoizedState,d);if(p&&(u.memoizedState=d,pt=!0),u=u.queue,ac(Wp.bind(null,l,u,r),[r]),u.getSnapshot!==i||p||He!==null&&He.memoizedState.tag&1){if(l.flags|=2048,Ss(9,zp.bind(null,l,u,d,i),void 0,null),Ge===null)throw Error(n(349));kr&30||jp(l,i,d)}return d}function jp(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Oe.updateQueue,i===null?(i={lastEffect:null,stores:null},Oe.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function zp(r,i,l,u){i.value=l,i.getSnapshot=u,Bp(i)&&$p(r)}function Wp(r,i,l){return l(function(){Bp(i)&&$p(r)})}function Bp(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Ut(r,l)}catch{return!0}}function $p(r){var i=mn(r,1);i!==null&&$t(i,r,1,-1)}function Vp(r){var i=tn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:r},i.queue=r,r=r.dispatch=$E.bind(null,Oe,r),[i.memoizedState,r]}function Ss(r,i,l,u){return r={tag:r,create:i,destroy:l,deps:u,next:null},i=Oe.updateQueue,i===null?(i={lastEffect:null,stores:null},Oe.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,i.lastEffect=r)),r}function Hp(){return At().memoizedState}function ml(r,i,l,u){var d=tn();Oe.flags|=r,d.memoizedState=Ss(1|i,l,void 0,u===void 0?null:u)}function gl(r,i,l,u){var d=At();u=u===void 0?null:u;var p=void 0;if(We!==null){var g=We.memoizedState;if(p=g.destroy,u!==null&&rc(u,g.deps)){d.memoizedState=Ss(i,l,p,u);return}}Oe.flags|=r,d.memoizedState=Ss(1|i,l,p,u)}function Gp(r,i){return ml(8390656,8,r,i)}function ac(r,i){return gl(2048,8,r,i)}function Kp(r,i){return gl(4,2,r,i)}function qp(r,i){return gl(4,4,r,i)}function Qp(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Yp(r,i,l){return l=l!=null?l.concat([r]):null,gl(4,4,Qp.bind(null,i,r),l)}function uc(){}function Jp(r,i){var l=At();i=i===void 0?null:i;var u=l.memoizedState;return u!==null&&i!==null&&rc(i,u[1])?u[0]:(l.memoizedState=[r,i],r)}function Xp(r,i){var l=At();i=i===void 0?null:i;var u=l.memoizedState;return u!==null&&i!==null&&rc(i,u[1])?u[0]:(r=r(),l.memoizedState=[r,i],r)}function Zp(r,i,l){return kr&21?(Ut(l,i)||(l=Nh(),Oe.lanes|=l,Rr|=l,r.baseState=!0),i):(r.baseState&&(r.baseState=!1,pt=!0),r.memoizedState=l)}function WE(r,i){var l=ve;ve=l!==0&&4>l?l:4,r(!0);var u=nc.transition;nc.transition={};try{r(!1),i()}finally{ve=l,nc.transition=u}}function em(){return At().memoizedState}function BE(r,i,l){var u=Kn(r);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},tm(r))nm(i,l);else if(l=Op(r,i,l,u),l!==null){var d=lt();$t(l,r,u,d),rm(l,i,u)}}function $E(r,i,l){var u=Kn(r),d={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(tm(r))nm(i,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var g=i.lastRenderedState,w=p(g,l);if(d.hasEagerState=!0,d.eagerState=w,Ut(w,g)){var E=i.interleaved;E===null?(d.next=d,Yu(i)):(d.next=E.next,E.next=d),i.interleaved=d;return}}catch{}finally{}l=Op(r,i,d,u),l!==null&&(d=lt(),$t(l,r,u,d),rm(l,i,u))}}function tm(r){var i=r.alternate;return r===Oe||i!==null&&i===Oe}function nm(r,i){vs=pl=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function rm(r,i,l){if(l&4194240){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,du(r,l)}}var _l={readContext:xt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},VE={readContext:xt,useCallback:function(r,i){return tn().memoizedState=[r,i===void 0?null:i],r},useContext:xt,useEffect:Gp,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,ml(4194308,4,Qp.bind(null,i,r),l)},useLayoutEffect:function(r,i){return ml(4194308,4,r,i)},useInsertionEffect:function(r,i){return ml(4,2,r,i)},useMemo:function(r,i){var l=tn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var u=tn();return i=l!==void 0?l(i):i,u.memoizedState=u.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},u.queue=r,r=r.dispatch=BE.bind(null,Oe,r),[u.memoizedState,r]},useRef:function(r){var i=tn();return r={current:r},i.memoizedState=r},useState:Vp,useDebugValue:uc,useDeferredValue:function(r){return tn().memoizedState=r},useTransition:function(){var r=Vp(!1),i=r[0];return r=WE.bind(null,r[1]),tn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var u=Oe,d=tn();if(Ne){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),Ge===null)throw Error(n(349));kr&30||jp(u,i,l)}d.memoizedState=l;var p={value:l,getSnapshot:i};return d.queue=p,Gp(Wp.bind(null,u,p,r),[r]),u.flags|=2048,Ss(9,zp.bind(null,u,p,l,i),void 0,null),l},useId:function(){var r=tn(),i=Ge.identifierPrefix;if(Ne){var l=pn,u=hn;l=(u&~(1<<32-Ft(u)-1)).toString(32)+l,i=":"+i+"R"+l,l=ws++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=zE++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},HE={readContext:xt,useCallback:Jp,useContext:xt,useEffect:ac,useImperativeHandle:Yp,useInsertionEffect:Kp,useLayoutEffect:qp,useMemo:Xp,useReducer:oc,useRef:Hp,useState:function(){return oc(Es)},useDebugValue:uc,useDeferredValue:function(r){var i=At();return Zp(i,We.memoizedState,r)},useTransition:function(){var r=oc(Es)[0],i=At().memoizedState;return[r,i]},useMutableSource:Fp,useSyncExternalStore:Up,useId:em,unstable_isNewReconciler:!1},GE={readContext:xt,useCallback:Jp,useContext:xt,useEffect:ac,useImperativeHandle:Yp,useInsertionEffect:Kp,useLayoutEffect:qp,useMemo:Xp,useReducer:lc,useRef:Hp,useState:function(){return lc(Es)},useDebugValue:uc,useDeferredValue:function(r){var i=At();return We===null?i.memoizedState=r:Zp(i,We.memoizedState,r)},useTransition:function(){var r=lc(Es)[0],i=At().memoizedState;return[r,i]},useMutableSource:Fp,useSyncExternalStore:Up,useId:em,unstable_isNewReconciler:!1};function zt(r,i){if(r&&r.defaultProps){i=G({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function cc(r,i,l,u){i=r.memoizedState,l=l(u,i),l=l==null?i:G({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var yl={isMounted:function(r){return(r=r._reactInternals)?vr(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var u=lt(),d=Kn(r),p=gn(u,d);p.payload=i,l!=null&&(p.callback=l),i=$n(r,p,d),i!==null&&($t(i,r,d,u),cl(i,r,d))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var u=lt(),d=Kn(r),p=gn(u,d);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=$n(r,p,d),i!==null&&($t(i,r,d,u),cl(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=lt(),u=Kn(r),d=gn(l,u);d.tag=2,i!=null&&(d.callback=i),i=$n(r,d,u),i!==null&&($t(i,r,u,l),cl(i,r,u))}};function im(r,i,l,u,d,p,g){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,g):i.prototype&&i.prototype.isPureReactComponent?!as(l,u)||!as(d,p):!0}function sm(r,i,l){var u=!1,d=zn,p=i.contextType;return typeof p=="object"&&p!==null?p=xt(p):(d=ht(i)?Er:tt.current,u=i.contextTypes,p=(u=u!=null)?oi(r,d):zn),i=new i(l,p),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=yl,r.stateNode=i,i._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),i}function om(r,i,l,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==r&&yl.enqueueReplaceState(i,i.state,null)}function dc(r,i,l,u){var d=r.stateNode;d.props=l,d.state=r.memoizedState,d.refs={},Ju(r);var p=i.contextType;typeof p=="object"&&p!==null?d.context=xt(p):(p=ht(i)?Er:tt.current,d.context=oi(r,p)),d.state=r.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(cc(r,i,p,l),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&yl.enqueueReplaceState(d,d.state,null),dl(r,l,d,u),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function pi(r,i){try{var l="",u=i;do l+=pe(u),u=u.return;while(u);var d=l}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:i,stack:d,digest:null}}function fc(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function hc(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var KE=typeof WeakMap=="function"?WeakMap:Map;function lm(r,i,l){l=gn(-1,l),l.tag=3,l.payload={element:null};var u=i.value;return l.callback=function(){Tl||(Tl=!0,Pc=u),hc(r,i)},l}function am(r,i,l){l=gn(-1,l),l.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;l.payload=function(){return u(d)},l.callback=function(){hc(r,i)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(l.callback=function(){hc(r,i),typeof u!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var g=i.stack;this.componentDidCatch(i.value,{componentStack:g!==null?g:""})}),l}function um(r,i,l){var u=r.pingCache;if(u===null){u=r.pingCache=new KE;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(l)||(d.add(l),r=lS.bind(null,r,i,l),i.then(r,r))}function cm(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function dm(r,i,l,u,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=gn(-1,1),i.tag=2,$n(l,i,1))),l.lanes|=1),r)}var qE=B.ReactCurrentOwner,pt=!1;function ot(r,i,l,u){i.child=r===null?Ap(i,null,l,u):ci(i,r.child,l,u)}function fm(r,i,l,u,d){l=l.render;var p=i.ref;return fi(i,d),u=ic(r,i,l,u,p,d),l=sc(),r!==null&&!pt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,_n(r,i,d)):(Ne&&l&&Wu(i),i.flags|=1,ot(r,i,u,d),i.child)}function hm(r,i,l,u,d){if(r===null){var p=l.type;return typeof p=="function"&&!bc(p)&&p.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=p,pm(r,i,p,u,d)):(r=Al(l.type,null,u,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,!(r.lanes&d)){var g=p.memoizedProps;if(l=l.compare,l=l!==null?l:as,l(g,u)&&r.ref===i.ref)return _n(r,i,d)}return i.flags|=1,r=Qn(p,u),r.ref=i.ref,r.return=i,i.child=r}function pm(r,i,l,u,d){if(r!==null){var p=r.memoizedProps;if(as(p,u)&&r.ref===i.ref)if(pt=!1,i.pendingProps=u=p,(r.lanes&d)!==0)r.flags&131072&&(pt=!0);else return i.lanes=r.lanes,_n(r,i,d)}return pc(r,i,l,u,d)}function mm(r,i,l){var u=i.pendingProps,d=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(gi,It),It|=l;else{if(!(l&1073741824))return r=p!==null?p.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ce(gi,It),It|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:l,Ce(gi,It),It|=u}else p!==null?(u=p.baseLanes|l,i.memoizedState=null):u=l,Ce(gi,It),It|=u;return ot(r,i,d,l),i.child}function gm(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function pc(r,i,l,u,d){var p=ht(l)?Er:tt.current;return p=oi(i,p),fi(i,d),l=ic(r,i,l,u,p,d),u=sc(),r!==null&&!pt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,_n(r,i,d)):(Ne&&u&&Wu(i),i.flags|=1,ot(r,i,l,d),i.child)}function _m(r,i,l,u,d){if(ht(l)){var p=!0;nl(i)}else p=!1;if(fi(i,d),i.stateNode===null)wl(r,i),sm(i,l,u),dc(i,l,u,d),u=!0;else if(r===null){var g=i.stateNode,w=i.memoizedProps;g.props=w;var E=g.context,P=l.contextType;typeof P=="object"&&P!==null?P=xt(P):(P=ht(l)?Er:tt.current,P=oi(i,P));var F=l.getDerivedStateFromProps,U=typeof F=="function"||typeof g.getSnapshotBeforeUpdate=="function";U||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==u||E!==P)&&om(i,g,u,P),Bn=!1;var L=i.memoizedState;g.state=L,dl(i,u,g,d),E=i.memoizedState,w!==u||L!==E||ft.current||Bn?(typeof F=="function"&&(cc(i,l,F,u),E=i.memoizedState),(w=Bn||im(i,l,w,u,L,E,P))?(U||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=E),g.props=u,g.state=E,g.context=P,u=w):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Dp(r,i),w=i.memoizedProps,P=i.type===i.elementType?w:zt(i.type,w),g.props=P,U=i.pendingProps,L=g.context,E=l.contextType,typeof E=="object"&&E!==null?E=xt(E):(E=ht(l)?Er:tt.current,E=oi(i,E));var V=l.getDerivedStateFromProps;(F=typeof V=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==U||L!==E)&&om(i,g,u,E),Bn=!1,L=i.memoizedState,g.state=L,dl(i,u,g,d);var K=i.memoizedState;w!==U||L!==K||ft.current||Bn?(typeof V=="function"&&(cc(i,l,V,u),K=i.memoizedState),(P=Bn||im(i,l,P,u,L,K,E)||!1)?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,K,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,K,E)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=K),g.props=u,g.state=K,g.context=E,u=P):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),u=!1)}return mc(r,i,l,u,p,d)}function mc(r,i,l,u,d,p){gm(r,i);var g=(i.flags&128)!==0;if(!u&&!g)return d&&Sp(i,l,!1),_n(r,i,p);u=i.stateNode,qE.current=i;var w=g&&typeof l.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,r!==null&&g?(i.child=ci(i,r.child,null,p),i.child=ci(i,null,w,p)):ot(r,i,w,p),i.memoizedState=u.state,d&&Sp(i,l,!0),i.child}function ym(r){var i=r.stateNode;i.pendingContext?wp(r,i.pendingContext,i.pendingContext!==i.context):i.context&&wp(r,i.context,!1),Xu(r,i.containerInfo)}function vm(r,i,l,u,d){return ui(),Hu(d),i.flags|=256,ot(r,i,l,u),i.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function _c(r){return{baseLanes:r,cachePool:null,transitions:null}}function wm(r,i,l){var u=i.pendingProps,d=Ae.current,p=!1,g=(i.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(d&2)!==0),w?(p=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Ce(Ae,d&1),r===null)return Vu(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(i.mode&1?r.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(g=u.children,r=u.fallback,p?(u=i.mode,p=i.child,g={mode:"hidden",children:g},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=g):p=Ol(g,u,0,null),r=Ar(r,u,l,null),p.return=i,r.return=i,p.sibling=r,i.child=p,i.child.memoizedState=_c(l),i.memoizedState=gc,r):yc(i,g));if(d=r.memoizedState,d!==null&&(w=d.dehydrated,w!==null))return QE(r,i,g,u,w,d,l);if(p){p=u.fallback,g=i.mode,d=r.child,w=d.sibling;var E={mode:"hidden",children:u.children};return!(g&1)&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=E,i.deletions=null):(u=Qn(d,E),u.subtreeFlags=d.subtreeFlags&14680064),w!==null?p=Qn(w,p):(p=Ar(p,g,l,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,g=r.child.memoizedState,g=g===null?_c(l):{baseLanes:g.baseLanes|l,cachePool:null,transitions:g.transitions},p.memoizedState=g,p.childLanes=r.childLanes&~l,i.memoizedState=gc,u}return p=r.child,r=p.sibling,u=Qn(p,{mode:"visible",children:u.children}),!(i.mode&1)&&(u.lanes=l),u.return=i,u.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=u,i.memoizedState=null,u}function yc(r,i){return i=Ol({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function vl(r,i,l,u){return u!==null&&Hu(u),ci(i,r.child,null,l),r=yc(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function QE(r,i,l,u,d,p,g){if(l)return i.flags&256?(i.flags&=-257,u=fc(Error(n(422))),vl(r,i,g,u)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=Ol({mode:"visible",children:u.children},d,0,null),p=Ar(p,d,g,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,i.mode&1&&ci(i,r.child,null,g),i.child.memoizedState=_c(g),i.memoizedState=gc,p);if(!(i.mode&1))return vl(r,i,g,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(n(419)),u=fc(p,u,void 0),vl(r,i,g,u)}if(w=(g&r.childLanes)!==0,pt||w){if(u=Ge,u!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|g)?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,mn(r,d),$t(u,r,d,-1))}return Lc(),u=fc(Error(n(421))),vl(r,i,g,u)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=aS.bind(null,r),d._reactRetry=i,null):(r=p.treeContext,Ct=Un(d.nextSibling),St=i,Ne=!0,jt=null,r!==null&&(Pt[Nt++]=hn,Pt[Nt++]=pn,Pt[Nt++]=Sr,hn=r.id,pn=r.overflow,Sr=i),i=yc(i,u.children),i.flags|=4096,i)}function Em(r,i,l){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Qu(r.return,i,l)}function vc(r,i,l,u,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=d)}function Sm(r,i,l){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(ot(r,i,u.children,l),u=Ae.current,u&2)u=u&1|2,i.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Em(r,l,i);else if(r.tag===19)Em(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(Ce(Ae,u),!(i.mode&1))i.memoizedState=null;else switch(d){case"forwards":for(l=i.child,d=null;l!==null;)r=l.alternate,r!==null&&fl(r)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),vc(i,!1,d,l,p);break;case"backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&fl(r)===null){i.child=d;break}r=d.sibling,d.sibling=l,l=d,d=r}vc(i,!0,l,null,p);break;case"together":vc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function wl(r,i){!(i.mode&1)&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function _n(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),Rr|=i.lanes,!(l&i.childLanes))return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,l=Qn(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Qn(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function YE(r,i,l){switch(i.tag){case 3:ym(i),ui();break;case 5:Mp(i);break;case 1:ht(i.type)&&nl(i);break;case 4:Xu(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(al,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(Ae,Ae.current&1),i.flags|=128,null):l&i.child.childLanes?wm(r,i,l):(Ce(Ae,Ae.current&1),r=_n(r,i,l),r!==null?r.sibling:null);Ce(Ae,Ae.current&1);break;case 19:if(u=(l&i.childLanes)!==0,r.flags&128){if(u)return Sm(r,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Ae,Ae.current),u)break;return null;case 22:case 23:return i.lanes=0,mm(r,i,l)}return _n(r,i,l)}var Cm,wc,Im,Tm;Cm=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},wc=function(){},Im=function(r,i,l,u){var d=r.memoizedProps;if(d!==u){r=i.stateNode,Tr(en.current);var p=null;switch(l){case"input":d=Qa(r,d),u=Qa(r,u),p=[];break;case"select":d=G({},d,{value:void 0}),u=G({},u,{value:void 0}),p=[];break;case"textarea":d=Xa(r,d),u=Xa(r,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=Zo)}eu(l,u);var g;l=null;for(P in d)if(!u.hasOwnProperty(P)&&d.hasOwnProperty(P)&&d[P]!=null)if(P==="style"){var w=d[P];for(g in w)w.hasOwnProperty(g)&&(l||(l={}),l[g]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(o.hasOwnProperty(P)?p||(p=[]):(p=p||[]).push(P,null));for(P in u){var E=u[P];if(w=d!=null?d[P]:void 0,u.hasOwnProperty(P)&&E!==w&&(E!=null||w!=null))if(P==="style")if(w){for(g in w)!w.hasOwnProperty(g)||E&&E.hasOwnProperty(g)||(l||(l={}),l[g]="");for(g in E)E.hasOwnProperty(g)&&w[g]!==E[g]&&(l||(l={}),l[g]=E[g])}else l||(p||(p=[]),p.push(P,l)),l=E;else P==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,w=w?w.__html:void 0,E!=null&&w!==E&&(p=p||[]).push(P,E)):P==="children"?typeof E!="string"&&typeof E!="number"||(p=p||[]).push(P,""+E):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(o.hasOwnProperty(P)?(E!=null&&P==="onScroll"&&ke("scroll",r),p||w===E||(p=[])):(p=p||[]).push(P,E))}l&&(p=p||[]).push("style",l);var P=p;(i.updateQueue=P)&&(i.flags|=4)}},Tm=function(r,i,l,u){l!==u&&(i.flags|=4)};function Cs(r,i){if(!Ne)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function rt(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(i)for(var d=r.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=l,i}function JE(r,i,l){var u=i.pendingProps;switch(Bu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return ht(i.type)&&tl(),rt(i),null;case 3:return u=i.stateNode,hi(),Re(ft),Re(tt),tc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(ol(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,jt!==null&&(Ac(jt),jt=null))),wc(r,i),rt(i),null;case 5:Zu(i);var d=Tr(ys.current);if(l=i.type,r!==null&&i.stateNode!=null)Im(r,i,l,u,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(n(166));return rt(i),null}if(r=Tr(en.current),ol(i)){u=i.stateNode,l=i.type;var p=i.memoizedProps;switch(u[Zt]=i,u[hs]=p,r=(i.mode&1)!==0,l){case"dialog":ke("cancel",u),ke("close",u);break;case"iframe":case"object":case"embed":ke("load",u);break;case"video":case"audio":for(d=0;d<cs.length;d++)ke(cs[d],u);break;case"source":ke("error",u);break;case"img":case"image":case"link":ke("error",u),ke("load",u);break;case"details":ke("toggle",u);break;case"input":sh(u,p),ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},ke("invalid",u);break;case"textarea":ah(u,p),ke("invalid",u)}eu(l,p),d=null;for(var g in p)if(p.hasOwnProperty(g)){var w=p[g];g==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&Xo(u.textContent,w,r),d=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&Xo(u.textContent,w,r),d=["children",""+w]):o.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&ke("scroll",u)}switch(l){case"input":No(u),lh(u,p,!0);break;case"textarea":No(u),ch(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Zo)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=dh(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=g.createElement(l,{is:u.is}):(r=g.createElement(l),l==="select"&&(g=r,u.multiple?g.multiple=!0:u.size&&(g.size=u.size))):r=g.createElementNS(r,l),r[Zt]=i,r[hs]=u,Cm(r,i,!1,!1),i.stateNode=r;e:{switch(g=tu(l,u),l){case"dialog":ke("cancel",r),ke("close",r),d=u;break;case"iframe":case"object":case"embed":ke("load",r),d=u;break;case"video":case"audio":for(d=0;d<cs.length;d++)ke(cs[d],r);d=u;break;case"source":ke("error",r),d=u;break;case"img":case"image":case"link":ke("error",r),ke("load",r),d=u;break;case"details":ke("toggle",r),d=u;break;case"input":sh(r,u),d=Qa(r,u),ke("invalid",r);break;case"option":d=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},d=G({},u,{value:void 0}),ke("invalid",r);break;case"textarea":ah(r,u),d=Xa(r,u),ke("invalid",r);break;default:d=u}eu(l,d),w=d;for(p in w)if(w.hasOwnProperty(p)){var E=w[p];p==="style"?ph(r,E):p==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&fh(r,E)):p==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&Hi(r,E):typeof E=="number"&&Hi(r,""+E):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?E!=null&&p==="onScroll"&&ke("scroll",r):E!=null&&b(r,p,E,g))}switch(l){case"input":No(r),lh(r,u,!1);break;case"textarea":No(r),ch(r);break;case"option":u.value!=null&&r.setAttribute("value",""+ye(u.value));break;case"select":r.multiple=!!u.multiple,p=u.value,p!=null?qr(r,!!u.multiple,p,!1):u.defaultValue!=null&&qr(r,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Zo)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return rt(i),null;case 6:if(r&&i.stateNode!=null)Tm(r,i,r.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(l=Tr(ys.current),Tr(en.current),ol(i)){if(u=i.stateNode,l=i.memoizedProps,u[Zt]=i,(p=u.nodeValue!==l)&&(r=St,r!==null))switch(r.tag){case 3:Xo(u.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xo(u.nodeValue,l,(r.mode&1)!==0)}p&&(i.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[Zt]=i,i.stateNode=u}return rt(i),null;case 13:if(Re(Ae),u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ne&&Ct!==null&&i.mode&1&&!(i.flags&128))Pp(),ui(),i.flags|=98560,p=!1;else if(p=ol(i),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(n(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zt]=i}else ui(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;rt(i),p=!1}else jt!==null&&(Ac(jt),jt=null),p=!0;if(!p)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(i.child.flags|=8192,i.mode&1&&(r===null||Ae.current&1?Be===0&&(Be=3):Lc())),i.updateQueue!==null&&(i.flags|=4),rt(i),null);case 4:return hi(),wc(r,i),r===null&&ds(i.stateNode.containerInfo),rt(i),null;case 10:return qu(i.type._context),rt(i),null;case 17:return ht(i.type)&&tl(),rt(i),null;case 19:if(Re(Ae),p=i.memoizedState,p===null)return rt(i),null;if(u=(i.flags&128)!==0,g=p.rendering,g===null)if(u)Cs(p,!1);else{if(Be!==0||r!==null&&r.flags&128)for(r=i.child;r!==null;){if(g=fl(r),g!==null){for(i.flags|=128,Cs(p,!1),u=g.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=l,l=i.child;l!==null;)p=l,r=u,p.flags&=14680066,g=p.alternate,g===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=g.childLanes,p.lanes=g.lanes,p.child=g.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=g.memoizedProps,p.memoizedState=g.memoizedState,p.updateQueue=g.updateQueue,p.type=g.type,r=g.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ce(Ae,Ae.current&1|2),i.child}r=r.sibling}p.tail!==null&&Ue()>_i&&(i.flags|=128,u=!0,Cs(p,!1),i.lanes=4194304)}else{if(!u)if(r=fl(g),r!==null){if(i.flags|=128,u=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Cs(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!Ne)return rt(i),null}else 2*Ue()-p.renderingStartTime>_i&&l!==1073741824&&(i.flags|=128,u=!0,Cs(p,!1),i.lanes=4194304);p.isBackwards?(g.sibling=i.child,i.child=g):(l=p.last,l!==null?l.sibling=g:i.child=g,p.last=g)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ue(),i.sibling=null,l=Ae.current,Ce(Ae,u?l&1|2:l&1),i):(rt(i),null);case 22:case 23:return Dc(),u=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(i.flags|=8192),u&&i.mode&1?It&1073741824&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function XE(r,i){switch(Bu(i),i.tag){case 1:return ht(i.type)&&tl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return hi(),Re(ft),Re(tt),tc(),r=i.flags,r&65536&&!(r&128)?(i.flags=r&-65537|128,i):null;case 5:return Zu(i),null;case 13:if(Re(Ae),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ui()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Re(Ae),null;case 4:return hi(),null;case 10:return qu(i.type._context),null;case 22:case 23:return Dc(),null;case 24:return null;default:return null}}var El=!1,it=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,H=null;function mi(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){be(r,i,u)}else l.current=null}function Ec(r,i,l){try{l()}catch(u){be(r,i,u)}}var km=!1;function eS(r,i){if(Du=Wo,r=ip(),Tu(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break e}var g=0,w=-1,E=-1,P=0,F=0,U=r,L=null;t:for(;;){for(var V;U!==l||d!==0&&U.nodeType!==3||(w=g+d),U!==p||u!==0&&U.nodeType!==3||(E=g+u),U.nodeType===3&&(g+=U.nodeValue.length),(V=U.firstChild)!==null;)L=U,U=V;for(;;){if(U===r)break t;if(L===l&&++P===d&&(w=g),L===p&&++F===u&&(E=g),(V=U.nextSibling)!==null)break;U=L,L=U.parentNode}U=V}l=w===-1||E===-1?null:{start:w,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(Lu={focusedElem:r,selectionRange:l},Wo=!1,H=i;H!==null;)if(i=H,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,H=r;else for(;H!==null;){i=H;try{var K=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var q=K.memoizedProps,je=K.memoizedState,k=i.stateNode,S=k.getSnapshotBeforeUpdate(i.elementType===i.type?q:zt(i.type,q),je);k.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var R=i.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(j){be(i,i.return,j)}if(r=i.sibling,r!==null){r.return=i.return,H=r;break}H=i.return}return K=km,km=!1,K}function Is(r,i,l){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&Ec(i,l,p)}d=d.next}while(d!==u)}}function Sl(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var u=l.create;l.destroy=u()}l=l.next}while(l!==i)}}function Sc(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Rm(r){var i=r.alternate;i!==null&&(r.alternate=null,Rm(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Zt],delete i[hs],delete i[Uu],delete i[ME],delete i[FE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Pm(r){return r.tag===5||r.tag===3||r.tag===4}function Nm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Pm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Cc(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Zo));else if(u!==4&&(r=r.child,r!==null))for(Cc(r,i,l),r=r.sibling;r!==null;)Cc(r,i,l),r=r.sibling}function Ic(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(Ic(r,i,l),r=r.sibling;r!==null;)Ic(r,i,l),r=r.sibling}var Ye=null,Wt=!1;function Vn(r,i,l){for(l=l.child;l!==null;)xm(r,i,l),l=l.sibling}function xm(r,i,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(bo,l)}catch{}switch(l.tag){case 5:it||mi(l,i);case 6:var u=Ye,d=Wt;Ye=null,Vn(r,i,l),Ye=u,Wt=d,Ye!==null&&(Wt?(r=Ye,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Ye.removeChild(l.stateNode));break;case 18:Ye!==null&&(Wt?(r=Ye,l=l.stateNode,r.nodeType===8?Fu(r.parentNode,l):r.nodeType===1&&Fu(r,l),ns(r)):Fu(Ye,l.stateNode));break;case 4:u=Ye,d=Wt,Ye=l.stateNode.containerInfo,Wt=!0,Vn(r,i,l),Ye=u,Wt=d;break;case 0:case 11:case 14:case 15:if(!it&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,g=p.destroy;p=p.tag,g!==void 0&&(p&2||p&4)&&Ec(l,i,g),d=d.next}while(d!==u)}Vn(r,i,l);break;case 1:if(!it&&(mi(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(w){be(l,i,w)}Vn(r,i,l);break;case 21:Vn(r,i,l);break;case 22:l.mode&1?(it=(u=it)||l.memoizedState!==null,Vn(r,i,l),it=u):Vn(r,i,l);break;default:Vn(r,i,l)}}function Am(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new ZE),i.forEach(function(u){var d=uS.bind(null,r,u);l.has(u)||(l.add(u),u.then(d,d))})}}function Bt(r,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];try{var p=r,g=i,w=g;e:for(;w!==null;){switch(w.tag){case 5:Ye=w.stateNode,Wt=!1;break e;case 3:Ye=w.stateNode.containerInfo,Wt=!0;break e;case 4:Ye=w.stateNode.containerInfo,Wt=!0;break e}w=w.return}if(Ye===null)throw Error(n(160));xm(p,g,d),Ye=null,Wt=!1;var E=d.alternate;E!==null&&(E.return=null),d.return=null}catch(P){be(d,i,P)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Om(i,r),i=i.sibling}function Om(r,i){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Bt(i,r),nn(r),u&4){try{Is(3,r,r.return),Sl(3,r)}catch(q){be(r,r.return,q)}try{Is(5,r,r.return)}catch(q){be(r,r.return,q)}}break;case 1:Bt(i,r),nn(r),u&512&&l!==null&&mi(l,l.return);break;case 5:if(Bt(i,r),nn(r),u&512&&l!==null&&mi(l,l.return),r.flags&32){var d=r.stateNode;try{Hi(d,"")}catch(q){be(r,r.return,q)}}if(u&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,g=l!==null?l.memoizedProps:p,w=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&oh(d,p),tu(w,g);var P=tu(w,p);for(g=0;g<E.length;g+=2){var F=E[g],U=E[g+1];F==="style"?ph(d,U):F==="dangerouslySetInnerHTML"?fh(d,U):F==="children"?Hi(d,U):b(d,F,U,P)}switch(w){case"input":Ya(d,p);break;case"textarea":uh(d,p);break;case"select":var L=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var V=p.value;V!=null?qr(d,!!p.multiple,V,!1):L!==!!p.multiple&&(p.defaultValue!=null?qr(d,!!p.multiple,p.defaultValue,!0):qr(d,!!p.multiple,p.multiple?[]:"",!1))}d[hs]=p}catch(q){be(r,r.return,q)}}break;case 6:if(Bt(i,r),nn(r),u&4){if(r.stateNode===null)throw Error(n(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(q){be(r,r.return,q)}}break;case 3:if(Bt(i,r),nn(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ns(i.containerInfo)}catch(q){be(r,r.return,q)}break;case 4:Bt(i,r),nn(r);break;case 13:Bt(i,r),nn(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Rc=Ue())),u&4&&Am(r);break;case 22:if(F=l!==null&&l.memoizedState!==null,r.mode&1?(it=(P=it)||F,Bt(i,r),it=P):Bt(i,r),nn(r),u&8192){if(P=r.memoizedState!==null,(r.stateNode.isHidden=P)&&!F&&r.mode&1)for(H=r,F=r.child;F!==null;){for(U=H=F;H!==null;){switch(L=H,V=L.child,L.tag){case 0:case 11:case 14:case 15:Is(4,L,L.return);break;case 1:mi(L,L.return);var K=L.stateNode;if(typeof K.componentWillUnmount=="function"){u=L,l=L.return;try{i=u,K.props=i.memoizedProps,K.state=i.memoizedState,K.componentWillUnmount()}catch(q){be(u,l,q)}}break;case 5:mi(L,L.return);break;case 22:if(L.memoizedState!==null){bm(U);continue}}V!==null?(V.return=L,H=V):bm(U)}F=F.sibling}e:for(F=null,U=r;;){if(U.tag===5){if(F===null){F=U;try{d=U.stateNode,P?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=U.stateNode,E=U.memoizedProps.style,g=E!=null&&E.hasOwnProperty("display")?E.display:null,w.style.display=hh("display",g))}catch(q){be(r,r.return,q)}}}else if(U.tag===6){if(F===null)try{U.stateNode.nodeValue=P?"":U.memoizedProps}catch(q){be(r,r.return,q)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===r)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===r)break e;for(;U.sibling===null;){if(U.return===null||U.return===r)break e;F===U&&(F=null),U=U.return}F===U&&(F=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:Bt(i,r),nn(r),u&4&&Am(r);break;case 21:break;default:Bt(i,r),nn(r)}}function nn(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Pm(l)){var u=l;break e}l=l.return}throw Error(n(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Hi(d,""),u.flags&=-33);var p=Nm(r);Ic(r,p,d);break;case 3:case 4:var g=u.stateNode.containerInfo,w=Nm(r);Cc(r,w,g);break;default:throw Error(n(161))}}catch(E){be(r,r.return,E)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function tS(r,i,l){H=r,Dm(r)}function Dm(r,i,l){for(var u=(r.mode&1)!==0;H!==null;){var d=H,p=d.child;if(d.tag===22&&u){var g=d.memoizedState!==null||El;if(!g){var w=d.alternate,E=w!==null&&w.memoizedState!==null||it;w=El;var P=it;if(El=g,(it=E)&&!P)for(H=d;H!==null;)g=H,E=g.child,g.tag===22&&g.memoizedState!==null?Mm(d):E!==null?(E.return=g,H=E):Mm(d);for(;p!==null;)H=p,Dm(p),p=p.sibling;H=d,El=w,it=P}Lm(r)}else d.subtreeFlags&8772&&p!==null?(p.return=d,H=p):Lm(r)}}function Lm(r){for(;H!==null;){var i=H;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:it||Sl(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!it)if(l===null)u.componentDidMount();else{var d=i.elementType===i.type?l.memoizedProps:zt(i.type,l.memoizedProps);u.componentDidUpdate(d,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&bp(i,p,u);break;case 3:var g=i.updateQueue;if(g!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}bp(i,g,l)}break;case 5:var w=i.stateNode;if(l===null&&i.flags&4){l=w;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var P=i.alternate;if(P!==null){var F=P.memoizedState;if(F!==null){var U=F.dehydrated;U!==null&&ns(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}it||i.flags&512&&Sc(i)}catch(L){be(i,i.return,L)}}if(i===r){H=null;break}if(l=i.sibling,l!==null){l.return=i.return,H=l;break}H=i.return}}function bm(r){for(;H!==null;){var i=H;if(i===r){H=null;break}var l=i.sibling;if(l!==null){l.return=i.return,H=l;break}H=i.return}}function Mm(r){for(;H!==null;){var i=H;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Sl(4,i)}catch(E){be(i,l,E)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(E){be(i,d,E)}}var p=i.return;try{Sc(i)}catch(E){be(i,p,E)}break;case 5:var g=i.return;try{Sc(i)}catch(E){be(i,g,E)}}}catch(E){be(i,i.return,E)}if(i===r){H=null;break}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break}H=i.return}}var nS=Math.ceil,Cl=B.ReactCurrentDispatcher,Tc=B.ReactCurrentOwner,Ot=B.ReactCurrentBatchConfig,he=0,Ge=null,ze=null,Je=0,It=0,gi=jn(0),Be=0,Ts=null,Rr=0,Il=0,kc=0,ks=null,mt=null,Rc=0,_i=1/0,yn=null,Tl=!1,Pc=null,Hn=null,kl=!1,Gn=null,Rl=0,Rs=0,Nc=null,Pl=-1,Nl=0;function lt(){return he&6?Ue():Pl!==-1?Pl:Pl=Ue()}function Kn(r){return r.mode&1?he&2&&Je!==0?Je&-Je:jE.transition!==null?(Nl===0&&(Nl=Nh()),Nl):(r=ve,r!==0||(r=window.event,r=r===void 0?16:Uh(r.type)),r):1}function $t(r,i,l,u){if(50<Rs)throw Rs=0,Nc=null,Error(n(185));Ji(r,l,u),(!(he&2)||r!==Ge)&&(r===Ge&&(!(he&2)&&(Il|=l),Be===4&&qn(r,Je)),gt(r,u),l===1&&he===0&&!(i.mode&1)&&(_i=Ue()+500,rl&&Wn()))}function gt(r,i){var l=r.callbackNode;jw(r,i);var u=Uo(r,r===Ge?Je:0);if(u===0)l!==null&&kh(l),r.callbackNode=null,r.callbackPriority=0;else if(i=u&-u,r.callbackPriority!==i){if(l!=null&&kh(l),i===1)r.tag===0?UE(Um.bind(null,r)):Cp(Um.bind(null,r)),LE(function(){!(he&6)&&Wn()}),l=null;else{switch(xh(u)){case 1:l=au;break;case 4:l=Rh;break;case 16:l=Lo;break;case 536870912:l=Ph;break;default:l=Lo}l=Gm(l,Fm.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Fm(r,i){if(Pl=-1,Nl=0,he&6)throw Error(n(327));var l=r.callbackNode;if(yi()&&r.callbackNode!==l)return null;var u=Uo(r,r===Ge?Je:0);if(u===0)return null;if(u&30||u&r.expiredLanes||i)i=xl(r,u);else{i=u;var d=he;he|=2;var p=zm();(Ge!==r||Je!==i)&&(yn=null,_i=Ue()+500,Nr(r,i));do try{sS();break}catch(w){jm(r,w)}while(!0);Ku(),Cl.current=p,he=d,ze!==null?i=0:(Ge=null,Je=0,i=Be)}if(i!==0){if(i===2&&(d=uu(r),d!==0&&(u=d,i=xc(r,d))),i===1)throw l=Ts,Nr(r,0),qn(r,u),gt(r,Ue()),l;if(i===6)qn(r,u);else{if(d=r.current.alternate,!(u&30)&&!rS(d)&&(i=xl(r,u),i===2&&(p=uu(r),p!==0&&(u=p,i=xc(r,p))),i===1))throw l=Ts,Nr(r,0),qn(r,u),gt(r,Ue()),l;switch(r.finishedWork=d,r.finishedLanes=u,i){case 0:case 1:throw Error(n(345));case 2:xr(r,mt,yn);break;case 3:if(qn(r,u),(u&130023424)===u&&(i=Rc+500-Ue(),10<i)){if(Uo(r,0)!==0)break;if(d=r.suspendedLanes,(d&u)!==u){lt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Mu(xr.bind(null,r,mt,yn),i);break}xr(r,mt,yn);break;case 4:if(qn(r,u),(u&4194240)===u)break;for(i=r.eventTimes,d=-1;0<u;){var g=31-Ft(u);p=1<<g,g=i[g],g>d&&(d=g),u&=~p}if(u=d,u=Ue()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*nS(u/1960))-u,10<u){r.timeoutHandle=Mu(xr.bind(null,r,mt,yn),u);break}xr(r,mt,yn);break;case 5:xr(r,mt,yn);break;default:throw Error(n(329))}}}return gt(r,Ue()),r.callbackNode===l?Fm.bind(null,r):null}function xc(r,i){var l=ks;return r.current.memoizedState.isDehydrated&&(Nr(r,i).flags|=256),r=xl(r,i),r!==2&&(i=mt,mt=l,i!==null&&Ac(i)),r}function Ac(r){mt===null?mt=r:mt.push.apply(mt,r)}function rS(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var d=l[u],p=d.getSnapshot;d=d.value;try{if(!Ut(p(),d))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qn(r,i){for(i&=~kc,i&=~Il,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Ft(i),u=1<<l;r[l]=-1,i&=~u}}function Um(r){if(he&6)throw Error(n(327));yi();var i=Uo(r,0);if(!(i&1))return gt(r,Ue()),null;var l=xl(r,i);if(r.tag!==0&&l===2){var u=uu(r);u!==0&&(i=u,l=xc(r,u))}if(l===1)throw l=Ts,Nr(r,0),qn(r,i),gt(r,Ue()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,xr(r,mt,yn),gt(r,Ue()),null}function Oc(r,i){var l=he;he|=1;try{return r(i)}finally{he=l,he===0&&(_i=Ue()+500,rl&&Wn())}}function Pr(r){Gn!==null&&Gn.tag===0&&!(he&6)&&yi();var i=he;he|=1;var l=Ot.transition,u=ve;try{if(Ot.transition=null,ve=1,r)return r()}finally{ve=u,Ot.transition=l,he=i,!(he&6)&&Wn()}}function Dc(){It=gi.current,Re(gi)}function Nr(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,DE(l)),ze!==null)for(l=ze.return;l!==null;){var u=l;switch(Bu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&tl();break;case 3:hi(),Re(ft),Re(tt),tc();break;case 5:Zu(u);break;case 4:hi();break;case 13:Re(Ae);break;case 19:Re(Ae);break;case 10:qu(u.type._context);break;case 22:case 23:Dc()}l=l.return}if(Ge=r,ze=r=Qn(r.current,null),Je=It=i,Be=0,Ts=null,kc=Il=Rr=0,mt=ks=null,Ir!==null){for(i=0;i<Ir.length;i++)if(l=Ir[i],u=l.interleaved,u!==null){l.interleaved=null;var d=u.next,p=l.pending;if(p!==null){var g=p.next;p.next=d,u.next=g}l.pending=u}Ir=null}return r}function jm(r,i){do{var l=ze;try{if(Ku(),hl.current=_l,pl){for(var u=Oe.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}pl=!1}if(kr=0,He=We=Oe=null,vs=!1,ws=0,Tc.current=null,l===null||l.return===null){Be=1,Ts=i,ze=null;break}e:{var p=r,g=l.return,w=l,E=i;if(i=Je,w.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var P=E,F=w,U=F.tag;if(!(F.mode&1)&&(U===0||U===11||U===15)){var L=F.alternate;L?(F.updateQueue=L.updateQueue,F.memoizedState=L.memoizedState,F.lanes=L.lanes):(F.updateQueue=null,F.memoizedState=null)}var V=cm(g);if(V!==null){V.flags&=-257,dm(V,g,w,p,i),V.mode&1&&um(p,P,i),i=V,E=P;var K=i.updateQueue;if(K===null){var q=new Set;q.add(E),i.updateQueue=q}else K.add(E);break e}else{if(!(i&1)){um(p,P,i),Lc();break e}E=Error(n(426))}}else if(Ne&&w.mode&1){var je=cm(g);if(je!==null){!(je.flags&65536)&&(je.flags|=256),dm(je,g,w,p,i),Hu(pi(E,w));break e}}p=E=pi(E,w),Be!==4&&(Be=2),ks===null?ks=[p]:ks.push(p),p=g;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var k=lm(p,E,i);Lp(p,k);break e;case 1:w=E;var S=p.type,R=p.stateNode;if(!(p.flags&128)&&(typeof S.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Hn===null||!Hn.has(R)))){p.flags|=65536,i&=-i,p.lanes|=i;var j=am(p,w,i);Lp(p,j);break e}}p=p.return}while(p!==null)}Bm(l)}catch(Q){i=Q,ze===l&&l!==null&&(ze=l=l.return);continue}break}while(!0)}function zm(){var r=Cl.current;return Cl.current=_l,r===null?_l:r}function Lc(){(Be===0||Be===3||Be===2)&&(Be=4),Ge===null||!(Rr&268435455)&&!(Il&268435455)||qn(Ge,Je)}function xl(r,i){var l=he;he|=2;var u=zm();(Ge!==r||Je!==i)&&(yn=null,Nr(r,i));do try{iS();break}catch(d){jm(r,d)}while(!0);if(Ku(),he=l,Cl.current=u,ze!==null)throw Error(n(261));return Ge=null,Je=0,Be}function iS(){for(;ze!==null;)Wm(ze)}function sS(){for(;ze!==null&&!xw();)Wm(ze)}function Wm(r){var i=Hm(r.alternate,r,It);r.memoizedProps=r.pendingProps,i===null?Bm(r):ze=i,Tc.current=null}function Bm(r){var i=r;do{var l=i.alternate;if(r=i.return,i.flags&32768){if(l=XE(l,i),l!==null){l.flags&=32767,ze=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Be=6,ze=null;return}}else if(l=JE(l,i,It),l!==null){ze=l;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=r}while(i!==null);Be===0&&(Be=5)}function xr(r,i,l){var u=ve,d=Ot.transition;try{Ot.transition=null,ve=1,oS(r,i,l,u)}finally{Ot.transition=d,ve=u}return null}function oS(r,i,l,u){do yi();while(Gn!==null);if(he&6)throw Error(n(327));l=r.finishedWork;var d=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var p=l.lanes|l.childLanes;if(zw(r,p),r===Ge&&(ze=Ge=null,Je=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||kl||(kl=!0,Gm(Lo,function(){return yi(),null})),p=(l.flags&15990)!==0,l.subtreeFlags&15990||p){p=Ot.transition,Ot.transition=null;var g=ve;ve=1;var w=he;he|=4,Tc.current=null,eS(r,l),Om(l,r),kE(Lu),Wo=!!Du,Lu=Du=null,r.current=l,tS(l),Aw(),he=w,ve=g,Ot.transition=p}else r.current=l;if(kl&&(kl=!1,Gn=r,Rl=d),p=r.pendingLanes,p===0&&(Hn=null),Lw(l.stateNode),gt(r,Ue()),i!==null)for(u=r.onRecoverableError,l=0;l<i.length;l++)d=i[l],u(d.value,{componentStack:d.stack,digest:d.digest});if(Tl)throw Tl=!1,r=Pc,Pc=null,r;return Rl&1&&r.tag!==0&&yi(),p=r.pendingLanes,p&1?r===Nc?Rs++:(Rs=0,Nc=r):Rs=0,Wn(),null}function yi(){if(Gn!==null){var r=xh(Rl),i=Ot.transition,l=ve;try{if(Ot.transition=null,ve=16>r?16:r,Gn===null)var u=!1;else{if(r=Gn,Gn=null,Rl=0,he&6)throw Error(n(331));var d=he;for(he|=4,H=r.current;H!==null;){var p=H,g=p.child;if(H.flags&16){var w=p.deletions;if(w!==null){for(var E=0;E<w.length;E++){var P=w[E];for(H=P;H!==null;){var F=H;switch(F.tag){case 0:case 11:case 15:Is(8,F,p)}var U=F.child;if(U!==null)U.return=F,H=U;else for(;H!==null;){F=H;var L=F.sibling,V=F.return;if(Rm(F),F===P){H=null;break}if(L!==null){L.return=V,H=L;break}H=V}}}var K=p.alternate;if(K!==null){var q=K.child;if(q!==null){K.child=null;do{var je=q.sibling;q.sibling=null,q=je}while(q!==null)}}H=p}}if(p.subtreeFlags&2064&&g!==null)g.return=p,H=g;else e:for(;H!==null;){if(p=H,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Is(9,p,p.return)}var k=p.sibling;if(k!==null){k.return=p.return,H=k;break e}H=p.return}}var S=r.current;for(H=S;H!==null;){g=H;var R=g.child;if(g.subtreeFlags&2064&&R!==null)R.return=g,H=R;else e:for(g=S;H!==null;){if(w=H,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:Sl(9,w)}}catch(Q){be(w,w.return,Q)}if(w===g){H=null;break e}var j=w.sibling;if(j!==null){j.return=w.return,H=j;break e}H=w.return}}if(he=d,Wn(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(bo,r)}catch{}u=!0}return u}finally{ve=l,Ot.transition=i}}return!1}function $m(r,i,l){i=pi(l,i),i=lm(r,i,1),r=$n(r,i,1),i=lt(),r!==null&&(Ji(r,1,i),gt(r,i))}function be(r,i,l){if(r.tag===3)$m(r,r,l);else for(;i!==null;){if(i.tag===3){$m(i,r,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hn===null||!Hn.has(u))){r=pi(l,r),r=am(i,r,1),i=$n(i,r,1),r=lt(),i!==null&&(Ji(i,1,r),gt(i,r));break}}i=i.return}}function lS(r,i,l){var u=r.pingCache;u!==null&&u.delete(i),i=lt(),r.pingedLanes|=r.suspendedLanes&l,Ge===r&&(Je&l)===l&&(Be===4||Be===3&&(Je&130023424)===Je&&500>Ue()-Rc?Nr(r,0):kc|=l),gt(r,i)}function Vm(r,i){i===0&&(r.mode&1?(i=Fo,Fo<<=1,!(Fo&130023424)&&(Fo=4194304)):i=1);var l=lt();r=mn(r,i),r!==null&&(Ji(r,i,l),gt(r,l))}function aS(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Vm(r,l)}function uS(r,i){var l=0;switch(r.tag){case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(l=d.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(i),Vm(r,l)}var Hm;Hm=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||ft.current)pt=!0;else{if(!(r.lanes&l)&&!(i.flags&128))return pt=!1,YE(r,i,l);pt=!!(r.flags&131072)}else pt=!1,Ne&&i.flags&1048576&&Ip(i,sl,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;wl(r,i),r=i.pendingProps;var d=oi(i,tt.current);fi(i,l),d=ic(null,i,u,r,d,l);var p=sc();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,ht(u)?(p=!0,nl(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ju(i),d.updater=yl,i.stateNode=d,d._reactInternals=i,dc(i,u,r,l),i=mc(null,i,u,!0,p,l)):(i.tag=0,Ne&&p&&Wu(i),ot(null,i,d,l),i=i.child),i;case 16:u=i.elementType;e:{switch(wl(r,i),r=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=dS(u),r=zt(u,r),d){case 0:i=pc(null,i,u,r,l);break e;case 1:i=_m(null,i,u,r,l);break e;case 11:i=fm(null,i,u,r,l);break e;case 14:i=hm(null,i,u,zt(u.type,r),l);break e}throw Error(n(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),pc(r,i,u,d,l);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),_m(r,i,u,d,l);case 3:e:{if(ym(i),r===null)throw Error(n(387));u=i.pendingProps,p=i.memoizedState,d=p.element,Dp(r,i),dl(i,u,null,l);var g=i.memoizedState;if(u=g.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=pi(Error(n(423)),i),i=vm(r,i,u,l,d);break e}else if(u!==d){d=pi(Error(n(424)),i),i=vm(r,i,u,l,d);break e}else for(Ct=Un(i.stateNode.containerInfo.firstChild),St=i,Ne=!0,jt=null,l=Ap(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ui(),u===d){i=_n(r,i,l);break e}ot(r,i,u,l)}i=i.child}return i;case 5:return Mp(i),r===null&&Vu(i),u=i.type,d=i.pendingProps,p=r!==null?r.memoizedProps:null,g=d.children,bu(u,d)?g=null:p!==null&&bu(u,p)&&(i.flags|=32),gm(r,i),ot(r,i,g,l),i.child;case 6:return r===null&&Vu(i),null;case 13:return wm(r,i,l);case 4:return Xu(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=ci(i,null,u,l):ot(r,i,u,l),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),fm(r,i,u,d,l);case 7:return ot(r,i,i.pendingProps,l),i.child;case 8:return ot(r,i,i.pendingProps.children,l),i.child;case 12:return ot(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,g=d.value,Ce(al,u._currentValue),u._currentValue=g,p!==null)if(Ut(p.value,g)){if(p.children===d.children&&!ft.current){i=_n(r,i,l);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var w=p.dependencies;if(w!==null){g=p.child;for(var E=w.firstContext;E!==null;){if(E.context===u){if(p.tag===1){E=gn(-1,l&-l),E.tag=2;var P=p.updateQueue;if(P!==null){P=P.shared;var F=P.pending;F===null?E.next=E:(E.next=F.next,F.next=E),P.pending=E}}p.lanes|=l,E=p.alternate,E!==null&&(E.lanes|=l),Qu(p.return,l,i),w.lanes|=l;break}E=E.next}}else if(p.tag===10)g=p.type===i.type?null:p.child;else if(p.tag===18){if(g=p.return,g===null)throw Error(n(341));g.lanes|=l,w=g.alternate,w!==null&&(w.lanes|=l),Qu(g,l,i),g=p.sibling}else g=p.child;if(g!==null)g.return=p;else for(g=p;g!==null;){if(g===i){g=null;break}if(p=g.sibling,p!==null){p.return=g.return,g=p;break}g=g.return}p=g}ot(r,i,d.children,l),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,fi(i,l),d=xt(d),u=u(d),i.flags|=1,ot(r,i,u,l),i.child;case 14:return u=i.type,d=zt(u,i.pendingProps),d=zt(u.type,d),hm(r,i,u,d,l);case 15:return pm(r,i,i.type,i.pendingProps,l);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),wl(r,i),i.tag=1,ht(u)?(r=!0,nl(i)):r=!1,fi(i,l),sm(i,u,d),dc(i,u,d,l),mc(null,i,u,!0,r,l);case 19:return Sm(r,i,l);case 22:return mm(r,i,l)}throw Error(n(156,i.tag))};function Gm(r,i){return Th(r,i)}function cS(r,i,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(r,i,l,u){return new cS(r,i,l,u)}function bc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function dS(r){if(typeof r=="function")return bc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Yt)return 11;if(r===Jt)return 14}return 2}function Qn(r,i){var l=r.alternate;return l===null?(l=Dt(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Al(r,i,l,u,d,p){var g=2;if(u=r,typeof r=="function")bc(r)&&(g=1);else if(typeof r=="string")g=5;else e:switch(r){case se:return Ar(l.children,d,p,i);case ee:g=8,d|=8;break;case fe:return r=Dt(12,l,i,d|2),r.elementType=fe,r.lanes=p,r;case vt:return r=Dt(13,l,i,d),r.elementType=vt,r.lanes=p,r;case Mt:return r=Dt(19,l,i,d),r.elementType=Mt,r.lanes=p,r;case Le:return Ol(l,d,p,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case De:g=10;break e;case Rt:g=9;break e;case Yt:g=11;break e;case Jt:g=14;break e;case dt:g=16,u=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=Dt(g,l,i,d),i.elementType=r,i.type=u,i.lanes=p,i}function Ar(r,i,l,u){return r=Dt(7,r,u,i),r.lanes=l,r}function Ol(r,i,l,u){return r=Dt(22,r,u,i),r.elementType=Le,r.lanes=l,r.stateNode={isHidden:!1},r}function Mc(r,i,l){return r=Dt(6,r,null,i),r.lanes=l,r}function Fc(r,i,l){return i=Dt(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function fS(r,i,l,u,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Uc(r,i,l,u,d,p,g,w,E){return r=new fS(r,i,l,w,E),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Dt(3,null,null,i),r.current=p,p.stateNode=r,p.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ju(p),r}function hS(r,i,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:u==null?null:""+u,children:r,containerInfo:i,implementation:l}}function Km(r){if(!r)return zn;r=r._reactInternals;e:{if(vr(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(ht(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(ht(l))return Ep(r,l,i)}return i}function qm(r,i,l,u,d,p,g,w,E){return r=Uc(l,u,!0,r,d,p,g,w,E),r.context=Km(null),l=r.current,u=lt(),d=Kn(l),p=gn(u,d),p.callback=i??null,$n(l,p,d),r.current.lanes=d,Ji(r,d,u),gt(r,u),r}function Dl(r,i,l,u){var d=i.current,p=lt(),g=Kn(d);return l=Km(l),i.context===null?i.context=l:i.pendingContext=l,i=gn(p,g),i.payload={element:r},u=u===void 0?null:u,u!==null&&(i.callback=u),r=$n(d,i,g),r!==null&&($t(r,d,g,p),cl(r,d,g)),g}function Ll(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Qm(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function jc(r,i){Qm(r,i),(r=r.alternate)&&Qm(r,i)}var Ym=typeof reportError=="function"?reportError:function(r){console.error(r)};function zc(r){this._internalRoot=r}bl.prototype.render=zc.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));Dl(r,i,null,null)},bl.prototype.unmount=zc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Pr(function(){Dl(null,r,null,null)}),i[dn]=null}};function bl(r){this._internalRoot=r}bl.prototype.unstable_scheduleHydration=function(r){if(r){var i=Dh();r={blockedOn:null,target:r,priority:i};for(var l=0;l<bn.length&&i!==0&&i<bn[l].priority;l++);bn.splice(l,0,r),l===0&&Mh(r)}};function Wc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ml(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function pS(r,i,l,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var P=Ll(g);p.call(P)}}var g=qm(i,u,r,0,null,!1,!1,"",Jm);return r._reactRootContainer=g,r[dn]=g.current,ds(r.nodeType===8?r.parentNode:r),Pr(),g}for(;d=r.lastChild;)r.removeChild(d);if(typeof u=="function"){var w=u;u=function(){var P=Ll(E);w.call(P)}}var E=Uc(r,0,!1,null,null,!1,!1,"",Jm);return r._reactRootContainer=E,r[dn]=E.current,ds(r.nodeType===8?r.parentNode:r),Pr(function(){Dl(i,E,l,u)}),E}function Fl(r,i,l,u,d){var p=l._reactRootContainer;if(p){var g=p;if(typeof d=="function"){var w=d;d=function(){var E=Ll(g);w.call(E)}}Dl(i,g,r,d)}else g=pS(l,i,r,d,u);return Ll(g)}Ah=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Yi(i.pendingLanes);l!==0&&(du(i,l|1),gt(i,Ue()),!(he&6)&&(_i=Ue()+500,Wn()))}break;case 13:Pr(function(){var u=mn(r,1);if(u!==null){var d=lt();$t(u,r,1,d)}}),jc(r,1)}},fu=function(r){if(r.tag===13){var i=mn(r,134217728);if(i!==null){var l=lt();$t(i,r,134217728,l)}jc(r,134217728)}},Oh=function(r){if(r.tag===13){var i=Kn(r),l=mn(r,i);if(l!==null){var u=lt();$t(l,r,i,u)}jc(r,i)}},Dh=function(){return ve},Lh=function(r,i){var l=ve;try{return ve=r,i()}finally{ve=l}},iu=function(r,i,l){switch(i){case"input":if(Ya(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==r&&u.form===r.form){var d=el(u);if(!d)throw Error(n(90));ih(u),Ya(u,d)}}}break;case"textarea":uh(r,l);break;case"select":i=l.value,i!=null&&qr(r,!!l.multiple,i,!1)}},yh=Oc,vh=Pr;var mS={usingClientEntryPoint:!1,Events:[ps,ii,el,gh,_h,Oc]},Ps={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gS={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ch(r),r===null?null:r.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{bo=Ul.inject(gS),Xt=Ul}catch{}}return _t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS,_t.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wc(i))throw Error(n(200));return hS(r,i,null,l)},_t.createRoot=function(r,i){if(!Wc(r))throw Error(n(299));var l=!1,u="",d=Ym;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Uc(r,1,!1,null,null,l,!1,u,d),r[dn]=i.current,ds(r.nodeType===8?r.parentNode:r),new zc(i)},_t.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Ch(i),r=r===null?null:r.stateNode,r},_t.flushSync=function(r){return Pr(r)},_t.hydrate=function(r,i,l){if(!Ml(i))throw Error(n(200));return Fl(null,r,i,!0,l)},_t.hydrateRoot=function(r,i,l){if(!Wc(r))throw Error(n(405));var u=l!=null&&l.hydratedSources||null,d=!1,p="",g=Ym;if(l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(g=l.onRecoverableError)),i=qm(i,null,r,1,l??null,d,!1,p,g),r[dn]=i.current,ds(r),u)for(r=0;r<u.length;r++)l=u[r],d=l._getVersion,d=d(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,d]:i.mutableSourceEagerHydrationData.push(l,d);return new bl(i)},_t.render=function(r,i,l){if(!Ml(i))throw Error(n(200));return Fl(null,r,i,!1,l)},_t.unmountComponentAtNode=function(r){if(!Ml(r))throw Error(n(40));return r._reactRootContainer?(Pr(function(){Fl(null,null,r,!1,function(){r._reactRootContainer=null,r[dn]=null})}),!0):!1},_t.unstable_batchedUpdates=Oc,_t.unstable_renderSubtreeIntoContainer=function(r,i,l,u){if(!Ml(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Fl(r,i,l,!1,u)},_t.version="18.3.1-next-f1338f8080-20240426",_t}var sg;function kS(){if(sg)return Vc.exports;sg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vc.exports=TS(),Vc.exports}var og;function RS(){if(og)return jl;og=1;var t=kS();return jl.createRoot=t.createRoot,jl.hydrateRoot=t.hydrateRoot,jl}var PS=RS(),xs={},lg;function NS(){if(lg)return xs;lg=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.parse=c,xs.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,C){const I=new a,O=v.length;if(O<2)return I;const x=(C==null?void 0:C.decode)||_;let D=0;do{const W=v.indexOf("=",D);if(W===-1)break;const b=v.indexOf(";",D),B=b===-1?O:b;if(W>B){D=v.lastIndexOf(";",W-1)+1;continue}const Y=f(v,D,W),J=h(v,W,Y),se=v.slice(Y,J);if(I[se]===void 0){let ee=f(v,W+1,B),fe=h(v,B,ee);const De=x(v.slice(ee,fe));I[se]=De}D=B+1}while(D<O);return I}function f(v,C,I){do{const O=v.charCodeAt(C);if(O!==32&&O!==9)return C}while(++C<I);return I}function h(v,C,I){for(;C>I;){const O=v.charCodeAt(--C);if(O!==32&&O!==9)return C+1}return I}function m(v,C,I){const O=(I==null?void 0:I.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const x=O(C);if(!e.test(x))throw new TypeError(`argument val is invalid: ${C}`);let D=v+"="+x;if(!I)return D;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);D+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);D+="; Domain="+I.domain}if(I.path){if(!s.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);D+="; Path="+I.path}if(I.expires){if(!y(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);D+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(D+="; HttpOnly"),I.secure&&(D+="; Secure"),I.partitioned&&(D+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return D}function _(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return o.call(v)==="[object Date]"}return xs}NS();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ag="popstate";function xS(t={}){function e(s,o){let{pathname:a,search:c,hash:f}=s.location;return _d("",{pathname:a,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Qs(o)}return OS(e,n,null,t)}function xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AS(){return Math.random().toString(36).substring(2,10)}function ug(t,e){return{usr:t.state,key:t.key,idx:e}}function _d(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Li(e):e,state:n,key:e&&e.key||s||AS()}}function Qs({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function OS(t,e,n,s={}){let{window:o=document.defaultView,v5Compat:a=!1}=s,c=o.history,f="POP",h=null,m=_();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function _(){return(c.state||{idx:null}).idx}function y(){f="POP";let x=_(),D=x==null?null:x-m;m=x,h&&h({action:f,location:O.location,delta:D})}function v(x,D){f="PUSH";let W=_d(O.location,x,D);m=_()+1;let b=ug(W,m),B=O.createHref(W);try{c.pushState(b,"",B)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;o.location.assign(B)}a&&h&&h({action:f,location:O.location,delta:1})}function C(x,D){f="REPLACE";let W=_d(O.location,x,D);m=_();let b=ug(W,m),B=O.createHref(W);c.replaceState(b,"",B),a&&h&&h({action:f,location:O.location,delta:0})}function I(x){let D=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof x=="string"?x:Qs(x);return W=W.replace(/ $/,"%20"),xe(D,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,D)}let O={get action(){return f},get location(){return t(o,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(ag,y),h=x,()=>{o.removeEventListener(ag,y),h=null}},createHref(x){return e(o,x)},createURL:I,encodeLocation(x){let D=I(x);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:v,replace:C,go(x){return c.go(x)}};return O}function j_(t,e,n="/"){return DS(t,e,n,!1)}function DS(t,e,n,s){let o=typeof e=="string"?Li(e):e,a=cr(o.pathname||"/",n);if(a==null)return null;let c=z_(t);LS(c);let f=null;for(let h=0;f==null&&h<c.length;++h){let m=HS(a);f=$S(c[h],m,s)}return f}function z_(t,e=[],n=[],s=""){let o=(a,c,f)=>{let h={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(xe(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let m=Cn([s,h.relativePath]),_=n.concat(h);a.children&&a.children.length>0&&(xe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),z_(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:WS(m,a.index),routesMeta:_})};return t.forEach((a,c)=>{var f;if(a.path===""||!((f=a.path)!=null&&f.includes("?")))o(a,c);else for(let h of W_(a.path))o(a,c,h)}),e}function W_(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let c=W_(s.join("/")),f=[];return f.push(...c.map(h=>h===""?a:[a,h].join("/"))),o&&f.push(...c),f.map(h=>t.startsWith("/")&&h===""?"/":h)}function LS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var bS=/^:[\w-]+$/,MS=3,FS=2,US=1,jS=10,zS=-2,cg=t=>t==="*";function WS(t,e){let n=t.split("/"),s=n.length;return n.some(cg)&&(s+=zS),e&&(s+=FS),n.filter(o=>!cg(o)).reduce((o,a)=>o+(bS.test(a)?MS:a===""?US:jS),s)}function BS(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function $S(t,e,n=!1){let{routesMeta:s}=t,o={},a="/",c=[];for(let f=0;f<s.length;++f){let h=s[f],m=f===s.length-1,_=a==="/"?e:e.slice(a.length)||"/",y=Zl({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},_),v=h.route;if(!y&&m&&n&&!s[s.length-1].route.index&&(y=Zl({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},_)),!y)return null;Object.assign(o,y.params),c.push({params:o,pathname:Cn([a,y.pathname]),pathnameBase:QS(Cn([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Cn([a,y.pathnameBase]))}return c}function Zl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=VS(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((m,{paramName:_,isOptional:y},v)=>{if(_==="*"){let I=f[v]||"";c=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const C=f[v];return y&&!C?m[_]=void 0:m[_]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:t}}function VS(t,e=!1,n=!0){Kt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,h)=>(s.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function HS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function cr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function GS(t,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?Li(t):t;return{pathname:n?n.startsWith("/")?n:KS(n,e):e,search:YS(s),hash:JS(o)}}function KS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Kc(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qd(t){let e=qS(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Yd(t,e,n,s=!1){let o;typeof t=="string"?o=Li(t):(o={...t},xe(!o.pathname||!o.pathname.includes("?"),Kc("?","pathname","search",o)),xe(!o.pathname||!o.pathname.includes("#"),Kc("#","pathname","hash",o)),xe(!o.search||!o.search.includes("#"),Kc("#","search","hash",o)));let a=t===""||o.pathname==="",c=a?"/":o.pathname,f;if(c==null)f=n;else{let y=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;o.pathname=v.join("/")}f=y>=0?e[y]:"/"}let h=GS(o,f),m=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(m||_)&&(h.pathname+="/"),h}var Cn=t=>t.join("/").replace(/\/\/+/g,"/"),QS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var B_=["POST","PUT","PATCH","DELETE"];new Set(B_);var ZS=["GET",...B_];new Set(ZS);var bi=N.createContext(null);bi.displayName="DataRouter";var Ra=N.createContext(null);Ra.displayName="DataRouterState";var $_=N.createContext({isTransitioning:!1});$_.displayName="ViewTransition";var eC=N.createContext(new Map);eC.displayName="Fetchers";var tC=N.createContext(null);tC.displayName="Await";var Qt=N.createContext(null);Qt.displayName="Navigation";var po=N.createContext(null);po.displayName="Location";var un=N.createContext({outlet:null,matches:[],isDataRoute:!1});un.displayName="Route";var Jd=N.createContext(null);Jd.displayName="RouteError";function nC(t,{relative:e}={}){xe(Mi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=N.useContext(Qt),{hash:o,pathname:a,search:c}=go(t,{relative:e}),f=a;return n!=="/"&&(f=a==="/"?n:Cn([n,a])),s.createHref({pathname:f,search:c,hash:o})}function Mi(){return N.useContext(po)!=null}function mr(){return xe(Mi(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(po).location}var V_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function H_(t){N.useContext(Qt).static||N.useLayoutEffect(t)}function mo(){let{isDataRoute:t}=N.useContext(un);return t?mC():rC()}function rC(){xe(Mi(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(bi),{basename:e,navigator:n}=N.useContext(Qt),{matches:s}=N.useContext(un),{pathname:o}=mr(),a=JSON.stringify(Qd(s)),c=N.useRef(!1);return H_(()=>{c.current=!0}),N.useCallback((h,m={})=>{if(Kt(c.current,V_),!c.current)return;if(typeof h=="number"){n.go(h);return}let _=Yd(h,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Cn([e,_.pathname])),(m.replace?n.replace:n.push)(_,m.state,m)},[e,n,a,o,t])}N.createContext(null);function go(t,{relative:e}={}){let{matches:n}=N.useContext(un),{pathname:s}=mr(),o=JSON.stringify(Qd(n));return N.useMemo(()=>Yd(t,JSON.parse(o),s,e==="path"),[t,o,s,e])}function iC(t,e){return G_(t,e)}function G_(t,e,n,s){var W;xe(Mi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=N.useContext(Qt),{matches:c}=N.useContext(un),f=c[c.length-1],h=f?f.params:{},m=f?f.pathname:"/",_=f?f.pathnameBase:"/",y=f&&f.route;{let b=y&&y.path||"";K_(m,!y||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let v=mr(),C;if(e){let b=typeof e=="string"?Li(e):e;xe(_==="/"||((W=b.pathname)==null?void 0:W.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${b.pathname}" was given in the \`location\` prop.`),C=b}else C=v;let I=C.pathname||"/",O=I;if(_!=="/"){let b=_.replace(/^\//,"").split("/");O="/"+I.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=!a&&n&&n.matches&&n.matches.length>0?n.matches:j_(t,{pathname:O});Kt(y||x!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Kt(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=uC(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},h,b.params),pathname:Cn([_,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?_:Cn([_,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),c,n,s);return e&&D?N.createElement(po.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},D):D}function sC(){let t=pC(),e=XS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:o},n):null,c)}var oC=N.createElement(sC,null),lC=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(un.Provider,{value:this.props.routeContext},N.createElement(Jd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aC({routeContext:t,match:e,children:n}){let s=N.useContext(bi);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(un.Provider,{value:t},n)}function uC(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=n==null?void 0:n.errors;if(a!=null){let h=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);xe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,f=-1;if(n)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=h),m.route.id){let{loaderData:_,errors:y}=n,v=m.route.loader&&!_.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||v){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,m,_)=>{let y,v=!1,C=null,I=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,C=m.route.errorElement||oC,c&&(f<0&&_===0?(K_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,I=null):f===_&&(v=!0,I=m.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,_+1)),x=()=>{let D;return y?D=C:v?D=I:m.route.Component?D=N.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=h,N.createElement(aC,{match:m,routeContext:{outlet:h,matches:O,isDataRoute:n!=null},children:D})};return n&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?N.createElement(lC,{location:n.location,revalidation:n.revalidation,component:C,error:y,children:x(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):x()},null)}function Xd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cC(t){let e=N.useContext(bi);return xe(e,Xd(t)),e}function dC(t){let e=N.useContext(Ra);return xe(e,Xd(t)),e}function fC(t){let e=N.useContext(un);return xe(e,Xd(t)),e}function Zd(t){let e=fC(t),n=e.matches[e.matches.length-1];return xe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function hC(){return Zd("useRouteId")}function pC(){var s;let t=N.useContext(Jd),e=dC("useRouteError"),n=Zd("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function mC(){let{router:t}=cC("useNavigate"),e=Zd("useNavigate"),n=N.useRef(!1);return H_(()=>{n.current=!0}),N.useCallback(async(o,a={})=>{Kt(n.current,V_),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var dg={};function K_(t,e,n){!e&&!dg[t]&&(dg[t]=!0,Kt(!1,n))}N.memo(gC);function gC({routes:t,future:e,state:n}){return G_(t,void 0,n,e)}function q_({to:t,replace:e,state:n,relative:s}){xe(Mi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(Qt);Kt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(un),{pathname:c}=mr(),f=mo(),h=Yd(t,Qd(a),c,s==="path"),m=JSON.stringify(h);return N.useEffect(()=>{f(JSON.parse(m),{replace:e,state:n,relative:s})},[f,m,s,e,n]),null}function Xn(t){xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _C({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:a=!1}){xe(!Mi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:c,navigator:o,static:a,future:{}}),[c,o,a]);typeof n=="string"&&(n=Li(n));let{pathname:h="/",search:m="",hash:_="",state:y=null,key:v="default"}=n,C=N.useMemo(()=>{let I=cr(h,c);return I==null?null:{location:{pathname:I,search:m,hash:_,state:y,key:v},navigationType:s}},[c,h,m,_,y,v,s]);return Kt(C!=null,`<Router basename="${c}"> is not able to match the URL "${h}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:N.createElement(Qt.Provider,{value:f},N.createElement(po.Provider,{children:e,value:C}))}function yC({children:t,location:e}){return iC(yd(t),e)}function yd(t,e=[]){let n=[];return N.Children.forEach(t,(s,o)=>{if(!N.isValidElement(s))return;let a=[...e,o];if(s.type===N.Fragment){n.push.apply(n,yd(s.props.children,a));return}xe(s.type===Xn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=yd(s.props.children,a)),n.push(c)}),n}var Hl="get",Gl="application/x-www-form-urlencoded";function Pa(t){return t!=null&&typeof t.tagName=="string"}function vC(t){return Pa(t)&&t.tagName.toLowerCase()==="button"}function wC(t){return Pa(t)&&t.tagName.toLowerCase()==="form"}function EC(t){return Pa(t)&&t.tagName.toLowerCase()==="input"}function SC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CC(t,e){return t.button===0&&(!e||e==="_self")&&!SC(t)}var zl=null;function IC(){if(zl===null)try{new FormData(document.createElement("form"),0),zl=!1}catch{zl=!0}return zl}var TC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qc(t){return t!=null&&!TC.has(t)?(Kt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gl}"`),null):t}function kC(t,e){let n,s,o,a,c;if(wC(t)){let f=t.getAttribute("action");s=f?cr(f,e):null,n=t.getAttribute("method")||Hl,o=qc(t.getAttribute("enctype"))||Gl,a=new FormData(t)}else if(vC(t)||EC(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||f.getAttribute("action");if(s=h?cr(h,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||Hl,o=qc(t.getAttribute("formenctype"))||qc(f.getAttribute("enctype"))||Gl,a=new FormData(f,t),!IC()){let{name:m,type:_,value:y}=t;if(_==="image"){let v=m?`${m}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else m&&a.append(m,y)}}else{if(Pa(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hl,s=null,o=Gl,c=t}return a&&o==="text/plain"&&(c=a,a=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:a,body:c}}function ef(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function RC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NC(t,e,n){let s=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let c=await RC(a,n);return c.links?c.links():[]}return[]}));return DC(s.flat(1).filter(PC).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function fg(t,e,n,s,o,a){let c=(h,m)=>n[m]?h.route.id!==n[m].route.id:!0,f=(h,m)=>{var _;return n[m].pathname!==h.pathname||((_=n[m].route.path)==null?void 0:_.endsWith("*"))&&n[m].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,m)=>c(h,m)||f(h,m)):a==="data"?e.filter((h,m)=>{var y;let _=s.routes[h.route.id];if(!_||!_.hasLoader)return!1;if(c(h,m)||f(h,m))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function xC(t,e){return AC(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function AC(t){return[...new Set(t)]}function OC(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function DC(t,e){let n=new Set;return new Set(e),t.reduce((s,o)=>{let a=JSON.stringify(OC(o));return n.has(a)||(n.add(a),s.push({key:a,link:o})),s},[])}function LC(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function bC(){let t=N.useContext(bi);return ef(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function MC(){let t=N.useContext(Ra);return ef(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tf=N.createContext(void 0);tf.displayName="FrameworkContext";function Q_(){let t=N.useContext(tf);return ef(t,"You must render this element inside a <HydratedRouter> element"),t}function FC(t,e){let n=N.useContext(tf),[s,o]=N.useState(!1),[a,c]=N.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:m,onMouseLeave:_,onTouchStart:y}=e,v=N.useRef(null);N.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let O=D=>{D.forEach(W=>{c(W.isIntersecting)})},x=new IntersectionObserver(O,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[t]),N.useEffect(()=>{if(s){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[s]);let C=()=>{o(!0)},I=()=>{o(!1),c(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:As(f,C),onBlur:As(h,I),onMouseEnter:As(m,C),onMouseLeave:As(_,I),onTouchStart:As(y,C)}]:[!1,v,{}]}function As(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function UC({page:t,...e}){let{router:n}=bC(),s=N.useMemo(()=>j_(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?N.createElement(zC,{page:t,matches:s,...e}):null}function jC(t){let{manifest:e,routeModules:n}=Q_(),[s,o]=N.useState([]);return N.useEffect(()=>{let a=!1;return NC(t,e,n).then(c=>{a||o(c)}),()=>{a=!0}},[t,e,n]),s}function zC({page:t,matches:e,...n}){let s=mr(),{manifest:o,routeModules:a}=Q_(),{loaderData:c,matches:f}=MC(),h=N.useMemo(()=>fg(t,e,f,o,s,"data"),[t,e,f,o,s]),m=N.useMemo(()=>fg(t,e,f,o,s,"assets"),[t,e,f,o,s]),_=N.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let C=new Set,I=!1;if(e.forEach(x=>{var W;let D=o.routes[x.route.id];!D||!D.hasLoader||(!h.some(b=>b.route.id===x.route.id)&&x.route.id in c&&((W=a[x.route.id])!=null&&W.shouldRevalidate)||D.hasClientLoader?I=!0:C.add(x.route.id))}),C.size===0)return[];let O=LC(t);return I&&C.size>0&&O.searchParams.set("_routes",e.filter(x=>C.has(x.route.id)).map(x=>x.route.id).join(",")),[O.pathname+O.search]},[c,s,o,h,e,t,a]),y=N.useMemo(()=>xC(m,o),[m,o]),v=jC(m);return N.createElement(N.Fragment,null,_.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),y.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),v.map(({key:C,link:I})=>N.createElement("link",{key:C,...I})))}function WC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Y_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Y_&&(window.__reactRouterVersion="7.1.5")}catch{}function BC({basename:t,children:e,window:n}){let s=N.useRef();s.current==null&&(s.current=xS({window:n,v5Compat:!0}));let o=s.current,[a,c]=N.useState({action:o.action,location:o.location}),f=N.useCallback(h=>{N.startTransition(()=>c(h))},[c]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.createElement(_C,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var J_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=N.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:a,replace:c,state:f,target:h,to:m,preventScrollReset:_,viewTransition:y,...v},C){let{basename:I}=N.useContext(Qt),O=typeof m=="string"&&J_.test(m),x,D=!1;if(typeof m=="string"&&O&&(x=m,Y_))try{let fe=new URL(window.location.href),De=m.startsWith("//")?new URL(fe.protocol+m):new URL(m),Rt=cr(De.pathname,I);De.origin===fe.origin&&Rt!=null?m=Rt+De.search+De.hash:D=!0}catch{Kt(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=nC(m,{relative:o}),[b,B,Y]=FC(s,v),J=GC(m,{replace:c,state:f,target:h,preventScrollReset:_,relative:o,viewTransition:y});function se(fe){e&&e(fe),fe.defaultPrevented||J(fe)}let ee=N.createElement("a",{...v,...Y,href:x||W,onClick:D||a?e:se,ref:WC(C,B),target:h,"data-discover":!O&&n==="render"?"true":void 0});return b&&!O?N.createElement(N.Fragment,null,ee,N.createElement(UC,{page:W})):ee});Zn.displayName="Link";var $C=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:a,to:c,viewTransition:f,children:h,...m},_){let y=go(c,{relative:m.relative}),v=mr(),C=N.useContext(Ra),{navigator:I,basename:O}=N.useContext(Qt),x=C!=null&&JC(y)&&f===!0,D=I.encodeLocation?I.encodeLocation(y).pathname:y.pathname,W=v.pathname,b=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(W=W.toLowerCase(),b=b?b.toLowerCase():null,D=D.toLowerCase()),b&&O&&(b=cr(b,O)||b);const B=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Y=W===D||!o&&W.startsWith(D)&&W.charAt(B)==="/",J=b!=null&&(b===D||!o&&b.startsWith(D)&&b.charAt(D.length)==="/"),se={isActive:Y,isPending:J,isTransitioning:x},ee=Y?e:void 0,fe;typeof s=="function"?fe=s(se):fe=[s,Y?"active":null,J?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let De=typeof a=="function"?a(se):a;return N.createElement(Zn,{...m,"aria-current":ee,className:fe,ref:_,style:De,to:c,viewTransition:f},typeof h=="function"?h(se):h)});$C.displayName="NavLink";var VC=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:a,method:c=Hl,action:f,onSubmit:h,relative:m,preventScrollReset:_,viewTransition:y,...v},C)=>{let I=QC(),O=YC(f,{relative:m}),x=c.toLowerCase()==="get"?"get":"post",D=typeof f=="string"&&J_.test(f),W=b=>{if(h&&h(b),b.defaultPrevented)return;b.preventDefault();let B=b.nativeEvent.submitter,Y=(B==null?void 0:B.getAttribute("formmethod"))||c;I(B||b.currentTarget,{fetcherKey:e,method:Y,navigate:n,replace:o,state:a,relative:m,preventScrollReset:_,viewTransition:y})};return N.createElement("form",{ref:C,method:x,action:O,onSubmit:s?h:W,...v,"data-discover":!D&&t==="render"?"true":void 0})});VC.displayName="Form";function HC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X_(t){let e=N.useContext(bi);return xe(e,HC(t)),e}function GC(t,{target:e,replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:c}={}){let f=mo(),h=mr(),m=go(t,{relative:a});return N.useCallback(_=>{if(CC(_,e)){_.preventDefault();let y=n!==void 0?n:Qs(h)===Qs(m);f(t,{replace:y,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[h,f,m,n,s,e,t,o,a,c])}var KC=0,qC=()=>`__${String(++KC)}__`;function QC(){let{router:t}=X_("useSubmit"),{basename:e}=N.useContext(Qt),n=hC();return N.useCallback(async(s,o={})=>{let{action:a,method:c,encType:f,formData:h,body:m}=kC(s,e);if(o.navigate===!1){let _=o.fetcherKey||qC();await t.fetch(_,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||f,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function YC(t,{relative:e}={}){let{basename:n}=N.useContext(Qt),s=N.useContext(un);xe(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),a={...go(t||".",{relative:e})},c=mr();if(t==null){a.search=c.search;let f=new URLSearchParams(a.search),h=f.getAll("index");if(h.some(_=>_==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let _=f.toString();a.search=_?`?${_}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Cn([n,a.pathname])),Qs(a)}function JC(t,e={}){let n=N.useContext($_);xe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=X_("useViewTransitionState"),o=go(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=cr(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=cr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Zl(o.pathname,c)!=null||Zl(o.pathname,a)!=null}new TextEncoder;var rn=(t=>(t.ADMIN="ADMIN",t.USER="USER",t))(rn||{}),hg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw Fi(e)},Fi=function(t){return new Error("Firebase Database ("+Z_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},XC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const o=t[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],c=t[n++],f=t[n++],h=((o&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(h>>10)),e[s++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},nf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const a=t[o],c=o+1<t.length,f=c?t[o+1]:0,h=o+2<t.length,m=h?t[o+2]:0,_=a>>2,y=(a&3)<<4|f>>4;let v=(f&15)<<2|m>>6,C=m&63;h||(C=64,c||(v=64)),s.push(n[_],n[y],n[v],n[C])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ey(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const y=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||m==null||y==null)throw new ZC;const v=a<<2|f>>4;if(s.push(v),m!==64){const C=f<<4&240|m>>2;if(s.push(C),y!==64){const I=m<<6&192|y;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ty=function(t){const e=ey(t);return nf.encodeByteArray(e,!0)},ea=function(t){return ty(t).replace(/\./g,"")},ta=function(t){try{return nf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){return ny(void 0,t)}function ny(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!tI(n)||(t[n]=ny(t[n],e[n]));return t}function tI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=()=>nI().__FIREBASE_DEFAULTS__,iI=()=>{if(typeof process>"u"||typeof hg>"u")return;const t=hg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ta(t[1]);return e&&JSON.parse(e)},rf=()=>{try{return rI()||iI()||sI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ry=t=>{var e,n;return(n=(e=rf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oI=t=>{const e=ry(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},iy=()=>{var t;return(t=rf())===null||t===void 0?void 0:t.config},sy=t=>{var e;return(e=rf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ea(JSON.stringify(n)),ea(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function aI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cI(){const t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dI(){return Z_.NODE_ADMIN===!0}function fI(){try{return typeof indexedDB=="object"}catch{return!1}}function hI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="FirebaseError";class gr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=pI,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?mI(a,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new gr(o,f,s)}}function mI(t,e){return t.replace(gI,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const gI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t){return JSON.parse(t)}function Ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=function(t){let e={},n={},s={},o="";try{const a=t.split(".");e=Ys(ta(a[0])||""),n=Ys(ta(a[1])||""),o=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},_I=function(t){const e=ly(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},yI=function(t){const e=ly(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ki(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function na(t,e,n){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=e.call(n,t[o],o,t));return s}function ra(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const a=t[o],c=e[o];if(pg(a)&&pg(c)){if(!ra(a,c))return!1}else if(a!==c)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function pg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Us(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,a]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function js(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)s[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)s[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const v=s[y-3]^s[y-8]^s[y-14]^s[y-16];s[y]=(v<<1|v>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4],m,_;for(let y=0;y<80;y++){y<40?y<20?(m=f^a&(c^f),_=1518500249):(m=a^c^f,_=1859775393):y<60?(m=a&c|f&(a|c),_=2400959708):(m=a^c^f,_=3395469782);const v=(o<<5|o>>>27)+m+h+_+s[y]&4294967295;h=f,f=c,c=(a<<30|a>>>2)&4294967295,a=o,o=v}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<n;){if(c===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(a[c]=e.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<n;)if(a[c]=e[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[o]>>a&255,++s;return e}}function wI(t,e){const n=new EI(t,e);return n.subscribe.bind(n)}class EI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");SI(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Qc),o.error===void 0&&(o.error=Qc),o.complete===void 0&&(o.complete=Qc);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qc(){}function Na(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);if(o>=55296&&o<=56319){const a=o-55296;s++,z(s<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(s)-56320;o=65536+(a<<10)+c}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},xa=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let II=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new _o;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kI(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);s===f&&c.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function TI(t){return t===Dr?void 0:t}function kI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new II(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const PI={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},NI=we.INFO,xI={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},AI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=xI[e];if(o)console[o](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let of=class{constructor(e){this.name=e,this._logLevel=NI,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};const OI=(t,e)=>e.some(n=>t instanceof n);let mg,gg;function DI(){return mg||(mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LI(){return gg||(gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ay=new WeakMap,wd=new WeakMap,uy=new WeakMap,Yc=new WeakMap,lf=new WeakMap;function bI(t){const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(sr(t.result)),o()},c=()=>{s(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&ay.set(n,t)}).catch(()=>{}),lf.set(e,t),e}function MI(t){if(wd.has(t))return;const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),o()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});wd.set(t,e)}let Ed={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FI(t){Ed=t(Ed)}function UI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Jc(this),e,...n);return uy.set(s,e.sort?e.sort():[e]),sr(s)}:LI().includes(t)?function(...e){return t.apply(Jc(this),e),sr(ay.get(this))}:function(...e){return sr(t.apply(Jc(this),e))}}function jI(t){return typeof t=="function"?UI(t):(t instanceof IDBTransaction&&MI(t),OI(t,DI())?new Proxy(t,Ed):t)}function sr(t){if(t instanceof IDBRequest)return bI(t);if(Yc.has(t))return Yc.get(t);const e=jI(t);return e!==t&&(Yc.set(t,e),lf.set(e,t)),e}const Jc=t=>lf.get(t);function zI(t,e,{blocked:n,upgrade:s,blocking:o,terminated:a}={}){const c=indexedDB.open(t,e),f=sr(c);return s&&c.addEventListener("upgradeneeded",h=>{s(sr(c.result),h.oldVersion,h.newVersion,sr(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),f.then(h=>{a&&h.addEventListener("close",()=>a()),o&&h.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const WI=["get","getKey","getAll","getAllKeys","count"],BI=["put","add","delete","clear"],Xc=new Map;function _g(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=BI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||WI.includes(n)))return;const a=async function(c,...f){const h=this.transaction(c,o?"readwrite":"readonly");let m=h.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[n](...f),o&&h.done]))[0]};return Xc.set(e,a),a}FI(t=>({...t,get:(e,n,s)=>_g(e,n)||t.get(e,n,s),has:(e,n)=>!!_g(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VI(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function VI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sd="@firebase/app",yg="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new of("@firebase/app"),HI="@firebase/app-compat",GI="@firebase/analytics-compat",KI="@firebase/analytics",qI="@firebase/app-check-compat",QI="@firebase/app-check",YI="@firebase/auth",JI="@firebase/auth-compat",XI="@firebase/database",ZI="@firebase/data-connect",eT="@firebase/database-compat",tT="@firebase/functions",nT="@firebase/functions-compat",rT="@firebase/installations",iT="@firebase/installations-compat",sT="@firebase/messaging",oT="@firebase/messaging-compat",lT="@firebase/performance",aT="@firebase/performance-compat",uT="@firebase/remote-config",cT="@firebase/remote-config-compat",dT="@firebase/storage",fT="@firebase/storage-compat",hT="@firebase/firestore",pT="@firebase/vertexai",mT="@firebase/firestore-compat",gT="firebase",_T="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]",yT={[Sd]:"fire-core",[HI]:"fire-core-compat",[KI]:"fire-analytics",[GI]:"fire-analytics-compat",[QI]:"fire-app-check",[qI]:"fire-app-check-compat",[YI]:"fire-auth",[JI]:"fire-auth-compat",[XI]:"fire-rtdb",[ZI]:"fire-data-connect",[eT]:"fire-rtdb-compat",[tT]:"fire-fn",[nT]:"fire-fn-compat",[rT]:"fire-iid",[iT]:"fire-iid-compat",[sT]:"fire-fcm",[oT]:"fire-fcm-compat",[lT]:"fire-perf",[aT]:"fire-perf-compat",[uT]:"fire-rc",[cT]:"fire-rc-compat",[dT]:"fire-gcs",[fT]:"fire-gcs-compat",[hT]:"fire-fst",[mT]:"fire-fst-compat",[pT]:"fire-vertex","fire-js":"fire-js",[gT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Map,vT=new Map,Id=new Map;function vg(t,e){try{t.container.addComponent(e)}catch(n){Rn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ri(t){const e=t.name;if(Id.has(e))return Rn.debug(`There were multiple attempts to register component ${e}.`),!1;Id.set(e,t);for(const n of Js.values())vg(n,t);for(const n of vT.values())vg(n,t);return!0}function af(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new yo("app","Firebase",wT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=_T;function cy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Cd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw or.create("bad-app-name",{appName:String(o)});if(n||(n=iy()),!n)throw or.create("no-options");const a=Js.get(o);if(a){if(ra(n,a.options)&&ra(s,a.config))return a;throw or.create("duplicate-app",{appName:o})}const c=new RI(o);for(const h of Id.values())c.addComponent(h);const f=new ET(n,s,c);return Js.set(o,f),f}function dy(t=Cd){const e=Js.get(t);if(!e&&t===Cd&&iy())return cy();if(!e)throw or.create("no-app",{appName:t});return e}function wg(){return Array.from(Js.values())}function lr(t,e,n){var s;let o=(s=yT[t])!==null&&s!==void 0?s:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rn.warn(f.join(" "));return}Ri(new Fr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebase-heartbeat-database",CT=1,Xs="firebase-heartbeat-store";let Zc=null;function fy(){return Zc||(Zc=zI(ST,CT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xs)}catch(n){console.warn(n)}}}}).catch(t=>{throw or.create("idb-open",{originalErrorMessage:t.message})})),Zc}async function IT(t){try{const n=(await fy()).transaction(Xs),s=await n.objectStore(Xs).get(hy(t));return await n.done,s}catch(e){if(e instanceof gr)Rn.warn(e.message);else{const n=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rn.warn(n.message)}}}async function Eg(t,e){try{const s=(await fy()).transaction(Xs,"readwrite");await s.objectStore(Xs).put(e,hy(t)),await s.done}catch(n){if(n instanceof gr)Rn.warn(n.message);else{const s=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rn.warn(s.message)}}}function hy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=1024,kT=30*24*60*60*1e3;class RT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Sg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=kT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Rn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sg(),{heartbeatsToSend:s,unsentEntries:o}=PT(this._heartbeatsCache.heartbeats),a=ea(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Rn.warn(n),""}}}function Sg(){return new Date().toISOString().substring(0,10)}function PT(t,e=TT){const n=[];let s=t.slice();for(const o of t){const a=n.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Cg(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Cg(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class NT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fI()?hI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Cg(t){return ea(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){Ri(new Fr("platform-logger",e=>new $I(e),"PRIVATE")),Ri(new Fr("heartbeat",e=>new RT(e),"PRIVATE")),lr(Sd,yg,t),lr(Sd,yg,"esm2017"),lr("fire-js","")}xT("");function uf(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AT=py,my=new yo("auth","Firebase",py());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new of("@firebase/auth");function OT(t,...e){ia.logLevel<=we.WARN&&ia.warn(`Auth (${ji}): ${t}`,...e)}function Kl(t,...e){ia.logLevel<=we.ERROR&&ia.error(`Auth (${ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,...e){throw cf(t,...e)}function ln(t,...e){return cf(t,...e)}function gy(t,e,n){const s=Object.assign(Object.assign({},AT()),{[e]:n});return new yo("auth","Firebase",s).create(e,{appName:t.name})}function In(t){return gy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return my.create(t,...e)}function re(t,e,...n){if(!t)throw cf(e,...n)}function vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kl(e),new Error(e)}function Pn(t,e){t||vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DT(){return Ig()==="http:"||Ig()==="https:"}function Ig(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DT()||uI()||"connection"in navigator)?navigator.onLine:!0}function bT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pn(n>e,"Short delay should be less than long delay!"),this.isMobile=sf()||oy()}get(){return LT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){Pn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new vo(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yr(t,e,n,s,o={}){return yy(t,o,async()=>{let a={},c={};s&&(e==="GET"?c=s:a={body:JSON.stringify(s)});const f=Ui(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:h},a);return aI()||(m.referrerPolicy="no-referrer"),_y.fetch()(vy(t,t.config.apiHost,n,f),m)})}async function yy(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},MT),e);try{const o=new jT(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Wl(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[h,m]=f.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Wl(t,"user-disabled",c);const _=s[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw gy(t,_,m);qt(t,_)}}catch(o){if(o instanceof gr)throw o;qt(t,"network-request-failed",{message:String(o)})}}async function wo(t,e,n,s,o={}){const a=await yr(t,e,n,s,o);return"mfaPendingCredential"in a&&qt(t,"multi-factor-auth-required",{_serverResponse:a}),a}function vy(t,e,n,s){const o=`${e}${n}?${s}`;return t.config.emulator?df(t.config,o):`${t.config.apiScheme}://${o}`}function UT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ln(this.auth,"network-request-failed")),FT.get())})}}function Wl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ln(t,e,s);return o.customData._tokenResponse=n,o}function Tg(t){return t!==void 0&&t.enterprise!==void 0}class zT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return UT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WT(t,e){return yr(t,"GET","/v2/recaptchaConfig",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(t,e){return yr(t,"POST","/v1/accounts:delete",e)}async function wy(t,e){return yr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $T(t,e=!1){const n=st(t),s=await n.getIdToken(e),o=ff(s);re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:s,authTime:Ws(ed(o.auth_time)),issuedAtTime:Ws(ed(o.iat)),expirationTime:Ws(ed(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ed(t){return Number(t)*1e3}function ff(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Kl("JWT malformed, contained fewer than 3 sections"),null;try{const o=ta(n);return o?JSON.parse(o):(Kl("Failed to decode base64 JWT payload"),null)}catch(o){return Kl("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function kg(t){const e=ff(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gr&&VT(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function VT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ws(this.lastLoginAt),this.creationTime=Ws(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(t){var e;const n=t.auth,s=await t.getIdToken(),o=await Zs(t,wy(n,{idToken:s}));re(o==null?void 0:o.users.length,n,"internal-error");const a=o.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ey(a.providerUserInfo):[],f=KT(t.providerData,c),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(f!=null&&f.length),_=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:f,metadata:new kd(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(t,y)}async function GT(t){const e=st(t);await sa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KT(t,e){return[...t.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Ey(t){return t.map(e=>{var{providerId:n}=e,s=uf(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qT(t,e){const n=await yy(t,{},async()=>{const s=Ui({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,c=vy(t,o,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",_y.fetch()(c,{method:"POST",headers:f,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QT(t,e){return yr(t,"POST","/v2/accounts:revokeToken",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=kg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:a}=await qT(e,n);this.updateTokensAndExpiration(s,o,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:a}=n,c=new Ei;return s&&(re(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(re(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(re(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,a=uf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new kd(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Zs(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $T(this,e)}reload(){return GT(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await sa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(In(this.auth));const e=await this.getIdToken();return await Zs(this,BT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,a,c,f,h,m,_;const y=(s=n.displayName)!==null&&s!==void 0?s:void 0,v=(o=n.email)!==null&&o!==void 0?o:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,I=(c=n.photoURL)!==null&&c!==void 0?c:void 0,O=(f=n.tenantId)!==null&&f!==void 0?f:void 0,x=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,D=(m=n.createdAt)!==null&&m!==void 0?m:void 0,W=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:b,emailVerified:B,isAnonymous:Y,providerData:J,stsTokenManager:se}=n;re(b&&se,e,"internal-error");const ee=Ei.fromJSON(this.name,se);re(typeof b=="string",e,"internal-error"),Jn(y,e.name),Jn(v,e.name),re(typeof B=="boolean",e,"internal-error"),re(typeof Y=="boolean",e,"internal-error"),Jn(C,e.name),Jn(I,e.name),Jn(O,e.name),Jn(x,e.name),Jn(D,e.name),Jn(W,e.name);const fe=new wn({uid:b,auth:e,email:v,emailVerified:B,displayName:y,isAnonymous:Y,photoURL:I,phoneNumber:C,tenantId:O,stsTokenManager:ee,createdAt:D,lastLoginAt:W});return J&&Array.isArray(J)&&(fe.providerData=J.map(De=>Object.assign({},De))),x&&(fe._redirectEventId=x),fe}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ei;o.updateFromServerResponse(n);const a=new wn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sa(a),a}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];re(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Ey(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Ei;f.updateFromIdToken(s);const h=new wn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new kd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new Map;function En(t){Pn(t instanceof Function,"Expected a class definition");let e=Rg.get(t);return e?(Pn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sy.type="NONE";const Pg=Sy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t,e,n){return`firebase:${t}:${e}:${n}`}class Si{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:a}=this.auth;this.fullUserKey=ql(this.userKey,o.apiKey,a),this.fullPersistenceKey=ql("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Si(En(Pg),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||En(Pg);const c=ql(s,e.config.apiKey,e.name);let f=null;for(const m of n)try{const _=await m._get(c);if(_){const y=wn._fromJSON(e,_);m!==a&&(f=y),a=m;break}}catch{}const h=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Si(a,e,s):(a=h[0],f&&await a._set(c,f.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Si(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ky(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Py(e))return"Blackberry";if(Ny(e))return"Webos";if(Iy(e))return"Safari";if((e.includes("chrome/")||Ty(e))&&!e.includes("edge/"))return"Chrome";if(Ry(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Cy(t=ct()){return/firefox\//i.test(t)}function Iy(t=ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ty(t=ct()){return/crios\//i.test(t)}function ky(t=ct()){return/iemobile/i.test(t)}function Ry(t=ct()){return/android/i.test(t)}function Py(t=ct()){return/blackberry/i.test(t)}function Ny(t=ct()){return/webos/i.test(t)}function hf(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YT(t=ct()){var e;return hf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JT(){return cI()&&document.documentMode===10}function xy(t=ct()){return hf(t)||Ry(t)||Ny(t)||Py(t)||/windows phone/i.test(t)||ky(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t,e=[]){let n;switch(t){case"Browser":n=Ng(ct());break;case"Worker":n=`${Ng(ct())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ji}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((c,f)=>{try{const h=e(a);c(h)}catch(h){f(h)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e={}){return yr(t,"GET","/v2/passwordPolicy",_r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=6;class tk{constructor(e){var n,s,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:ek,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,a,c,f;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(s=h.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsLowercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(f=h.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),h}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xg(this),this.idTokenSubscription=new xg(this),this.beforeStateQueue=new XT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=my,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await Si.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wy(this,{idToken:e}),s=await wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o==null?void 0:o._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===f)&&(h!=null&&h.user)&&(o=h.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(In(this));const n=e?st(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(In(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(In(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZT(this),n=new tk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await QT(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&En(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Si.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,s,o);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ay(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hr(t){return st(t)}class xg{constructor(e){this.auth=e,this.observer=null,this.addObserver=wI(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rk(t){Aa=t}function Oy(t){return Aa.loadJS(t)}function ik(){return Aa.recaptchaEnterpriseScript}function sk(){return Aa.gapiScript}function ok(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class lk{constructor(){this.enterprise=new ak}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ak{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const uk="recaptcha-enterprise",Dy="NO_RECAPTCHA";class ck{constructor(e){this.type=uk,this.auth=Hr(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,f)=>{WT(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new zT(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(h=>{f(h)})})}function o(a,c,f){const h=window.grecaptcha;Tg(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(Dy)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lk().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{s(this.auth).then(f=>{if(!n&&Tg(window.grecaptcha))o(f,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=ik();h.length!==0&&(h+=f),Oy(h).then(()=>{o(f,a,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function Ag(t,e,n,s=!1,o=!1){const a=new ck(t);let c;if(o)c=Dy;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const f=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const h=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const h=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Rd(t,e,n,s,o){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ag(t,e,n,n==="getOobCode");return s(t,c)}else return s(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ag(t,e,n,n==="getOobCode");return s(t,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e){const n=af(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(ra(a,e??{}))return o;qt(o,"already-initialized")}return n.initialize({options:e})}function fk(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function hk(t,e,n){const s=Hr(t);re(s._canInitEmulator,s,"emulator-config-failed"),re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,a=Ly(e),{host:c,port:f}=pk(e),h=f===null?"":`:${f}`;s.config.emulator={url:`${a}//${c}${h}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),mk()}function Ly(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pk(t){const e=Ly(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const a=o[1];return{host:a,port:Og(s.substr(a.length+1))}}else{const[a,c]=s.split(":");return{host:a,port:Og(c)}}}function Og(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vn("not implemented")}_getIdTokenResponse(e){return vn("not implemented")}_linkToIdToken(e,n){return vn("not implemented")}_getReauthenticationResolver(e){return vn("not implemented")}}async function gk(t,e){return yr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e){return wo(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){return wo(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}async function vk(t,e){return wo(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends pf{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new eo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new eo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rd(e,n,"signInWithPassword",_k);case"emailLink":return yk(e,{email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rd(e,s,"signUpPassword",gk);case"emailLink":return vk(e,{idToken:n,email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(t,e){return wo(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="http://localhost";class Ur extends pf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,a=uf(n,["providerId","signInMethod"]);if(!s||!o)return null;const c=new Ur(s,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ci(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ci(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ci(e,n)}buildRequest(){const e={requestUri:wk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ui(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sk(t){const e=Us(js(t)).link,n=e?Us(js(e)).deep_link_id:null,s=Us(js(t)).deep_link_id;return(s?Us(js(s)).link:null)||s||n||e||t}class mf{constructor(e){var n,s,o,a,c,f;const h=Us(js(e)),m=(n=h.apiKey)!==null&&n!==void 0?n:null,_=(s=h.oobCode)!==null&&s!==void 0?s:null,y=Ek((o=h.mode)!==null&&o!==void 0?o:null);re(m&&_&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=_,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(f=h.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const n=Sk(e);try{return new mf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(){this.providerId=zi.PROVIDER_ID}static credential(e,n){return eo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=mf.parseLink(n);return re(s,"argument-error"),eo._fromEmailAndCode(e,s.code,s.tenantId)}}zi.PROVIDER_ID="password";zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends by{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Eo{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return tr.credential(n,s)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Eo{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Eo{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return rr.credential(n,s)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e){return wo(t,"POST","/v1/accounts:signUp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const a=await wn._fromIdTokenResponse(e,s,o),c=Dg(s);return new jr({user:a,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Dg(s);return new jr({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Dg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends gr{constructor(e,n,s,o){var a;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,oa.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new oa(e,n,s,o)}}function My(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?oa._fromErrorAndOperation(t,a,e,s):a})}async function Ik(t,e,n=!1){const s=await Zs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jr._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(In(s));const o="reauthenticate";try{const a=await Zs(t,My(s,o,e,t),n);re(a.idToken,s,"internal-error");const c=ff(a.idToken);re(c,s,"internal-error");const{sub:f}=c;return re(t.uid===f,s,"user-mismatch"),jr._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&qt(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(t,e,n=!1){if(sn(t.app))return Promise.reject(In(t));const s="signIn",o=await My(t,s,e),a=await jr._fromIdTokenResponse(t,s,o);return n||await t._updateCurrentUser(a.user),a}async function kk(t,e){return Fy(Hr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uy(t){const e=Hr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Rk(t,e,n){if(sn(t.app))return Promise.reject(In(t));const s=Hr(t),c=await Rd(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ck).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Uy(t),h}),f=await jr._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function Pk(t,e,n){return sn(t.app)?Promise.reject(In(t)):kk(st(t),zi.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Uy(t),s})}function Nk(t,e,n,s){return st(t).onIdTokenChanged(e,n,s)}function xk(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function Ak(t,e,n,s){return st(t).onAuthStateChanged(e,n,s)}function Ok(t){return st(t).signOut()}const la="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(la,"1"),this.storage.removeItem(la),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3,Lk=10;class zy extends jy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,h)=>{this.notifyListeners(c,h)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},a=this.storage.getItem(s);JT()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Lk):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zy.type="LOCAL";const bk=zy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends jy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Wy.type="SESSION";const By=Wy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Oa(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:a}=n.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async m=>m(n.origin,a)),h=await Mk(f);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((f,h)=>{const m=gf("",20);o.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(y){const v=y;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(v.data.response);break;default:clearTimeout(_),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function Uk(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function jk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Wk(){return $y()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="firebaseLocalStorageDb",Bk=1,aa="firebaseLocalStorage",Hy="fbase_key";class So{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Da(t,e){return t.transaction([aa],e?"readwrite":"readonly").objectStore(aa)}function $k(){const t=indexedDB.deleteDatabase(Vy);return new So(t).toPromise()}function Pd(){const t=indexedDB.open(Vy,Bk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(aa,{keyPath:Hy})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(aa)?e(s):(s.close(),await $k(),e(await Pd()))})})}async function Lg(t,e,n){const s=Da(t,!0).put({[Hy]:e,value:n});return new So(s).toPromise()}async function Vk(t,e){const n=Da(t,!1).get(e),s=await new So(n).toPromise();return s===void 0?null:s.value}function bg(t,e){const n=Da(t,!0).delete(e);return new So(n).toPromise()}const Hk=800,Gk=3;class Gy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Gk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $y()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oa._getInstance(Wk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jk(),!this.activeServiceWorker)return;this.sender=new Fk(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pd();return await Lg(e,la,"1"),await bg(e,la),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Lg(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Vk(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Da(o,!1).getAll();return new So(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gy.type="LOCAL";const Kk=Gy;new vo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t,e){return e?En(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends pf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Qk(t){return Fy(t.auth,new _f(t),t.bypassAuthState)}function Yk(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Tk(n,new _f(t),t.bypassAuthState)}async function Jk(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Ik(n,new _f(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n,s,o,a=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qk;case"linkViaPopup":case"linkViaRedirect":return Jk;case"reauthViaPopup":case"reauthViaRedirect":return Yk;default:qt(this.auth,"internal-error")}}resolve(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new vo(2e3,1e4);class vi extends Ky{constructor(e,n,s,o,a){super(e,n,o,a),this.provider=s,this.authWindow=null,this.pollId=null,vi.currentPopupAction&&vi.currentPopupAction.cancel(),vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Pn(this.filter.length===1,"Popup operations only handle one event");const e=gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xk.get())};e()}}vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="pendingRedirect",Ql=new Map;class e0 extends Ky{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ql.get(this.auth._key());if(!e){try{const s=await t0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ql.set(this.auth._key(),e)}return this.bypassAuthState||Ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t0(t,e){const n=i0(e),s=r0(t);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function n0(t,e){Ql.set(t._key(),e)}function r0(t){return En(t._redirectPersistence)}function i0(t){return ql(Zk,t.config.apiKey,t.name)}async function s0(t,e,n=!1){if(sn(t.app))return Promise.reject(In(t));const s=Hr(t),o=qk(s,e),c=await new e0(s,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=10*60*1e3;class l0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a0(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!qy(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o0&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mg(e))}saveEventToCache(e){this.cachedEventUids.add(Mg(e)),this.lastProcessedEventTime=Date.now()}}function Mg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qy({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function a0(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qy(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(t,e={}){return yr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d0=/^https?/;async function f0(t){if(t.config.emulator)return;const{authorizedDomains:e}=await u0(t);for(const n of e)try{if(h0(n))return}catch{}qt(t,"unauthorized-domain")}function h0(t){const e=Td(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!d0.test(n))return!1;if(c0.test(t))return s===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=new vo(3e4,6e4);function Fg(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function m0(t){return new Promise((e,n)=>{var s,o,a;function c(){Fg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fg(),n(ln(t,"network-request-failed"))},timeout:p0.get()})}if(!((o=(s=an().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=an().gapi)===null||a===void 0)&&a.load)c();else{const f=ok("iframefcb");return an()[f]=()=>{gapi.load?c():n(ln(t,"network-request-failed"))},Oy(`${sk()}?onload=${f}`).catch(h=>n(h))}}).catch(e=>{throw Yl=null,e})}let Yl=null;function g0(t){return Yl=Yl||m0(t),Yl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new vo(5e3,15e3),y0="__/auth/iframe",v0="emulator/auth/iframe",w0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S0(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?df(e,v0):`https://${t.config.authDomain}/${y0}`,s={apiKey:e.apiKey,appName:t.name,v:ji},o=E0.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Ui(s).slice(1)}`}async function C0(t){const e=await g0(t),n=an().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:S0(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w0,dontclear:!0},s=>new Promise(async(o,a)=>{await s.restyle({setHideOnLeave:!1});const c=ln(t,"network-request-failed"),f=an().setTimeout(()=>{a(c)},_0.get());function h(){an().clearTimeout(f),o(s)}s.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T0=500,k0=600,R0="_blank",P0="http://localhost";class Ug{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N0(t,e,n,s=T0,o=k0){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const h=Object.assign(Object.assign({},I0),{width:s.toString(),height:o.toString(),top:a,left:c}),m=ct().toLowerCase();n&&(f=Ty(m)?R0:n),Cy(m)&&(e=e||P0,h.scrollbars="yes");const _=Object.entries(h).reduce((v,[C,I])=>`${v}${C}=${I},`,"");if(YT(m)&&f!=="_self")return x0(e||"",f),new Ug(null);const y=window.open(e||"",f,_);re(y,t,"popup-blocked");try{y.focus()}catch{}return new Ug(y)}function x0(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="__/auth/handler",O0="emulator/auth/handler",D0=encodeURIComponent("fac");async function jg(t,e,n,s,o,a){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ji,eventId:o};if(e instanceof by){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",vd(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,y]of Object.entries({}))c[_]=y}if(e instanceof Eo){const _=e.getScopes().filter(y=>y!=="");_.length>0&&(c.scopes=_.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const h=await t._getAppCheckToken(),m=h?`#${D0}=${encodeURIComponent(h)}`:"";return`${L0(t)}?${Ui(f).slice(1)}${m}`}function L0({config:t}){return t.emulator?df(t,O0):`https://${t.authDomain}/${A0}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="webStorageSupport";class b0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=By,this._completeRedirectFn=s0,this._overrideRedirectResult=n0}async _openPopup(e,n,s,o){var a;Pn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await jg(e,n,s,Td(),o);return N0(e,c,gf())}async _openRedirect(e,n,s,o){await this._originValidation(e);const a=await jg(e,n,s,Td(),o);return Uk(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(Pn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await C0(e),s=new l0(e);return n.register("authEvent",o=>(re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(td,{type:td},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[td];c!==void 0&&n(!!c),qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=f0(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xy()||Iy()||hf()}}const M0=b0;var zg="@firebase/auth",Wg="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j0(t){Ri(new Fr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;re(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const h={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ay(t)},m=new nk(s,o,a,h);return fk(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ri(new Fr("auth-internal",e=>{const n=Hr(e.getProvider("auth").getImmediate());return(s=>new F0(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(zg,Wg,U0(t)),lr(zg,Wg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=5*60,W0=sy("authIdTokenMaxAge")||z0;let Bg=null;const B0=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>W0)return;const o=n==null?void 0:n.token;Bg!==o&&(Bg=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $0(t=dy()){const e=af(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dk(t,{popupRedirectResolver:M0,persistence:[Kk,bk,By]}),s=sy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const c=B0(a.toString());xk(n,c,()=>c(n.currentUser)),Nk(n,f=>c(f))}}const o=ry("auth");return o&&hk(n,`http://${o}`),n}function V0(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rk({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=o=>{const a=ln("internal-error");a.customData=o,n(a)},s.type="text/javascript",s.charset="UTF-8",V0().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j0("Browser");var $g={};const Vg="@firebase/database",Hg="1.0.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qy="";function H0(t){Qy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ys(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return cn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new G0(e)}}catch{}return new K0},Mr=Yy("localStorage"),q0=Yy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new of("@firebase/database"),Q0=function(){let t=1;return function(){return t++}}(),Jy=function(t){const e=CI(t),n=new vI;n.update(e);const s=n.digest();return nf.encodeByteArray(s)},Co=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Co.apply(null,s):typeof s=="object"?e+=Ve(s):e+=s,e+=" "}return e};let Bs=null,Gg=!0;const Y0=function(t,e){z(!0,"Can't turn on custom loggers persistently."),Ii.logLevel=we.VERBOSE,Bs=Ii.log.bind(Ii)},Ze=function(...t){if(Gg===!0&&(Gg=!1,Bs===null&&q0.get("logging_enabled")===!0&&Y0()),Bs){const e=Co.apply(null,t);Bs(e)}},Io=function(t){return function(...e){Ze(t,...e)}},Nd=function(...t){const e="FIREBASE INTERNAL ERROR: "+Co(...t);Ii.error(e)},Nn=function(...t){const e=`FIREBASE FATAL ERROR: ${Co(...t)}`;throw Ii.error(e),new Error(e)},ut=function(...t){const e="FIREBASE WARNING: "+Co(...t);Ii.warn(e)},J0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},X0=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Pi="[MIN_NAME]",zr="[MAX_NAME]",Gr=function(t,e){if(t===e)return 0;if(t===Pi||e===zr)return-1;if(e===Pi||t===zr)return 1;{const n=Kg(t),s=Kg(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},Z0=function(t,e){return t===e?0:t<e?-1:1},Os=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ve(e))},vf=function(t){if(typeof t!="object"||t===null)return Ve(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ve(e[s]),n+=":",n+=vf(t[e[s]]);return n+="}",n},Xy=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(t.substring(o,n)):s.push(t.substring(o,o+e));return s};function et(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Zy=function(t){z(!yf(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,a,c,f,h;t===0?(a=0,c=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(f=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=f+s,c=Math.round(t*Math.pow(2,n-f)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-s-n))));const m=[];for(h=n;h;h-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(h=e;h;h-=1)m.push(a%2?1:0),a=Math.floor(a/2);m.push(o?1:0),m.reverse();const _=m.join("");let y="";for(h=0;h<64;h+=8){let v=parseInt(_.substr(h,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},eR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function nR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const rR=new RegExp("^-?(0*)\\d{1,10}$"),iR=-2147483648,sR=2147483647,Kg=function(t){if(rR.test(t)){const e=Number(t);if(e>=iR&&e<=sR)return e}return null},Wi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ut("Exception was thrown by user callback.",n),e},Math.floor(0))}},oR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$s=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){ut(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ut(e)}}class Jl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Jl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="5",ev="v",tv="s",nv="r",rv="f",iv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sv="ls",ov="p",xd="ac",lv="websocket",av="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,s,o,a=!1,c="",f=!1,h=!1){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function uR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cv(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let s;if(e===lv)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===av)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uR(t)&&(n.ns=t.namespace);const o=[];return et(n,(a,c)=>{o.push(a+"="+c)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.counters_={}}incrementCounter(e,n=1){cn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return eI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd={},rd={};function Ef(t){const e=t.toString();return nd[e]||(nd[e]=new cR),nd[e]}function dR(t,e){const n=t.toString();return rd[n]||(rd[n]=e()),rd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Wi(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="start",hR="close",pR="pLPCommand",mR="pRTLPCB",dv="id",fv="pw",hv="ser",gR="cb",_R="seg",yR="ts",vR="d",wR="dframe",pv=1870,mv=30,ER=pv-mv,SR=25e3,CR=3e4;class wi{constructor(e,n,s,o,a,c,f){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Io(e),this.stats_=Ef(n),this.urlFn=h=>(this.appCheckToken&&(h[xd]=this.appCheckToken),cv(n,av,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new fR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(CR)),X0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sf((...a)=>{const[c,f,h,m,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===qg)this.id=f,this.password=h;else if(c===hR)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const s={};s[qg]="t",s[hv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[gR]=this.scriptTagHolder.uniqueCallbackIdentifier),s[ev]=wf,this.transportSessionId&&(s[tv]=this.transportSessionId),this.lastSessionId&&(s[sv]=this.lastSessionId),this.applicationId&&(s[ov]=this.applicationId),this.appCheckToken&&(s[xd]=this.appCheckToken),typeof location<"u"&&location.hostname&&iv.test(location.hostname)&&(s[nv]=rv);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wi.forceAllow_=!0}static forceDisallow(){wi.forceDisallow_=!0}static isAvailable(){return wi.forceAllow_?!0:!wi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!eR()&&!tR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=ty(n),o=Xy(s,ER);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[wR]="t",s[dv]=e,s[fv]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Sf{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Q0(),window[pR+this.uniqueCallbackIdentifier]=e,window[mR+this.uniqueCallbackIdentifier]=n,this.myIFrame=Sf.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Ze("frame writing exception"),f.stack&&Ze(f.stack),Ze(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ze("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[dv]=this.myID,e[fv]=this.myPW,e[hv]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mv+s.length<=pv;){const c=this.pendingSegs.shift();s=s+"&"+_R+o+"="+c.seg+"&"+yR+o+"="+c.ts+"&"+vR+o+"="+c.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(SR)),a=()=>{clearTimeout(o),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Ze("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=16384,TR=45e3;let ua=null;typeof MozWebSocket<"u"?ua=MozWebSocket:typeof WebSocket<"u"&&(ua=WebSocket);class on{constructor(e,n,s,o,a,c,f){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Io(this.connId),this.stats_=Ef(n),this.connURL=on.connectionURL_(n,c,f,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,a){const c={};return c[ev]=wf,typeof location<"u"&&location.hostname&&iv.test(location.hostname)&&(c[nv]=rv),n&&(c[tv]=n),s&&(c[sv]=s),o&&(c[xd]=o),a&&(c[ov]=a),cv(e,lv,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mr.set("previous_websocket_failure",!0);try{let s;dI(),this.mySock=new ua(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){on.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&ua!==null&&!on.forceDisallow_}static previouslyFailed(){return Mr.isInMemoryStorage||Mr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Ys(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Xy(n,IR);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(TR))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}on.responsesRequiredToBeHealthy=2;on.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static get ALL_TRANSPORTS(){return[wi,on]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=on.isAvailable();let s=n&&!on.previouslyFailed();if(e.webSocketOnly&&(n||ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[on];else{const o=this.transports_=[];for(const a of to.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);to.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}to.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=6e4,RR=5e3,PR=10*1024,NR=100*1024,id="t",Qg="d",xR="s",Yg="r",AR="e",Jg="o",Xg="a",Zg="n",e_="p",OR="h";class DR{constructor(e,n,s,o,a,c,f,h,m,_){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=h,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Io("c:"+this.id+":"),this.transportManager_=new to(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=$s(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>NR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>PR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(id in e){const n=e[id];n===Xg?this.upgradeIfSecondaryHealthy_():n===Yg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Jg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Os("t",e),s=Os("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:e_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Os("t",e),s=Os("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Os(id,e);if(Qg in e){const s=e[Qg];if(n===OR){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===Zg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===xR?this.onConnectionShutdown_(s):n===Yg?this.onReset_(s):n===AR?Nd("Server Error: "+s):n===Jg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wf!==s&&ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),$s(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(kR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$s(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(RR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:e_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let a=0;a<o.length;a++)if(o[a].callback===n&&(!s||s===o[a].context)){o.splice(a,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends _v{static getInstance(){return new ca}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=32,n_=768;class Ee{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function _e(){return new Ee("")}function de(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function dr(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ee(t.pieces_,e)}function Cf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function LR(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function no(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function yv(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ee(e,0)}function Me(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Ee)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new Ee(n,0)}function ce(t){return t.pieceNum_>=t.pieces_.length}function at(t,e){const n=de(t),s=de(e);if(n===null)return e;if(n===s)return at(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bR(t,e){const n=no(t,0),s=no(e,0);for(let o=0;o<n.length&&o<s.length;o++){const a=Gr(n[o],s[o]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function vv(t,e){if(dr(t)!==dr(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Lt(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(dr(t)>dr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class MR{constructor(e,n){this.errorPrefix_=n,this.parts_=no(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=xa(this.parts_[s]);wv(this)}}function FR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xa(e),wv(t)}function UR(t){const e=t.parts_.pop();t.byteLength_-=xa(e),t.parts_.length>0&&(t.byteLength_-=1)}function wv(t){if(t.byteLength_>n_)throw new Error(t.errorPrefix_+"has a key path longer than "+n_+" bytes ("+t.byteLength_+").");if(t.parts_.length>t_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t_+") or object contains a cycle "+Lr(t))}function Lr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends _v{static getInstance(){return new If}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=1e3,jR=60*5*1e3,r_=30*1e3,zR=1.3,WR=3e4,BR="server_kill",i_=3;class Tn extends gv{constructor(e,n,s,o,a,c,f,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=h,this.id=Tn.nextPersistentConnectionId_++,this.log_=Io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ds,this.maxReconnectDelay_=jR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");If.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ca.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,a={r:o,a:e,b:n};this.log_(Ve(a)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new _o,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,o){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,f=>{const h=f.d,m=f.s;Tn.warnOnListenWarnings_(h,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",f),m!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(m,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&cn(e,"w")){const s=ki(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=_I(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const a=o.s,c=o.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";o&&(a.q=s,a.t=o),this.sendRequest(c,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,a){this.initConnection_();const c={p:n,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ve(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Nd("Unrecognized action received from server: "+Ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ds,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ds,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>WR&&(this.reconnectDelay_=Ds),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*zR)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Tn.nextConnectionId_++,a=this.lastSessionId;let c=!1,f=null;const h=function(){f?f.close():(c=!0,s())},m=function(y){z(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(y)};this.realtime_={close:h,sendRequest:m};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Ze("getToken() completed but was canceled"):(Ze("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,f=new DR(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,C=>{ut(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(BR)},a))}catch(y){this.log_("Failed to get token: "+y),c||(this.repoInfo_.nodeAdmin&&ut(y),h())}}}interrupt(e){Ze("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ze("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vd(this.interruptReasons_)&&(this.reconnectDelay_=Ds,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>vf(a)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new Ee(e).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){Ze("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=i_&&(this.reconnectDelay_=r_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ze("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=i_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Qy.replace(/\./g,"-")]=1,sf()?e["framework.cordova"]=1:oy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ca.getInstance().currentlyOnline();return vd(this.interruptReasons_)&&e}}Tn.nextPersistentConnectionId_=0;Tn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ae(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ae(Pi,e),o=new ae(Pi,n);return this.compare(s,o)!==0}minPost(){return ae.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl;class Ev extends La{static get __EMPTY_NODE(){return Bl}static set __EMPTY_NODE(e){Bl=e}compare(e,n){return Gr(e.name,n.name)}isDefinedOn(e){throw Fi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ae.MIN}maxPost(){return new ae(zr,Bl)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new ae(e,Bl)}toString(){return".key"}}const Ti=new Ev;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,s,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?s(e.key,n):1,o&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Qe{constructor(e,n,s,o,a){this.key=e,this.value=n,this.color=s??Qe.RED,this.left=o??yt.EMPTY_NODE,this.right=a??yt.EMPTY_NODE}copy(e,n,s,o,a){return new Qe(e??this.key,n??this.value,s??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const a=s(e,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):a===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return yt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return yt.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Qe.RED=!0;Qe.BLACK=!1;class $R{copy(e,n,s,o,a){return this}insert(e,n,s){return new Qe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class yt{constructor(e,n=yt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new yt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qe.BLACK,null,null))}remove(e){return new yt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qe.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $l(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $l(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $l(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $l(this.root_,null,this.comparator_,!0,e)}}yt.EMPTY_NODE=new $R;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return Gr(t.name,e.name)}function Tf(t,e){return Gr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad;function HR(t){Ad=t}const Sv=function(t){return typeof t=="number"?"number:"+Zy(t):"string:"+t},Cv=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&cn(e,".sv"),"Priority must be a string or number.")}else z(t===Ad||t.isEmpty(),"priority of unexpected type.");z(t===Ad||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s_;class qe{static set __childrenNodeConstructor(e){s_=e}static get __childrenNodeConstructor(){return s_}constructor(e,n=qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Cv(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ce(e)?this:de(e)===".priority"?this.priorityNode_:qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=de(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(z(s!==".priority"||dr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Sv(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Zy(this.value_):e+=this.value_,this.lazyHash_=Jy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qe.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=qe.VALUE_TYPE_ORDER.indexOf(n),a=qe.VALUE_TYPE_ORDER.indexOf(s);return z(o>=0,"Unknown leaf type: "+n),z(a>=0,"Unknown leaf type: "+s),o===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iv,Tv;function GR(t){Iv=t}function KR(t){Tv=t}class qR extends La{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),a=s.compareTo(o);return a===0?Gr(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ae.MIN}maxPost(){return new ae(zr,new qe("[PRIORITY-POST]",Tv))}makePost(e,n){const s=Iv(e);return new ae(n,new qe("[PRIORITY-POST]",s))}toString(){return".priority"}}const Fe=new qR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=Math.log(2);class YR{constructor(e){const n=a=>parseInt(Math.log(a)/QR,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const da=function(t,e,n,s){t.sort(e);const o=function(h,m){const _=m-h;let y,v;if(_===0)return null;if(_===1)return y=t[h],v=n?n(y):y,new Qe(v,y.node,Qe.BLACK,null,null);{const C=parseInt(_/2,10)+h,I=o(h,C),O=o(C+1,m);return y=t[C],v=n?n(y):y,new Qe(v,y.node,Qe.BLACK,I,O)}},a=function(h){let m=null,_=null,y=t.length;const v=function(I,O){const x=y-I,D=y;y-=I;const W=o(x+1,D),b=t[x],B=n?n(b):b;C(new Qe(B,b.node,O,null,W))},C=function(I){m?(m.left=I,m=I):(_=I,m=I)};for(let I=0;I<h.count;++I){const O=h.nextBitIsOne(),x=Math.pow(2,h.count-(I+1));O?v(x,Qe.BLACK):(v(x,Qe.BLACK),v(x,Qe.RED))}return _},c=new YR(t.length),f=a(c);return new yt(s||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd;const Ls={};class Sn{static get Default(){return z(Fe,"ChildrenNode.ts has not been loaded"),sd=sd||new Sn({".priority":Ls},{".priority":Fe}),sd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof yt?n:null}hasIndex(e){return cn(this.indexSet_,e.toString())}addIndex(e,n){z(e!==Ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const a=n.getIterator(ae.Wrap);let c=a.getNext();for(;c;)o=o||e.isDefinedOn(c.node),s.push(c),c=a.getNext();let f;o?f=da(s,e.getCompare()):f=Ls;const h=e.toString(),m=Object.assign({},this.indexSet_);m[h]=e;const _=Object.assign({},this.indexes_);return _[h]=f,new Sn(_,m)}addToIndexes(e,n){const s=na(this.indexes_,(o,a)=>{const c=ki(this.indexSet_,a);if(z(c,"Missing index implementation for "+a),o===Ls)if(c.isDefinedOn(e.node)){const f=[],h=n.getIterator(ae.Wrap);let m=h.getNext();for(;m;)m.name!==e.name&&f.push(m),m=h.getNext();return f.push(e),da(f,c.getCompare())}else return Ls;else{const f=n.get(e.name);let h=o;return f&&(h=h.remove(new ae(e.name,f))),h.insert(e,e.node)}});return new Sn(s,this.indexSet_)}removeFromIndexes(e,n){const s=na(this.indexes_,o=>{if(o===Ls)return o;{const a=n.get(e.name);return a?o.remove(new ae(e.name,a)):o}});return new Sn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bs;class ne{static get EMPTY_NODE(){return bs||(bs=new ne(new yt(Tf),null,Sn.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Cv(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bs}updatePriority(e){return this.children_.isEmpty()?this:new ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?bs:n}}getChild(e){const n=de(e);return n===null?this:this.getImmediateChild(n).getChild(Te(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ae(e,n);let o,a;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const c=o.isEmpty()?bs:this.priorityNode_;return new ne(o,c,a)}}updateChild(e,n){const s=de(e);if(s===null)return n;{z(de(e)!==".priority"||dr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(Te(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,a=!0;if(this.forEachChild(Fe,(c,f)=>{n[c]=f.val(e),s++,a&&ne.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!e&&a&&o<2*s){const c=[];for(const f in n)c[f]=n[f];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Sv(this.getPriority().val())+":"),this.forEachChild(Fe,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Jy(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new ae(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ae(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ae(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,ae.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,ae.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)>0;)o.getNext(),a=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===To?-1:0}withIndex(e){if(e===Ti||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ne(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ti||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Fe),o=n.getIterator(Fe);let a=s.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Ti?null:this.indexMap_.get(e.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class JR extends ne{constructor(){super(new yt(Tf),ne.EMPTY_NODE,Sn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ne.EMPTY_NODE}isEmpty(){return!1}}const To=new JR;Object.defineProperties(ae,{MIN:{value:new ae(Pi,ne.EMPTY_NODE)},MAX:{value:new ae(zr,To)}});Ev.__EMPTY_NODE=ne.EMPTY_NODE;qe.__childrenNodeConstructor=ne;HR(To);KR(To);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=!0;function $e(t,e=null){if(t===null)return ne.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new qe(n,$e(e))}if(!(t instanceof Array)&&XR){const n=[];let s=!1;if(et(t,(c,f)=>{if(c.substring(0,1)!=="."){const h=$e(f);h.isEmpty()||(s=s||!h.getPriority().isEmpty(),n.push(new ae(c,h)))}}),n.length===0)return ne.EMPTY_NODE;const a=da(n,VR,c=>c.name,Tf);if(s){const c=da(n,Fe.getCompare());return new ne(a,$e(e),new Sn({".priority":c},{".priority":Fe}))}else return new ne(a,$e(e),Sn.Default)}else{let n=ne.EMPTY_NODE;return et(t,(s,o)=>{if(cn(t,s)&&s.substring(0,1)!=="."){const a=$e(o);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority($e(e))}}GR($e);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR extends La{constructor(e){super(),this.indexPath_=e,z(!ce(e)&&de(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),a=s.compareTo(o);return a===0?Gr(e.name,n.name):a}makePost(e,n){const s=$e(e),o=ne.EMPTY_NODE.updateChild(this.indexPath_,s);return new ae(n,o)}maxPost(){const e=ne.EMPTY_NODE.updateChild(this.indexPath_,To);return new ae(zr,e)}toString(){return no(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends La{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Gr(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ae.MIN}maxPost(){return ae.MAX}makePost(e,n){const s=$e(e);return new ae(n,s)}toString(){return".value"}}const tP=new eP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){return{type:"value",snapshotNode:t}}function Ni(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ro(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function io(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function nP(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.index_=e}updateChild(e,n,s,o,a,c){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(o).equals(s.getChild(o))&&f.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(n)?c.trackChildChange(ro(n,f)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Ni(n,s)):c.trackChildChange(io(n,s,f))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Fe,(o,a)=>{n.hasChild(o)||s.trackChildChange(ro(o,a))}),n.isLeafNode()||n.forEachChild(Fe,(o,a)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(a)||s.trackChildChange(io(o,a,c))}else s.trackChildChange(Ni(o,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ne.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.indexedFilter_=new kf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=so.getStartPost_(e),this.endPost_=so.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,a,c){return this.matches(new ae(n,s))||(s=ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,a,c)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ne.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ne.EMPTY_NODE);const a=this;return n.forEachChild(Fe,(c,f)=>{a.matches(new ae(c,f))||(o=o.updateImmediateChild(c,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new so(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,a,c){return this.rangedFilter_.matches(new ae(n,s))||(s=ne.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,a,c):this.fullLimitUpdateChild_(e,n,s,a,c)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ne.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ne.EMPTY_NODE);let a;this.reverse_?a=o.getReverseIterator(this.index_):a=o.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:o=o.updateImmediateChild(f.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,a){let c;if(this.reverse_){const y=this.index_.getCompare();c=(v,C)=>y(C,v)}else c=this.index_.getCompare();const f=e;z(f.numChildren()===this.limit_,"");const h=new ae(n,s),m=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),_=this.rangedFilter_.matches(h);if(f.hasChild(n)){const y=f.getImmediateChild(n);let v=o.getChildAfterChild(this.index_,m,this.reverse_);for(;v!=null&&(v.name===n||f.hasChild(v.name));)v=o.getChildAfterChild(this.index_,v,this.reverse_);const C=v==null?1:c(v,h);if(_&&!s.isEmpty()&&C>=0)return a!=null&&a.trackChildChange(io(n,s,y)),f.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(ro(n,y));const O=f.updateImmediateChild(n,ne.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a!=null&&a.trackChildChange(Ni(v.name,v.node)),O.updateImmediateChild(v.name,v.node)):O}}else return s.isEmpty()?e:_&&c(m,h)>=0?(a!=null&&(a.trackChildChange(ro(m.name,m.node)),a.trackChildChange(Ni(n,s))),f.updateImmediateChild(n,s).updateImmediateChild(m.name,ne.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pi}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fe}copy(){const e=new Rf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iP(t){return t.loadsAllData()?new kf(t.getIndex()):t.hasLimit()?new rP(t):new so(t)}function o_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Fe?n="$priority":t.index_===tP?n="$value":t.index_===Ti?n="$key":(z(t.index_ instanceof ZR,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ve(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Ve(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Ve(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Ve(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function l_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Fe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends gv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=Io("p:rest:"),this.listens_={}}listen(e,n,s,o){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=fa.getListenId_(e,s),f={};this.listens_[c]=f;const h=o_(e._queryParams);this.restRequest_(a+".json",h,(m,_)=>{let y=_;if(m===404&&(y=null,m=null),m===null&&this.onDataUpdate_(a,y,!1,s),ki(this.listens_,c)===f){let v;m?m===401?v="permission_denied":v="rest_error:"+m:v="ok",o(v,null)}})}unlisten(e,n){const s=fa.getListenId_(e,n);delete this.listens_[s]}get(e){const n=o_(e._queryParams),s=e._path.toString(),o=new _o;return this.restRequest_(s+".json",n,(a,c)=>{let f=c;a===404&&(f=null,a=null),a===null?(this.onDataUpdate_(s,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(n.auth=o.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ui(n);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(s&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let h=null;if(f.status>=200&&f.status<300){try{h=Ys(f.responseText)}catch{ut("Failed to parse JSON response for "+c+": "+f.responseText)}s(null,h)}else f.status!==401&&f.status!==404&&ut("Got unsuccessful REST response for "+c+" Status: "+f.status),s(f.status);s=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(){return{value:null,children:new Map}}function Rv(t,e,n){if(ce(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=de(e);t.children.has(s)||t.children.set(s,ha());const o=t.children.get(s);e=Te(e),Rv(o,e,n)}}function Od(t,e,n){t.value!==null?n(e,t.value):oP(t,(s,o)=>{const a=new Ee(e.toString()+"/"+s);Od(o,a,n)})}function oP(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&et(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=10*1e3,aP=30*1e3,uP=5*60*1e3;class cP{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lP(e);const s=a_+(aP-a_)*Math.random();$s(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;et(e,(o,a)=>{a>0&&cn(this.statsToReport_,o)&&(n[o]=a,s=!0)}),s&&this.server_.reportStats(n),$s(this.reportStats_.bind(this),Math.floor(Math.random()*2*uP))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ht||(Ht={}));function Pf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Nf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Ht.ACK_USER_WRITE,this.source=Pf()}operationForChild(e){if(ce(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ee(e));return new pa(_e(),n,this.revert)}}else return z(de(this.path)===e,"operationForChild called for unrelated child."),new pa(Te(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.source=e,this.path=n,this.type=Ht.LISTEN_COMPLETE}operationForChild(e){return ce(this.path)?new oo(this.source,_e()):new oo(this.source,Te(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Ht.OVERWRITE}operationForChild(e){return ce(this.path)?new Wr(this.source,_e(),this.snap.getImmediateChild(e)):new Wr(this.source,Te(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Ht.MERGE}operationForChild(e){if(ce(this.path)){const n=this.children.subtree(new Ee(e));return n.isEmpty()?null:n.value?new Wr(this.source,_e(),n.value):new xi(this.source,_e(),n)}else return z(de(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xi(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ce(e))return this.isFullyInitialized()&&!this.filtered_;const n=de(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function fP(t,e,n,s){const o=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(nP(c.childName,c.snapshotNode))}),Ms(t,o,"child_removed",e,s,n),Ms(t,o,"child_added",e,s,n),Ms(t,o,"child_moved",a,s,n),Ms(t,o,"child_changed",e,s,n),Ms(t,o,"value",e,s,n),o}function Ms(t,e,n,s,o,a){const c=s.filter(f=>f.type===n);c.sort((f,h)=>pP(t,f,h)),c.forEach(f=>{const h=hP(t,f,a);o.forEach(m=>{m.respondsTo(f.type)&&e.push(m.createEvent(h,t.query_))})})}function hP(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function pP(t,e,n){if(e.childName==null||n.childName==null)throw Fi("Should only compare child_ events.");const s=new ae(e.childName,e.snapshotNode),o=new ae(n.childName,n.snapshotNode);return t.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t,e){return{eventCache:t,serverCache:e}}function Vs(t,e,n,s){return ba(new fr(e,n,s),t.serverCache)}function Pv(t,e,n,s){return ba(t.eventCache,new fr(e,n,s))}function ma(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Br(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;const mP=()=>(od||(od=new yt(Z0)),od);class Ie{static fromObject(e){let n=new Ie(null);return et(e,(s,o)=>{n=n.set(new Ee(s),o)}),n}constructor(e,n=mP()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:_e(),value:this.value};if(ce(e))return null;{const s=de(e),o=this.children.get(s);if(o!==null){const a=o.findRootMostMatchingPathAndValue(Te(e),n);return a!=null?{path:Me(new Ee(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ce(e))return this;{const n=de(e),s=this.children.get(n);return s!==null?s.subtree(Te(e)):new Ie(null)}}set(e,n){if(ce(e))return new Ie(n,this.children);{const s=de(e),a=(this.children.get(s)||new Ie(null)).set(Te(e),n),c=this.children.insert(s,a);return new Ie(this.value,c)}}remove(e){if(ce(e))return this.children.isEmpty()?new Ie(null):new Ie(null,this.children);{const n=de(e),s=this.children.get(n);if(s){const o=s.remove(Te(e));let a;return o.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,o),this.value===null&&a.isEmpty()?new Ie(null):new Ie(this.value,a)}else return this}}get(e){if(ce(e))return this.value;{const n=de(e),s=this.children.get(n);return s?s.get(Te(e)):null}}setTree(e,n){if(ce(e))return n;{const s=de(e),a=(this.children.get(s)||new Ie(null)).setTree(Te(e),n);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new Ie(this.value,c)}}fold(e){return this.fold_(_e(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,a)=>{s[o]=a.fold_(Me(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,_e(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(ce(e))return null;{const a=de(e),c=this.children.get(a);return c?c.findOnPath_(Te(e),Me(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,_e(),n)}foreachOnPath_(e,n,s){if(ce(e))return this;{this.value&&s(n,this.value);const o=de(e),a=this.children.get(o);return a?a.foreachOnPath_(Te(e),Me(n,o),s):new Ie(null)}}foreach(e){this.foreach_(_e(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(Me(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.writeTree_=e}static empty(){return new Gt(new Ie(null))}}function Hs(t,e,n){if(ce(e))return new Gt(new Ie(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let a=s.value;const c=at(o,e);return a=a.updateChild(c,n),new Gt(t.writeTree_.set(o,a))}else{const o=new Ie(n),a=t.writeTree_.setTree(e,o);return new Gt(a)}}}function Dd(t,e,n){let s=t;return et(n,(o,a)=>{s=Hs(s,Me(e,o),a)}),s}function u_(t,e){if(ce(e))return Gt.empty();{const n=t.writeTree_.setTree(e,new Ie(null));return new Gt(n)}}function Ld(t,e){return Kr(t,e)!=null}function Kr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(at(n.path,e)):null}function c_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Fe,(s,o)=>{e.push(new ae(s,o))}):t.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new ae(s,o.value))}),e}function ar(t,e){if(ce(e))return t;{const n=Kr(t,e);return n!=null?new Gt(new Ie(n)):new Gt(t.writeTree_.subtree(e))}}function bd(t){return t.writeTree_.isEmpty()}function Ai(t,e){return Nv(_e(),t.writeTree_,e)}function Nv(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((o,a)=>{o===".priority"?(z(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=Nv(Me(t,o),a,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Me(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t,e){return Dv(e,t)}function gP(t,e,n,s,o){z(s>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(t.visibleWrites=Hs(t.visibleWrites,e,n)),t.lastWriteId=s}function _P(t,e,n,s){z(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=Dd(t.visibleWrites,e,n),t.lastWriteId=s}function yP(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function vP(t,e){const n=t.allWrites.findIndex(f=>f.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let o=s.visible,a=!1,c=t.allWrites.length-1;for(;o&&c>=0;){const f=t.allWrites[c];f.visible&&(c>=n&&wP(f,s.path)?o=!1:Lt(s.path,f.path)&&(a=!0)),c--}if(o){if(a)return EP(t),!0;if(s.snap)t.visibleWrites=u_(t.visibleWrites,s.path);else{const f=s.children;et(f,h=>{t.visibleWrites=u_(t.visibleWrites,Me(s.path,h))})}return!0}else return!1}function wP(t,e){if(t.snap)return Lt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Lt(Me(t.path,n),e))return!0;return!1}function EP(t){t.visibleWrites=xv(t.allWrites,SP,_e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function SP(t){return t.visible}function xv(t,e,n){let s=Gt.empty();for(let o=0;o<t.length;++o){const a=t[o];if(e(a)){const c=a.path;let f;if(a.snap)Lt(n,c)?(f=at(n,c),s=Hs(s,f,a.snap)):Lt(c,n)&&(f=at(c,n),s=Hs(s,_e(),a.snap.getChild(f)));else if(a.children){if(Lt(n,c))f=at(n,c),s=Dd(s,f,a.children);else if(Lt(c,n))if(f=at(c,n),ce(f))s=Dd(s,_e(),a.children);else{const h=ki(a.children,de(f));if(h){const m=h.getChild(Te(f));s=Hs(s,_e(),m)}}}else throw Fi("WriteRecord should have .snap or .children")}}return s}function Av(t,e,n,s,o){if(!s&&!o){const a=Kr(t.visibleWrites,e);if(a!=null)return a;{const c=ar(t.visibleWrites,e);if(bd(c))return n;if(n==null&&!Ld(c,_e()))return null;{const f=n||ne.EMPTY_NODE;return Ai(c,f)}}}else{const a=ar(t.visibleWrites,e);if(!o&&bd(a))return n;if(!o&&n==null&&!Ld(a,_e()))return null;{const c=function(m){return(m.visible||o)&&(!s||!~s.indexOf(m.writeId))&&(Lt(m.path,e)||Lt(e,m.path))},f=xv(t.allWrites,c,e),h=n||ne.EMPTY_NODE;return Ai(f,h)}}}function CP(t,e,n){let s=ne.EMPTY_NODE;const o=Kr(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Fe,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(n){const a=ar(t.visibleWrites,e);return n.forEachChild(Fe,(c,f)=>{const h=Ai(ar(a,new Ee(c)),f);s=s.updateImmediateChild(c,h)}),c_(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=ar(t.visibleWrites,e);return c_(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function IP(t,e,n,s,o){z(s||o,"Either existingEventSnap or existingServerSnap must exist");const a=Me(e,n);if(Ld(t.visibleWrites,a))return null;{const c=ar(t.visibleWrites,a);return bd(c)?o.getChild(n):Ai(c,o.getChild(n))}}function TP(t,e,n,s){const o=Me(e,n),a=Kr(t.visibleWrites,o);if(a!=null)return a;if(s.isCompleteForChild(n)){const c=ar(t.visibleWrites,o);return Ai(c,s.getNode().getImmediateChild(n))}else return null}function kP(t,e){return Kr(t.visibleWrites,e)}function RP(t,e,n,s,o,a,c){let f;const h=ar(t.visibleWrites,e),m=Kr(h,_e());if(m!=null)f=m;else if(n!=null)f=Ai(h,n);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const _=[],y=c.getCompare(),v=a?f.getReverseIteratorFrom(s,c):f.getIteratorFrom(s,c);let C=v.getNext();for(;C&&_.length<o;)y(C,s)!==0&&_.push(C),C=v.getNext();return _}else return[]}function PP(){return{visibleWrites:Gt.empty(),allWrites:[],lastWriteId:-1}}function ga(t,e,n,s){return Av(t.writeTree,t.treePath,e,n,s)}function Af(t,e){return CP(t.writeTree,t.treePath,e)}function d_(t,e,n,s){return IP(t.writeTree,t.treePath,e,n,s)}function _a(t,e){return kP(t.writeTree,Me(t.treePath,e))}function NP(t,e,n,s,o,a){return RP(t.writeTree,t.treePath,e,n,s,o,a)}function Of(t,e,n){return TP(t.writeTree,t.treePath,e,n)}function Ov(t,e){return Dv(Me(t.treePath,e),t.writeTree)}function Dv(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const a=o.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,io(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,ro(s,o.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,Ni(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,io(s,e.snapshotNode,o.oldSnap));else throw Fi("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Lv=new AP;class Df{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Of(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Br(this.viewCache_),a=NP(this.writes_,o,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){return{filter:t}}function DP(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function LP(t,e,n,s,o){const a=new xP;let c,f;if(n.type===Ht.OVERWRITE){const m=n;m.source.fromUser?c=Md(t,e,m.path,m.snap,s,o,a):(z(m.source.fromServer,"Unknown source."),f=m.source.tagged||e.serverCache.isFiltered()&&!ce(m.path),c=ya(t,e,m.path,m.snap,s,o,f,a))}else if(n.type===Ht.MERGE){const m=n;m.source.fromUser?c=MP(t,e,m.path,m.children,s,o,a):(z(m.source.fromServer,"Unknown source."),f=m.source.tagged||e.serverCache.isFiltered(),c=Fd(t,e,m.path,m.children,s,o,f,a))}else if(n.type===Ht.ACK_USER_WRITE){const m=n;m.revert?c=jP(t,e,m.path,s,o,a):c=FP(t,e,m.path,m.affectedTree,s,o,a)}else if(n.type===Ht.LISTEN_COMPLETE)c=UP(t,e,n.path,s,a);else throw Fi("Unknown operation type: "+n.type);const h=a.getChanges();return bP(e,c,h),{viewCache:c,changes:h}}function bP(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=ma(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(kv(ma(e)))}}function bv(t,e,n,s,o,a){const c=e.eventCache;if(_a(s,n)!=null)return e;{let f,h;if(ce(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Br(e),_=m instanceof ne?m:ne.EMPTY_NODE,y=Af(s,_);f=t.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const m=ga(s,Br(e));f=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const m=de(n);if(m===".priority"){z(dr(n)===1,"Can't have a priority with additional path components");const _=c.getNode();h=e.serverCache.getNode();const y=d_(s,n,_,h);y!=null?f=t.filter.updatePriority(_,y):f=c.getNode()}else{const _=Te(n);let y;if(c.isCompleteForChild(m)){h=e.serverCache.getNode();const v=d_(s,n,c.getNode(),h);v!=null?y=c.getNode().getImmediateChild(m).updateChild(_,v):y=c.getNode().getImmediateChild(m)}else y=Of(s,m,e.serverCache);y!=null?f=t.filter.updateChild(c.getNode(),m,y,_,o,a):f=c.getNode()}}return Vs(e,f,c.isFullyInitialized()||ce(n),t.filter.filtersNodes())}}function ya(t,e,n,s,o,a,c,f){const h=e.serverCache;let m;const _=c?t.filter:t.filter.getIndexedFilter();if(ce(n))m=_.updateFullNode(h.getNode(),s,null);else if(_.filtersNodes()&&!h.isFiltered()){const C=h.getNode().updateChild(n,s);m=_.updateFullNode(h.getNode(),C,null)}else{const C=de(n);if(!h.isCompleteForPath(n)&&dr(n)>1)return e;const I=Te(n),x=h.getNode().getImmediateChild(C).updateChild(I,s);C===".priority"?m=_.updatePriority(h.getNode(),x):m=_.updateChild(h.getNode(),C,x,I,Lv,null)}const y=Pv(e,m,h.isFullyInitialized()||ce(n),_.filtersNodes()),v=new Df(o,y,a);return bv(t,y,n,o,v,f)}function Md(t,e,n,s,o,a,c){const f=e.eventCache;let h,m;const _=new Df(o,e,a);if(ce(n))m=t.filter.updateFullNode(e.eventCache.getNode(),s,c),h=Vs(e,m,!0,t.filter.filtersNodes());else{const y=de(n);if(y===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),s),h=Vs(e,m,f.isFullyInitialized(),f.isFiltered());else{const v=Te(n),C=f.getNode().getImmediateChild(y);let I;if(ce(v))I=s;else{const O=_.getCompleteChild(y);O!=null?Cf(v)===".priority"&&O.getChild(yv(v)).isEmpty()?I=O:I=O.updateChild(v,s):I=ne.EMPTY_NODE}if(C.equals(I))h=e;else{const O=t.filter.updateChild(f.getNode(),y,I,v,_,c);h=Vs(e,O,f.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function f_(t,e){return t.eventCache.isCompleteForChild(e)}function MP(t,e,n,s,o,a,c){let f=e;return s.foreach((h,m)=>{const _=Me(n,h);f_(e,de(_))&&(f=Md(t,f,_,m,o,a,c))}),s.foreach((h,m)=>{const _=Me(n,h);f_(e,de(_))||(f=Md(t,f,_,m,o,a,c))}),f}function h_(t,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function Fd(t,e,n,s,o,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,m;ce(n)?m=s:m=new Ie(null).setTree(n,s);const _=e.serverCache.getNode();return m.children.inorderTraversal((y,v)=>{if(_.hasChild(y)){const C=e.serverCache.getNode().getImmediateChild(y),I=h_(t,C,v);h=ya(t,h,new Ee(y),I,o,a,c,f)}}),m.children.inorderTraversal((y,v)=>{const C=!e.serverCache.isCompleteForChild(y)&&v.value===null;if(!_.hasChild(y)&&!C){const I=e.serverCache.getNode().getImmediateChild(y),O=h_(t,I,v);h=ya(t,h,new Ee(y),O,o,a,c,f)}}),h}function FP(t,e,n,s,o,a,c){if(_a(o,n)!=null)return e;const f=e.serverCache.isFiltered(),h=e.serverCache;if(s.value!=null){if(ce(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return ya(t,e,n,h.getNode().getChild(n),o,a,f,c);if(ce(n)){let m=new Ie(null);return h.getNode().forEachChild(Ti,(_,y)=>{m=m.set(new Ee(_),y)}),Fd(t,e,n,m,o,a,f,c)}else return e}else{let m=new Ie(null);return s.foreach((_,y)=>{const v=Me(n,_);h.isCompleteForPath(v)&&(m=m.set(_,h.getNode().getChild(v)))}),Fd(t,e,n,m,o,a,f,c)}}function UP(t,e,n,s,o){const a=e.serverCache,c=Pv(e,a.getNode(),a.isFullyInitialized()||ce(n),a.isFiltered());return bv(t,c,n,s,Lv,o)}function jP(t,e,n,s,o,a){let c;if(_a(s,n)!=null)return e;{const f=new Df(s,e,o),h=e.eventCache.getNode();let m;if(ce(n)||de(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=ga(s,Br(e));else{const y=e.serverCache.getNode();z(y instanceof ne,"serverChildren would be complete if leaf node"),_=Af(s,y)}_=_,m=t.filter.updateFullNode(h,_,a)}else{const _=de(n);let y=Of(s,_,e.serverCache);y==null&&e.serverCache.isCompleteForChild(_)&&(y=h.getImmediateChild(_)),y!=null?m=t.filter.updateChild(h,_,y,Te(n),f,a):e.eventCache.getNode().hasChild(_)?m=t.filter.updateChild(h,_,ne.EMPTY_NODE,Te(n),f,a):m=h,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=ga(s,Br(e)),c.isLeafNode()&&(m=t.filter.updateFullNode(m,c,a)))}return c=e.serverCache.isFullyInitialized()||_a(s,_e())!=null,Vs(e,m,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new kf(s.getIndex()),a=iP(s);this.processor_=OP(a);const c=n.serverCache,f=n.eventCache,h=o.updateFullNode(ne.EMPTY_NODE,c.getNode(),null),m=a.updateFullNode(ne.EMPTY_NODE,f.getNode(),null),_=new fr(h,c.isFullyInitialized(),o.filtersNodes()),y=new fr(m,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=ba(y,_),this.eventGenerator_=new dP(this.query_)}get query(){return this.query_}}function WP(t){return t.viewCache_.serverCache.getNode()}function BP(t){return ma(t.viewCache_)}function $P(t,e){const n=Br(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ce(e)&&!n.getImmediateChild(de(e)).isEmpty())?n.getChild(e):null}function p_(t){return t.eventRegistrations_.length===0}function VP(t,e){t.eventRegistrations_.push(e)}function m_(t,e,n){const s=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,o);c&&s.push(c)})}if(e){let o=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return s}function g_(t,e,n,s){e.type===Ht.MERGE&&e.source.queryId!==null&&(z(Br(t.viewCache_),"We should always have a full cache before handling merges"),z(ma(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,a=LP(t.processor_,o,e,n,s);return DP(t.processor_,a.viewCache),z(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Mv(t,a.changes,a.viewCache.eventCache.getNode(),null)}function HP(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Fe,(a,c)=>{s.push(Ni(a,c))}),n.isFullyInitialized()&&s.push(kv(n.getNode())),Mv(t,s,n.getNode(),e)}function Mv(t,e,n,s){const o=s?[s]:t.eventRegistrations_;return fP(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va;class Fv{constructor(){this.views=new Map}}function GP(t){z(!va,"__referenceConstructor has already been defined"),va=t}function KP(){return z(va,"Reference.ts has not been loaded"),va}function qP(t){return t.views.size===0}function Lf(t,e,n,s){const o=e.source.queryId;if(o!==null){const a=t.views.get(o);return z(a!=null,"SyncTree gave us an op for an invalid query."),g_(a,e,n,s)}else{let a=[];for(const c of t.views.values())a=a.concat(g_(c,e,n,s));return a}}function Uv(t,e,n,s,o){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let f=ga(n,o?s:null),h=!1;f?h=!0:s instanceof ne?(f=Af(n,s),h=!1):(f=ne.EMPTY_NODE,h=!1);const m=ba(new fr(f,h,!1),new fr(s,o,!1));return new zP(e,m)}return c}function QP(t,e,n,s,o,a){const c=Uv(t,e,s,o,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),VP(c,n),HP(c,n)}function YP(t,e,n,s){const o=e._queryIdentifier,a=[];let c=[];const f=hr(t);if(o==="default")for(const[h,m]of t.views.entries())c=c.concat(m_(m,n,s)),p_(m)&&(t.views.delete(h),m.query._queryParams.loadsAllData()||a.push(m.query));else{const h=t.views.get(o);h&&(c=c.concat(m_(h,n,s)),p_(h)&&(t.views.delete(o),h.query._queryParams.loadsAllData()||a.push(h.query)))}return f&&!hr(t)&&a.push(new(KP())(e._repo,e._path)),{removed:a,events:c}}function jv(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ur(t,e){let n=null;for(const s of t.views.values())n=n||$P(s,e);return n}function zv(t,e){if(e._queryParams.loadsAllData())return Fa(t);{const s=e._queryIdentifier;return t.views.get(s)}}function Wv(t,e){return zv(t,e)!=null}function hr(t){return Fa(t)!=null}function Fa(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa;function JP(t){z(!wa,"__referenceConstructor has already been defined"),wa=t}function XP(){return z(wa,"Reference.ts has not been loaded"),wa}let ZP=1;class __{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ie(null),this.pendingWriteTree_=PP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bv(t,e,n,s,o){return gP(t.pendingWriteTree_,e,n,s,o),o?Bi(t,new Wr(Pf(),e,n)):[]}function eN(t,e,n,s){_P(t.pendingWriteTree_,e,n,s);const o=Ie.fromObject(n);return Bi(t,new xi(Pf(),e,o))}function ir(t,e,n=!1){const s=yP(t.pendingWriteTree_,e);if(vP(t.pendingWriteTree_,e)){let a=new Ie(null);return s.snap!=null?a=a.set(_e(),!0):et(s.children,c=>{a=a.set(new Ee(c),!0)}),Bi(t,new pa(s.path,a,n))}else return[]}function ko(t,e,n){return Bi(t,new Wr(Nf(),e,n))}function tN(t,e,n){const s=Ie.fromObject(n);return Bi(t,new xi(Nf(),e,s))}function nN(t,e){return Bi(t,new oo(Nf(),e))}function rN(t,e,n){const s=Mf(t,n);if(s){const o=Ff(s),a=o.path,c=o.queryId,f=at(a,e),h=new oo(xf(c),f);return Uf(t,a,h)}else return[]}function $v(t,e,n,s,o=!1){const a=e._path,c=t.syncPointTree_.get(a);let f=[];if(c&&(e._queryIdentifier==="default"||Wv(c,e))){const h=YP(c,e,n,s);qP(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const m=h.removed;if(f=h.events,!o){const _=m.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=t.syncPointTree_.findOnPath(a,(v,C)=>hr(C));if(_&&!y){const v=t.syncPointTree_.subtree(a);if(!v.isEmpty()){const C=lN(v);for(let I=0;I<C.length;++I){const O=C[I],x=O.query,D=Kv(t,O);t.listenProvider_.startListening(Gs(x),lo(t,x),D.hashFn,D.onComplete)}}}!y&&m.length>0&&!s&&(_?t.listenProvider_.stopListening(Gs(e),null):m.forEach(v=>{const C=t.queryToTagMap.get(Ua(v));t.listenProvider_.stopListening(Gs(v),C)}))}aN(t,m)}return f}function Vv(t,e,n,s){const o=Mf(t,s);if(o!=null){const a=Ff(o),c=a.path,f=a.queryId,h=at(c,e),m=new Wr(xf(f),h,n);return Uf(t,c,m)}else return[]}function iN(t,e,n,s){const o=Mf(t,s);if(o){const a=Ff(o),c=a.path,f=a.queryId,h=at(c,e),m=Ie.fromObject(n),_=new xi(xf(f),h,m);return Uf(t,c,_)}else return[]}function sN(t,e,n,s=!1){const o=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(o,(v,C)=>{const I=at(v,o);a=a||ur(C,I),c=c||hr(C)});let f=t.syncPointTree_.get(o);f?(c=c||hr(f),a=a||ur(f,_e())):(f=new Fv,t.syncPointTree_=t.syncPointTree_.set(o,f));let h;a!=null?h=!0:(h=!1,a=ne.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((C,I)=>{const O=ur(I,_e());O&&(a=a.updateImmediateChild(C,O))}));const m=Wv(f,e);if(!m&&!e._queryParams.loadsAllData()){const v=Ua(e);z(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const C=uN();t.queryToTagMap.set(v,C),t.tagToQueryMap.set(C,v)}const _=Ma(t.pendingWriteTree_,o);let y=QP(f,e,n,_,a,h);if(!m&&!c&&!s){const v=zv(f,e);y=y.concat(cN(t,e,v))}return y}function bf(t,e,n){const o=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,f)=>{const h=at(c,e),m=ur(f,h);if(m)return m});return Av(o,e,a,n,!0)}function oN(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(m,_)=>{const y=at(m,n);s=s||ur(_,y)});let o=t.syncPointTree_.get(n);o?s=s||ur(o,_e()):(o=new Fv,t.syncPointTree_=t.syncPointTree_.set(n,o));const a=s!=null,c=a?new fr(s,!0,!1):null,f=Ma(t.pendingWriteTree_,e._path),h=Uv(o,e,f,a?c.getNode():ne.EMPTY_NODE,a);return BP(h)}function Bi(t,e){return Hv(e,t.syncPointTree_,null,Ma(t.pendingWriteTree_,_e()))}function Hv(t,e,n,s){if(ce(t.path))return Gv(t,e,n,s);{const o=e.get(_e());n==null&&o!=null&&(n=ur(o,_e()));let a=[];const c=de(t.path),f=t.operationForChild(c),h=e.children.get(c);if(h&&f){const m=n?n.getImmediateChild(c):null,_=Ov(s,c);a=a.concat(Hv(f,h,m,_))}return o&&(a=a.concat(Lf(o,t,s,n))),a}}function Gv(t,e,n,s){const o=e.get(_e());n==null&&o!=null&&(n=ur(o,_e()));let a=[];return e.children.inorderTraversal((c,f)=>{const h=n?n.getImmediateChild(c):null,m=Ov(s,c),_=t.operationForChild(c);_&&(a=a.concat(Gv(_,f,h,m)))}),o&&(a=a.concat(Lf(o,t,s,n))),a}function Kv(t,e){const n=e.query,s=lo(t,n);return{hashFn:()=>(WP(e)||ne.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?rN(t,n._path,s):nN(t,n._path);{const a=nR(o,n);return $v(t,n,null,a)}}}}function lo(t,e){const n=Ua(e);return t.queryToTagMap.get(n)}function Ua(t){return t._path.toString()+"$"+t._queryIdentifier}function Mf(t,e){return t.tagToQueryMap.get(e)}function Ff(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ee(t.substr(0,e))}}function Uf(t,e,n){const s=t.syncPointTree_.get(e);z(s,"Missing sync point for query tag that we're tracking");const o=Ma(t.pendingWriteTree_,e);return Lf(s,n,o,null)}function lN(t){return t.fold((e,n,s)=>{if(n&&hr(n))return[Fa(n)];{let o=[];return n&&(o=jv(n)),et(s,(a,c)=>{o=o.concat(c)}),o}})}function Gs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(XP())(t._repo,t._path):t}function aN(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=Ua(s),a=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(a)}}}function uN(){return ZP++}function cN(t,e,n){const s=e._path,o=lo(t,e),a=Kv(t,n),c=t.listenProvider_.startListening(Gs(e),o,a.hashFn,a.onComplete),f=t.syncPointTree_.subtree(s);if(o)z(!hr(f.value),"If we're adding a query, it shouldn't be shadowed");else{const h=f.fold((m,_,y)=>{if(!ce(m)&&_&&hr(_))return[Fa(_).query];{let v=[];return _&&(v=v.concat(jv(_).map(C=>C.query))),et(y,(C,I)=>{v=v.concat(I)}),v}});for(let m=0;m<h.length;++m){const _=h[m];t.listenProvider_.stopListening(Gs(_),lo(t,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new jf(n)}node(){return this.node_}}class zf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Me(this.path_,e);return new zf(this.syncTree_,n)}node(){return bf(this.syncTree_,this.path_)}}const dN=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},y_=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fN(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hN(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fN=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},hN=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&z(!1,"Unexpected increment value: "+s);const o=e.node();if(z(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const c=o.getValue();return typeof c!="number"?s:c+s},qv=function(t,e,n,s){return Wf(e,new zf(n,t),s)},Qv=function(t,e,n){return Wf(t,new jf(e),n)};function Wf(t,e,n){const s=t.getPriority().val(),o=y_(s,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,f=y_(c.getValue(),e,n);return f!==c.getValue()||o!==c.getPriority().val()?new qe(f,$e(o)):t}else{const c=t;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new qe(o))),c.forEachChild(Fe,(f,h)=>{const m=Wf(h,e.getImmediateChild(f),n);m!==h&&(a=a.updateImmediateChild(f,m))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function $f(t,e){let n=e instanceof Ee?e:new Ee(e),s=t,o=de(n);for(;o!==null;){const a=ki(s.node.children,o)||{children:{},childCount:0};s=new Bf(o,s,a),n=Te(n),o=de(n)}return s}function $i(t){return t.node.value}function Yv(t,e){t.node.value=e,Ud(t)}function Jv(t){return t.node.childCount>0}function pN(t){return $i(t)===void 0&&!Jv(t)}function ja(t,e){et(t.node.children,(n,s)=>{e(new Bf(n,t,s))})}function Xv(t,e,n,s){n&&e(t),ja(t,o=>{Xv(o,e,!0)})}function mN(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Ro(t){return new Ee(t.parent===null?t.name:Ro(t.parent)+"/"+t.name)}function Ud(t){t.parent!==null&&gN(t.parent,t.name,t)}function gN(t,e,n){const s=pN(n),o=cn(t.node.children,e);s&&o?(delete t.node.children[e],t.node.childCount--,Ud(t)):!s&&!o&&(t.node.children[e]=n.node,t.node.childCount++,Ud(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=/[\[\].#$\/\u0000-\u001F\u007F]/,yN=/[\[\].#$\u0000-\u001F\u007F]/,ld=10*1024*1024,Vf=function(t){return typeof t=="string"&&t.length!==0&&!_N.test(t)},Zv=function(t){return typeof t=="string"&&t.length!==0&&!yN.test(t)},vN=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zv(t)},wN=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!yf(t)||t&&typeof t=="object"&&cn(t,".sv")},ew=function(t,e,n,s){s&&e===void 0||za(Na(t,"value"),e,n)},za=function(t,e,n){const s=n instanceof Ee?new MR(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Lr(s));if(typeof e=="function")throw new Error(t+"contains a function "+Lr(s)+" with contents = "+e.toString());if(yf(e))throw new Error(t+"contains "+e.toString()+" "+Lr(s));if(typeof e=="string"&&e.length>ld/3&&xa(e)>ld)throw new Error(t+"contains a string greater than "+ld+" utf8 bytes "+Lr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,a=!1;if(et(e,(c,f)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!Vf(c)))throw new Error(t+" contains an invalid key ("+c+") "+Lr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FR(s,c),za(t,f,s),UR(s)}),o&&a)throw new Error(t+' contains ".value" child '+Lr(s)+" in addition to actual children.")}},EN=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=no(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!Vf(a[c]))throw new Error(t+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(bR);let o=null;for(n=0;n<e.length;n++){if(s=e[n],o!==null&&Lt(o,s))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},SN=function(t,e,n,s){const o=Na(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const a=[];et(e,(c,f)=>{const h=new Ee(c);if(za(o,f,Me(n,h)),Cf(h)===".priority"&&!wN(f))throw new Error(o+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(h)}),EN(o,a)},tw=function(t,e,n,s){if(!Zv(n))throw new Error(Na(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},CN=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),tw(t,e,n)},nw=function(t,e){if(de(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},IN=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Vf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!vN(n))throw new Error(Na(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hf(t,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],a=o.getPath();n!==null&&!vv(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(o)}n&&t.eventLists_.push(n)}function bt(t,e,n){Hf(t,n),kN(t,s=>Lt(s,e)||Lt(e,s))}function kN(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const o=t.eventLists_[s];if(o){const a=o.path;e(a)?(RN(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function RN(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Bs&&Ze("event: "+n.toString()),Wi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="repo_interrupt",NN=25;class xN{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new TN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ha(),this.transactionQueueTree_=new Bf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function AN(t,e,n){if(t.stats_=Ef(t.repoInfo_),t.forceRestClient_||oR())t.server_=new fa(t.repoInfo_,(s,o,a,c)=>{v_(t,s,o,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>w_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ve(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Tn(t.repoInfo_,e,(s,o,a,c)=>{v_(t,s,o,a,c)},s=>{w_(t,s)},s=>{ON(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=dR(t.repoInfo_,()=>new cP(t.stats_,t.server_)),t.infoData_=new sP,t.infoSyncTree_=new __({startListening:(s,o,a,c)=>{let f=[];const h=t.infoData_.getNode(s._path);return h.isEmpty()||(f=ko(t.infoSyncTree_,s._path,h),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),Gf(t,"connected",!1),t.serverSyncTree_=new __({startListening:(s,o,a,c)=>(t.server_.listen(s,a,o,(f,h)=>{const m=c(f,h);bt(t.eventQueue_,s._path,m)}),[]),stopListening:(s,o)=>{t.server_.unlisten(s,o)}})}function rw(t){const n=t.infoData_.getNode(new Ee(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Wa(t){return dN({timestamp:rw(t)})}function v_(t,e,n,s,o){t.dataUpdateCount++;const a=new Ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(o)if(s){const h=na(n,m=>$e(m));c=iN(t.serverSyncTree_,a,h,o)}else{const h=$e(n);c=Vv(t.serverSyncTree_,a,h,o)}else if(s){const h=na(n,m=>$e(m));c=tN(t.serverSyncTree_,a,h)}else{const h=$e(n);c=ko(t.serverSyncTree_,a,h)}let f=a;c.length>0&&(f=Oi(t,a)),bt(t.eventQueue_,f,c)}function w_(t,e){Gf(t,"connected",e),e===!1&&MN(t)}function ON(t,e){et(e,(n,s)=>{Gf(t,n,s)})}function Gf(t,e,n){const s=new Ee("/.info/"+e),o=$e(n);t.infoData_.updateSnapshot(s,o);const a=ko(t.infoSyncTree_,s,o);bt(t.eventQueue_,s,a)}function Kf(t){return t.nextWriteId_++}function DN(t,e,n){const s=oN(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(o=>{const a=$e(o).withIndex(e._queryParams.getIndex());sN(t.serverSyncTree_,e,n,!0);let c;if(e._queryParams.loadsAllData())c=ko(t.serverSyncTree_,e._path,a);else{const f=lo(t.serverSyncTree_,e);c=Vv(t.serverSyncTree_,e._path,a,f)}return bt(t.eventQueue_,e._path,c),$v(t.serverSyncTree_,e,n,null,!0),a},o=>(Po(t,"get for query "+Ve(e)+" failed: "+o),Promise.reject(new Error(o))))}function LN(t,e,n,s,o){Po(t,"set",{path:e.toString(),value:n,priority:s});const a=Wa(t),c=$e(n,s),f=bf(t.serverSyncTree_,e),h=Qv(c,f,a),m=Kf(t),_=Bv(t.serverSyncTree_,e,h,m,!0);Hf(t.eventQueue_,_),t.server_.put(e.toString(),c.val(!0),(v,C)=>{const I=v==="ok";I||ut("set at "+e+" failed: "+v);const O=ir(t.serverSyncTree_,m,!I);bt(t.eventQueue_,e,O),jd(t,o,v,C)});const y=Qf(t,e);Oi(t,y),bt(t.eventQueue_,y,[])}function bN(t,e,n,s){Po(t,"update",{path:e.toString(),value:n});let o=!0;const a=Wa(t),c={};if(et(n,(f,h)=>{o=!1,c[f]=qv(Me(e,f),$e(h),t.serverSyncTree_,a)}),o)Ze("update() called with empty data.  Don't do anything."),jd(t,s,"ok",void 0);else{const f=Kf(t),h=eN(t.serverSyncTree_,e,c,f);Hf(t.eventQueue_,h),t.server_.merge(e.toString(),n,(m,_)=>{const y=m==="ok";y||ut("update at "+e+" failed: "+m);const v=ir(t.serverSyncTree_,f,!y),C=v.length>0?Oi(t,e):e;bt(t.eventQueue_,C,v),jd(t,s,m,_)}),et(n,m=>{const _=Qf(t,Me(e,m));Oi(t,_)}),bt(t.eventQueue_,e,[])}}function MN(t){Po(t,"onDisconnectEvents");const e=Wa(t),n=ha();Od(t.onDisconnect_,_e(),(o,a)=>{const c=qv(o,a,t.serverSyncTree_,e);Rv(n,o,c)});let s=[];Od(n,_e(),(o,a)=>{s=s.concat(ko(t.serverSyncTree_,o,a));const c=Qf(t,o);Oi(t,c)}),t.onDisconnect_=ha(),bt(t.eventQueue_,_e(),s)}function FN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(PN)}function Po(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ze(n,...e)}function jd(t,e,n,s){e&&Wi(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let a=o;s&&(a+=": "+s);const c=new Error(a);c.code=o,e(c)}})}function iw(t,e,n){return bf(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function qf(t,e=t.transactionQueueTree_){if(e||Ba(t,e),$i(e)){const n=ow(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&UN(t,Ro(e),n)}else Jv(e)&&ja(e,n=>{qf(t,n)})}function UN(t,e,n){const s=n.map(m=>m.currentWriteId),o=iw(t,e,s);let a=o;const c=o.hash();for(let m=0;m<n.length;m++){const _=n[m];z(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const y=at(e,_.path);a=a.updateChild(y,_.currentOutputSnapshotRaw)}const f=a.val(!0),h=e;t.server_.put(h.toString(),f,m=>{Po(t,"transaction put response",{path:h.toString(),status:m});let _=[];if(m==="ok"){const y=[];for(let v=0;v<n.length;v++)n[v].status=2,_=_.concat(ir(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&y.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();Ba(t,$f(t.transactionQueueTree_,e)),qf(t,t.transactionQueueTree_),bt(t.eventQueue_,e,_);for(let v=0;v<y.length;v++)Wi(y[v])}else{if(m==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{ut("transaction at "+h.toString()+" failed: "+m);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=m}Oi(t,e)}},c)}function Oi(t,e){const n=sw(t,e),s=Ro(n),o=ow(t,n);return jN(t,o,s),s}function jN(t,e,n){if(e.length===0)return;const s=[];let o=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const h=e[f],m=at(n,h.path);let _=!1,y;if(z(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)_=!0,y=h.abortReason,o=o.concat(ir(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=NN)_=!0,y="maxretry",o=o.concat(ir(t.serverSyncTree_,h.currentWriteId,!0));else{const v=iw(t,h.path,c);h.currentInputSnapshot=v;const C=e[f].update(v.val());if(C!==void 0){za("transaction failed: Data returned ",C,h.path);let I=$e(C);typeof C=="object"&&C!=null&&cn(C,".priority")||(I=I.updatePriority(v.getPriority()));const x=h.currentWriteId,D=Wa(t),W=Qv(I,v,D);h.currentOutputSnapshotRaw=I,h.currentOutputSnapshotResolved=W,h.currentWriteId=Kf(t),c.splice(c.indexOf(x),1),o=o.concat(Bv(t.serverSyncTree_,h.path,W,h.currentWriteId,h.applyLocally)),o=o.concat(ir(t.serverSyncTree_,x,!0))}else _=!0,y="nodata",o=o.concat(ir(t.serverSyncTree_,h.currentWriteId,!0))}bt(t.eventQueue_,n,o),o=[],_&&(e[f].status=2,function(v){setTimeout(v,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(y==="nodata"?s.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):s.push(()=>e[f].onComplete(new Error(y),!1,null))))}Ba(t,t.transactionQueueTree_);for(let f=0;f<s.length;f++)Wi(s[f]);qf(t,t.transactionQueueTree_)}function sw(t,e){let n,s=t.transactionQueueTree_;for(n=de(e);n!==null&&$i(s)===void 0;)s=$f(s,n),e=Te(e),n=de(e);return s}function ow(t,e){const n=[];return lw(t,e,n),n.sort((s,o)=>s.order-o.order),n}function lw(t,e,n){const s=$i(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);ja(e,o=>{lw(t,o,n)})}function Ba(t,e){const n=$i(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,Yv(e,n.length>0?n:void 0)}ja(e,s=>{Ba(t,s)})}function Qf(t,e){const n=Ro(sw(t,e)),s=$f(t.transactionQueueTree_,e);return mN(s,o=>{ad(t,o)}),ad(t,s),Xv(s,o=>{ad(t,o)}),n}function ad(t,e){const n=$i(e);if(n){const s=[];let o=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(z(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(z(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),o=o.concat(ir(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&s.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Yv(e,void 0):n.length=a+1,bt(t.eventQueue_,Ro(e),o);for(let c=0;c<s.length;c++)Wi(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function WN(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ut(`Invalid query segment '${n}' in query '${t}'`)}return e}const E_=function(t,e){const n=BN(t),s=n.namespace;n.domain==="firebase.com"&&Nn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Nn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||J0();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uv(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new Ee(n.pathString)}},BN=function(t){let e="",n="",s="",o="",a="",c=!0,f="https",h=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(f=t.substring(0,m-1),t=t.substring(m+2));let _=t.indexOf("/");_===-1&&(_=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(_,y)),_<y&&(o=zN(t.substring(_,y)));const v=WN(t.substring(Math.min(t.length,y)));m=e.indexOf(":"),m>=0?(c=f==="https"||f==="wss",h=parseInt(e.substring(m+1),10)):m=e.length;const C=e.slice(0,m);if(C.toLowerCase()==="localhost")n="localhost";else if(C.split(".").length<=2)n=C;else{const I=e.indexOf(".");s=e.substring(0,I).toLowerCase(),n=e.substring(I+1),a=s}"ns"in v&&(a=v.ns)}return{host:e,port:h,domain:n,subdomain:s,secure:c,scheme:f,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$N=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let o;const a=new Array(8);for(o=7;o>=0;o--)a[o]=S_.charAt(n%64),n=Math.floor(n/64);z(n===0,"Cannot push at time == 0");let c=a.join("");if(s){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)c+=S_.charAt(e[o]);return z(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ve(this.snapshot.exportVal())}}class HN{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return ce(this._path)?null:Cf(this._path)}get ref(){return new An(this._repo,this._path)}get _queryIdentifier(){const e=l_(this._queryParams),n=vf(e);return n==="{}"?"default":n}get _queryObject(){return l_(this._queryParams)}isEqual(e){if(e=st(e),!(e instanceof Yf))return!1;const n=this._repo===e._repo,s=vv(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+LR(this._path)}}class An extends Yf{constructor(e,n){super(e,n,new Rf,!1)}get parent(){const e=yv(this._path);return e===null?null:new An(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ao{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ee(e),s=uo(this.ref,e);return new ao(this._node.getChild(n),s,Fe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new ao(o,uo(this.ref,s),Fe)))}hasChild(e){const n=new Ee(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ks(t,e){return t=st(t),t._checkNotDeleted("ref"),e!==void 0?uo(t._root,e):t._root}function uo(t,e){return t=st(t),de(t._path)===null?CN("child","path",e):tw("child","path",e),new An(t._repo,Me(t._path,e))}function KN(t,e){t=st(t),nw("push",t._path),ew("push",e,t._path,!0);const n=rw(t._repo),s=$N(n),o=uo(t,s),a=uo(t,s);let c;return e!=null?c=aw(a,e).then(()=>a):c=Promise.resolve(a),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}function aw(t,e){t=st(t),nw("set",t._path),ew("set",e,t._path,!1);const n=new _o;return LN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function C_(t,e){SN("update",e,t._path);const n=new _o;return bN(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function zd(t){t=st(t);const e=new GN(()=>{}),n=new Jf(e);return DN(t._repo,t,n).then(s=>new ao(s,new An(t._repo,t._path),t._queryParams.getIndex()))}class Jf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new VN("value",this,new ao(e.snapshotNode,new An(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HN(this,e,n):null}matches(e){return e instanceof Jf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}GP(An);JP(An);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="FIREBASE_DATABASE_EMULATOR_HOST",Wd={};let QN=!1;function YN(t,e,n,s){t.repoInfo_=new uv(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function JN(t,e,n,s,o){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||Nn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ze("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=E_(a,o),f=c.repoInfo,h;typeof process<"u"&&$g&&(h=$g[qN]),h?(a=`http://${h}?ns=${f.namespace}`,c=E_(a,o),f=c.repoInfo):c.repoInfo.secure;const m=new aR(t.name,t.options,e);IN("Invalid Firebase Database URL",c),ce(c.path)||Nn("Database URL must point to the root of a Firebase Database (not including a child path).");const _=ZN(f,t,m,new lR(t.name,n));return new ex(_,t)}function XN(t,e){const n=Wd[e];(!n||n[t.key]!==t)&&Nn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),FN(t),delete n[t.key]}function ZN(t,e,n,s){let o=Wd[e.name];o||(o={},Wd[e.name]=o);let a=o[t.toURLString()];return a&&Nn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new xN(t,QN,n,s),o[t.toURLString()]=a,a}class ex{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(AN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new An(this._repo,_e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Nn("Cannot call "+e+" on a deleted database.")}}function Xf(t=dy(),e){const n=af(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=oI("database");s&&tx(n,...s)}return n}function tx(t,e,n,s={}){t=st(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Nn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let a;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&Nn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Jl(Jl.OWNER);else if(s.mockUserToken){const c=typeof s.mockUserToken=="string"?s.mockUserToken:lI(s.mockUserToken,t.app.options.projectId);a=new Jl(c)}YN(o,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){H0(ji),Ri(new Fr("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return JN(s,o,a,n)},"PUBLIC").setMultipleInstances(!0)),lr(Vg,Hg,t),lr(Vg,Hg,"esm2017")}Tn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Tn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};nx();var rx="firebase",ix="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(rx,ix,"app");const sx={apiKey:"AIzaSyC2eim7o52-1qm8JHc8KpeReeMtmvILGdU",authDomain:"comidadiri.firebaseapp.com",databaseURL:"https://comidadiri-default-rtdb.firebaseio.com",projectId:"comidadiri",storageBucket:"comidadiri.firebasestorage.app",messagingSenderId:"647627909900",appId:"1:647627909900:web:fab8cb7fec7c7015153729",measurementId:"G-WFB7HSTPQD"},$a=wg().length?wg()[0]:cy(sx),ox=Xf($a);class lx{async getUserRoles(e){const n=Xf($a),s=Ks(n,`users/${e}/roles`),o=await zd(s);if(o.exists()){const a=o.val(),c=[];return a.admin===!0&&c.push(rn.ADMIN),c.length===0&&c.push(rn.USER),c}return[rn.USER]}}const Fs=$0($a);class ax{constructor(){Or(this,"databaseService");this.databaseService=new lx}signIn(e,n){return Pk(Fs,e,n)}signUp(e,n){return Rk(Fs,e,n)}signOut(){return Ok(Fs)}onAuthStateChanged(e){return Ak(Fs,e)}getCurrentUser(){return Fs.currentUser}async getUserRoles(e){return e.email==="admin@admin.com"?[rn.ADMIN]:this.databaseService.getUserRoles(e.uid)}}const co=new ax,Va=N.createContext({user:null,roles:null}),ux=({children:t})=>{const[e,n]=N.useState(null),[s,o]=N.useState(null);return N.useEffect(()=>co.onAuthStateChanged(async c=>{if(n(c),c)try{const f=await co.getUserRoles(c);o(f)}catch(f){console.error("Error al obtener los roles:",f),o(null)}else o(null)}),[]),A.jsx(Va.Provider,{value:{user:e,roles:s},children:t})},cx=()=>{const{user:t,roles:e}=N.useContext(Va),n=mo(),s=async()=>{try{await co.signOut(),n("/login")}catch(o){console.error("Error al cerrar sesin:",o)}};return A.jsx("nav",{className:"navbar",children:A.jsxs("ul",{className:"nav-menu",children:[A.jsx("li",{children:A.jsx(Zn,{to:"/",children:"Home"})})," ",t&&e&&(e.includes(rn.USER)||e.includes(rn.ADMIN))&&A.jsx("li",{children:A.jsx(Zn,{to:"/menu",children:"Menu"})}),t&&e&&e.includes(rn.ADMIN)&&A.jsx("li",{children:A.jsx(Zn,{to:"/stock",children:"Stock"})}),t&&e&&e.includes(rn.ADMIN)&&A.jsx("li",{children:A.jsx(Zn,{to:"/admin",children:"Admin"})}),!t&&A.jsx("li",{children:A.jsx(Zn,{to:"/login",children:"Login"})})," ",!t&&A.jsx("li",{children:A.jsx(Zn,{to:"/signUp",children:"Registro"})})," ",t&&A.jsx("li",{children:A.jsx("button",{onClick:s,children:"Logout"})})," "]})})},I_=()=>A.jsxs("div",{className:"home-page-container",children:[A.jsxs("div",{className:"welcome-message",children:[A.jsx("h1",{children:"Bienvenido al restaurante XYZ"}),A.jsx("p",{children:"Por favor, haga login para acceder al men de pedidos."})]}),A.jsx("div",{className:"restaurant-image",children:A.jsx("img",{src:"images/restaurantLogo.png",alt:"Restaurant XYZ"})})]}),dx=()=>{const[t,e]=N.useState(""),[n,s]=N.useState(""),[o,a]=N.useState(""),c=mo(),f=async h=>{h.preventDefault(),a("");try{const m=await co.signIn(t,n);console.log("Usuario autenticado:",m.user),c("/menu")}catch(m){console.error("Error al iniciar sesin:",m),a(m.message)}};return A.jsx("div",{className:"login-container",children:A.jsxs("form",{className:"login-form",onSubmit:f,children:[A.jsx("h2",{className:"login-title",children:"Iniciar Sesin"})," ",A.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:h=>e(h.target.value),className:"login-input"})," ",A.jsx("input",{type:"password",placeholder:"Contrasea",value:n,onChange:h=>s(h.target.value),className:"login-input"})," ",A.jsx("button",{type:"submit",className:"login-button",children:"Ingresar"})," ",o&&A.jsx("p",{className:"error-message",children:o})," "]})})};class fx{constructor(){Or(this,"db");this.db=Xf($a)}async getAllUsers(){const e=Ks(this.db,"users"),n=await zd(e);return n.exists()?n.val():{}}async updateUserAdminRole(e,n){const s=Ks(this.db,`users/${e}/roles`);await C_(s,{admin:n})}async setUserRoles(e,n){const s=Ks(this.db,`users/${e}`);(await zd(s)).exists()?await C_(s,n):await aw(s,n)}}const Bd=new fx,hx=()=>{const[t,e]=N.useState(""),[n,s]=N.useState(""),[o,a]=N.useState(""),[c,f]=N.useState(""),h=mo(),m=async _=>{_.preventDefault(),a("");try{const y=await co.signUp(t,n);console.log("Usuario registrado:",y.user),await Bd.setUserRoles(y.user.uid,{email:y.user.email,roles:{admin:!1}}),f("Registro exitoso. Redirigiendo al menu..."),setTimeout(()=>{h("/menu")},2e3)}catch(y){console.error("Error al registrarse:",y),a(y.message)}};return A.jsx("div",{className:"signUp-container",children:A.jsxs("form",{className:"signUp-form",onSubmit:m,children:[A.jsx("h2",{className:"signUp-title",children:"Registrarse"})," ",A.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:_=>e(_.target.value),className:"signUp-input"})," ",A.jsx("input",{type:"password",placeholder:"Contrasea",value:n,onChange:_=>s(_.target.value),className:"signUp-input"})," ",A.jsx("button",{type:"submit",className:"signUp-button",children:"Registrarse"})," ",o&&A.jsx("p",{className:"error-message",children:o})," ",c&&A.jsx("p",{className:"success-message",children:c})," "]})})},px=()=>{const[t,e]=N.useState([]),[n,s]=N.useState(""),o=async()=>{try{const c=await Bd.getAllUsers(),f=Object.entries(c).map(([h,m])=>({uid:h,email:m.email,roles:m.roles||{admin:!1}}));e(f)}catch(c){console.error("Error fetching users:",c),s("Error al cargar usuarios")}},a=async(c,f)=>{try{await Bd.updateUserAdminRole(c,f),o()}catch(h){console.error("Error updating role:",h),s("No se pudo actualizar el rol")}};return N.useEffect(()=>{o()},[]),A.jsxs("div",{className:"admin-panel-container",children:[" ",A.jsx("h1",{className:"admin-panel-title",children:"Administracin"}),A.jsx("h2",{className:"admin-panel-subtitle",children:"Panel de Administracin"}),n&&A.jsx("p",{className:"admin-panel-error",children:n})," ",A.jsxs("table",{className:"admin-panel-table",children:[" ",A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{children:"Email"}),A.jsx("th",{children:"Es Admin?"}),A.jsx("th",{children:"Accin"})]})}),A.jsx("tbody",{children:t.map(c=>A.jsxs("tr",{children:[A.jsx("td",{children:c.email}),A.jsx("td",{children:c.roles.admin?"S":"No"}),A.jsx("td",{children:c.roles.admin?A.jsx("button",{className:"admin-panel-button",onClick:()=>a(c.uid,!1),children:"Remover Admin"}):A.jsx("button",{className:"admin-panel-button",onClick:()=>a(c.uid,!0),children:"Aadir Admin"})})]},c.uid))})]})]})};var ud={exports:{}},cd={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function mx(){if(T_)return cd;T_=1;var t=ka();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,o=t.useRef,a=t.useEffect,c=t.useMemo,f=t.useDebugValue;return cd.useSyncExternalStoreWithSelector=function(h,m,_,y,v){var C=o(null);if(C.current===null){var I={hasValue:!1,value:null};C.current=I}else I=C.current;C=c(function(){function x(Y){if(!D){if(D=!0,W=Y,Y=y(Y),v!==void 0&&I.hasValue){var J=I.value;if(v(J,Y))return b=J}return b=Y}if(J=b,n(W,Y))return J;var se=y(Y);return v!==void 0&&v(J,se)?(W=Y,J):(W=Y,b=se)}var D=!1,W,b,B=_===void 0?null:_;return[function(){return x(m())},B===null?void 0:function(){return x(B())}]},[m,_,y,v]);var O=s(h,C[0],C[1]);return a(function(){I.hasValue=!0,I.value=O},[O]),f(O),O},cd}var k_;function gx(){return k_||(k_=1,ud.exports=mx()),ud.exports}var _x=gx();function yx(t){t()}function vx(){let t=null,e=null;return{clear(){t=null,e=null},notify(){yx(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const o=e={callback:n,next:null,prev:e};return o.prev?o.prev.next=o:t=o,function(){!s||t===null||(s=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var R_={notify(){},get:()=>[]};function wx(t,e){let n,s=R_,o=0,a=!1;function c(O){_();const x=s.subscribe(O);let D=!1;return()=>{D||(D=!0,x(),y())}}function f(){s.notify()}function h(){I.onStateChange&&I.onStateChange()}function m(){return a}function _(){o++,n||(n=t.subscribe(h),s=vx())}function y(){o--,n&&o===0&&(n(),n=void 0,s.clear(),s=R_)}function v(){a||(a=!0,_())}function C(){a&&(a=!1,y())}const I={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:h,isSubscribed:m,trySubscribe:v,tryUnsubscribe:C,getListeners:()=>s};return I}var Ex=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sx=Ex(),Cx=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ix=Cx(),Tx=()=>Sx||Ix?N.useLayoutEffect:N.useEffect,kx=Tx(),dd=Symbol.for("react-redux-context"),fd=typeof globalThis<"u"?globalThis:{};function Rx(){if(!N.createContext)return{};const t=fd[dd]??(fd[dd]=new Map);let e=t.get(N.createContext);return e||(e=N.createContext(null),t.set(N.createContext,e)),e}var pr=Rx();function Px(t){const{children:e,context:n,serverState:s,store:o}=t,a=N.useMemo(()=>{const h=wx(o);return{store:o,subscription:h,getServerState:s?()=>s:void 0}},[o,s]),c=N.useMemo(()=>o.getState(),[o]);kx(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,c]);const f=n||pr;return N.createElement(f.Provider,{value:a},e)}var Nx=Px;function Zf(t=pr){return function(){return N.useContext(t)}}var uw=Zf();function cw(t=pr){const e=t===pr?uw:Zf(t),n=()=>{const{store:s}=e();return s};return Object.assign(n,{withTypes:()=>n}),n}var xx=cw();function Ax(t=pr){const e=t===pr?xx:cw(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Ox=Ax(),Dx=(t,e)=>t===e;function Lx(t=pr){const e=t===pr?uw:Zf(t),n=(s,o={})=>{const{equalityFn:a=Dx}=typeof o=="function"?{equalityFn:o}:o,c=e(),{store:f,subscription:h,getServerState:m}=c;N.useRef(!0);const _=N.useCallback({[s.name](v){return s(v)}}[s.name],[s]),y=_x.useSyncExternalStoreWithSelector(h.addNestedSub,f.getState,m||f.getState,_,a);return N.useDebugValue(y),y};return Object.assign(n,{withTypes:()=>n}),n}var eh=Lx();function Xe(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var bx=typeof Symbol=="function"&&Symbol.observable||"@@observable",P_=bx,hd=()=>Math.random().toString(36).substring(7).split("").join("."),Mx={INIT:`@@redux/INIT${hd()}`,REPLACE:`@@redux/REPLACE${hd()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hd()}`},Ea=Mx;function th(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function dw(t,e,n){if(typeof t!="function")throw new Error(Xe(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Xe(1));return n(dw)(t,e)}let s=t,o=e,a=new Map,c=a,f=0,h=!1;function m(){c===a&&(c=new Map,a.forEach((x,D)=>{c.set(D,x)}))}function _(){if(h)throw new Error(Xe(3));return o}function y(x){if(typeof x!="function")throw new Error(Xe(4));if(h)throw new Error(Xe(5));let D=!0;m();const W=f++;return c.set(W,x),function(){if(D){if(h)throw new Error(Xe(6));D=!1,m(),c.delete(W),a=null}}}function v(x){if(!th(x))throw new Error(Xe(7));if(typeof x.type>"u")throw new Error(Xe(8));if(typeof x.type!="string")throw new Error(Xe(17));if(h)throw new Error(Xe(9));try{h=!0,o=s(o,x)}finally{h=!1}return(a=c).forEach(W=>{W()}),x}function C(x){if(typeof x!="function")throw new Error(Xe(10));s=x,v({type:Ea.REPLACE})}function I(){const x=y;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(Xe(11));function W(){const B=D;B.next&&B.next(_())}return W(),{unsubscribe:x(W)}},[P_](){return this}}}return v({type:Ea.INIT}),{dispatch:v,subscribe:y,getState:_,replaceReducer:C,[P_]:I}}function Fx(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ea.INIT})>"u")throw new Error(Xe(12));if(typeof n(void 0,{type:Ea.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xe(13))})}function Ux(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const c=e[a];typeof t[c]=="function"&&(n[c]=t[c])}const s=Object.keys(n);let o;try{Fx(n)}catch(a){o=a}return function(c={},f){if(o)throw o;let h=!1;const m={};for(let _=0;_<s.length;_++){const y=s[_],v=n[y],C=c[y],I=v(C,f);if(typeof I>"u")throw f&&f.type,new Error(Xe(14));m[y]=I,h=h||I!==C}return h=h||s.length!==Object.keys(c).length,h?m:c}}function Sa(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...s)=>e(n(...s)))}function jx(...t){return e=>(n,s)=>{const o=e(n,s);let a=()=>{throw new Error(Xe(15))};const c={getState:o.getState,dispatch:(h,...m)=>a(h,...m)},f=t.map(h=>h(c));return a=Sa(...f)(o.dispatch),{...o,dispatch:a}}}function zx(t){return th(t)&&"type"in t&&typeof t.type=="string"}var fw=Symbol.for("immer-nothing"),N_=Symbol.for("immer-draftable"),Tt=Symbol.for("immer-state");function Vt(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Di=Object.getPrototypeOf;function $r(t){return!!t&&!!t[Tt]}function xn(t){var e;return t?hw(t)||Array.isArray(t)||!!t[N_]||!!((e=t.constructor)!=null&&e[N_])||Ga(t)||Ka(t):!1}var Wx=Object.prototype.constructor.toString();function hw(t){if(!t||typeof t!="object")return!1;const e=Di(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Wx}function Ca(t,e){Ha(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function Ha(t){const e=t[Tt];return e?e.type_:Array.isArray(t)?1:Ga(t)?2:Ka(t)?3:0}function $d(t,e){return Ha(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function pw(t,e,n){const s=Ha(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function Bx(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ga(t){return t instanceof Map}function Ka(t){return t instanceof Set}function br(t){return t.copy_||t.base_}function Vd(t,e){if(Ga(t))return new Map(t);if(Ka(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=hw(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[Tt];let o=Reflect.ownKeys(s);for(let a=0;a<o.length;a++){const c=o[a],f=s[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(s[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:t[c]})}return Object.create(Di(t),s)}else{const s=Di(t);if(s!==null&&n)return{...t};const o=Object.create(s);return Object.assign(o,t)}}function nh(t,e=!1){return qa(t)||$r(t)||!xn(t)||(Ha(t)>1&&(t.set=t.add=t.clear=t.delete=$x),Object.freeze(t),e&&Object.entries(t).forEach(([n,s])=>nh(s,!0))),t}function $x(){Vt(2)}function qa(t){return Object.isFrozen(t)}var Vx={};function Vr(t){const e=Vx[t];return e||Vt(0,t),e}var fo;function mw(){return fo}function Hx(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function x_(t,e){e&&(Vr("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Hd(t){Gd(t),t.drafts_.forEach(Gx),t.drafts_=null}function Gd(t){t===fo&&(fo=t.parent_)}function A_(t){return fo=Hx(fo,t)}function Gx(t){const e=t[Tt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function O_(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Tt].modified_&&(Hd(e),Vt(4)),xn(t)&&(t=Ia(e,t),e.parent_||Ta(e,t)),e.patches_&&Vr("Patches").generateReplacementPatches_(n[Tt].base_,t,e.patches_,e.inversePatches_)):t=Ia(e,n,[]),Hd(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==fw?t:void 0}function Ia(t,e,n){if(qa(e))return e;const s=e[Tt];if(!s)return Ca(e,(o,a)=>D_(t,s,e,o,a,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return Ta(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let a=o,c=!1;s.type_===3&&(a=new Set(o),o.clear(),c=!0),Ca(a,(f,h)=>D_(t,s,o,f,h,n,c)),Ta(t,o,!1),n&&t.patches_&&Vr("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function D_(t,e,n,s,o,a,c){if($r(o)){const f=a&&e&&e.type_!==3&&!$d(e.assigned_,s)?a.concat(s):void 0,h=Ia(t,o,f);if(pw(n,s,h),$r(h))t.canAutoFreeze_=!1;else return}else c&&n.add(o);if(xn(o)&&!qa(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ia(t,o),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&Ta(t,o)}}function Ta(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&nh(e,n)}function Kx(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:mw(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=s,a=rh;n&&(o=[s],a=ho);const{revoke:c,proxy:f}=Proxy.revocable(o,a);return s.draft_=f,s.revoke_=c,f}var rh={get(t,e){if(e===Tt)return t;const n=br(t);if(!$d(n,e))return qx(t,n,e);const s=n[e];return t.finalized_||!xn(s)?s:s===pd(t.base_,e)?(md(t),t.copy_[e]=qd(s,t)):s},has(t,e){return e in br(t)},ownKeys(t){return Reflect.ownKeys(br(t))},set(t,e,n){const s=gw(br(t),e);if(s!=null&&s.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const o=pd(br(t),e),a=o==null?void 0:o[Tt];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Bx(n,o)&&(n!==void 0||$d(t.base_,e)))return!0;md(t),Kd(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return pd(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,md(t),Kd(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=br(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){Vt(11)},getPrototypeOf(t){return Di(t.base_)},setPrototypeOf(){Vt(12)}},ho={};Ca(rh,(t,e)=>{ho[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ho.deleteProperty=function(t,e){return ho.set.call(this,t,e,void 0)};ho.set=function(t,e,n){return rh.set.call(this,t[0],e,n,t[0])};function pd(t,e){const n=t[Tt];return(n?br(n):t)[e]}function qx(t,e,n){var o;const s=gw(e,n);return s?"value"in s?s.value:(o=s.get)==null?void 0:o.call(t.draft_):void 0}function gw(t,e){if(!(e in t))return;let n=Di(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=Di(n)}}function Kd(t){t.modified_||(t.modified_=!0,t.parent_&&Kd(t.parent_))}function md(t){t.copy_||(t.copy_=Vd(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Qx=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const c=this;return function(h=a,...m){return c.produce(h,_=>n.call(this,_,...m))}}typeof n!="function"&&Vt(6),s!==void 0&&typeof s!="function"&&Vt(7);let o;if(xn(e)){const a=A_(this),c=qd(e,void 0);let f=!0;try{o=n(c),f=!1}finally{f?Hd(a):Gd(a)}return x_(a,s),O_(o,a)}else if(!e||typeof e!="object"){if(o=n(e),o===void 0&&(o=e),o===fw&&(o=void 0),this.autoFreeze_&&nh(o,!0),s){const a=[],c=[];Vr("Patches").generateReplacementPatches_(e,o,a,c),s(a,c)}return o}else Vt(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...f)=>this.produceWithPatches(c,h=>e(h,...f));let s,o;return[this.produce(e,n,(c,f)=>{s=c,o=f}),s,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){xn(t)||Vt(8),$r(t)&&(t=Yx(t));const e=A_(this),n=qd(t,void 0);return n[Tt].isManual_=!0,Gd(e),n}finishDraft(t,e){const n=t&&t[Tt];(!n||!n.isManual_)&&Vt(9);const{scope_:s}=n;return x_(s,e),O_(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const o=e[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(e=e.slice(n+1));const s=Vr("Patches").applyPatches_;return $r(t)?s(t,e):this.produce(t,o=>s(o,e))}};function qd(t,e){const n=Ga(t)?Vr("MapSet").proxyMap_(t,e):Ka(t)?Vr("MapSet").proxySet_(t,e):Kx(t,e);return(e?e.scope_:mw()).drafts_.push(n),n}function Yx(t){return $r(t)||Vt(10,t),_w(t)}function _w(t){if(!xn(t)||qa(t))return t;const e=t[Tt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Vd(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Vd(t,!0);return Ca(n,(s,o)=>{pw(n,s,_w(o))}),e&&(e.finalized_=!1),n}var kt=new Qx,yw=kt.produce;kt.produceWithPatches.bind(kt);kt.setAutoFreeze.bind(kt);kt.setUseStrictShallowCopy.bind(kt);kt.applyPatches.bind(kt);kt.createDraft.bind(kt);kt.finishDraft.bind(kt);function vw(t){return({dispatch:n,getState:s})=>o=>a=>typeof a=="function"?a(n,s,t):o(a)}var Jx=vw(),Xx=vw,Zx=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sa:Sa.apply(null,arguments)},e1=t=>t&&typeof t.match=="function";function qs(t,e){function n(...s){if(e){let o=e(...s);if(!o)throw new Error(kn(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>zx(s)&&s.type===t,n}var ww=class zs extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,zs.prototype)}static get[Symbol.species](){return zs}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new zs(...e[0].concat(this)):new zs(...e.concat(this))}};function L_(t){return xn(t)?yw(t,()=>{}):t}function b_(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function t1(t){return typeof t=="boolean"}var n1=()=>function(e){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=e??{};let c=new ww;return n&&(t1(n)?c.push(Jx):c.push(Xx(n.extraArgument))),c},r1="RTK_autoBatch",M_=t=>e=>{setTimeout(e,t)},i1=(t={type:"raf"})=>e=>(...n)=>{const s=e(...n);let o=!0,a=!1,c=!1;const f=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:M_(10):t.type==="callback"?t.queueNotification:M_(t.timeout),m=()=>{c=!1,a&&(a=!1,f.forEach(_=>_()))};return Object.assign({},s,{subscribe(_){const y=()=>o&&_(),v=s.subscribe(y);return f.add(_),()=>{v(),f.delete(_)}},dispatch(_){var y;try{return o=!((y=_==null?void 0:_.meta)!=null&&y[r1]),a=!o,a&&(c||(c=!0,h(m))),s.dispatch(_)}finally{o=!0}}})},s1=t=>function(n){const{autoBatch:s=!0}=n??{};let o=new ww(t);return s&&o.push(i1(typeof s=="object"?s:void 0)),o};function o1(t){const e=n1(),{reducer:n=void 0,middleware:s,devTools:o=!0,preloadedState:a=void 0,enhancers:c=void 0}=t;let f;if(typeof n=="function")f=n;else if(th(n))f=Ux(n);else throw new Error(kn(1));let h;typeof s=="function"?h=s(e):h=e();let m=Sa;o&&(m=Zx({trace:!1,...typeof o=="object"&&o}));const _=jx(...h),y=s1(_);let v=typeof c=="function"?c(y):y();const C=m(...v);return dw(f,a,C)}function Ew(t){const e={},n=[];let s;const o={addCase(a,c){const f=typeof a=="string"?a:a.type;if(!f)throw new Error(kn(28));if(f in e)throw new Error(kn(29));return e[f]=c,o},addMatcher(a,c){return n.push({matcher:a,reducer:c}),o},addDefaultCase(a){return s=a,o}};return t(o),[e,n,s]}function l1(t){return typeof t=="function"}function a1(t,e){let[n,s,o]=Ew(e),a;if(l1(t))a=()=>L_(t());else{const f=L_(t);a=()=>f}function c(f=a(),h){let m=[n[h.type],...s.filter(({matcher:_})=>_(h)).map(({reducer:_})=>_)];return m.filter(_=>!!_).length===0&&(m=[o]),m.reduce((_,y)=>{if(y)if($r(_)){const C=y(_,h);return C===void 0?_:C}else{if(xn(_))return yw(_,v=>y(v,h));{const v=y(_,h);if(v===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return _},f)}return c.getInitialState=a,c}var u1=(t,e)=>e1(t)?t.match(e):t(e);function c1(...t){return e=>t.some(n=>u1(n,e))}var d1="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",f1=(t=21)=>{let e="",n=t;for(;n--;)e+=d1[Math.random()*64|0];return e},h1=["name","message","stack","code"],gd=class{constructor(t,e){Or(this,"_type");this.payload=t,this.meta=e}},F_=class{constructor(t,e){Or(this,"_type");this.payload=t,this.meta=e}},p1=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of h1)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},m1=(()=>{function t(e,n,s){const o=qs(e+"/fulfilled",(h,m,_,y)=>({payload:h,meta:{...y||{},arg:_,requestId:m,requestStatus:"fulfilled"}})),a=qs(e+"/pending",(h,m,_)=>({payload:void 0,meta:{..._||{},arg:m,requestId:h,requestStatus:"pending"}})),c=qs(e+"/rejected",(h,m,_,y,v)=>({payload:y,error:(s&&s.serializeError||p1)(h||"Rejected"),meta:{...v||{},arg:_,requestId:m,rejectedWithValue:!!y,requestStatus:"rejected",aborted:(h==null?void 0:h.name)==="AbortError",condition:(h==null?void 0:h.name)==="ConditionError"}}));function f(h){return(m,_,y)=>{const v=s!=null&&s.idGenerator?s.idGenerator(h):f1(),C=new AbortController;let I,O;function x(W){O=W,C.abort()}const D=async function(){var B,Y;let W;try{let J=(B=s==null?void 0:s.condition)==null?void 0:B.call(s,h,{getState:_,extra:y});if(_1(J)&&(J=await J),J===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const se=new Promise((ee,fe)=>{I=()=>{fe({name:"AbortError",message:O||"Aborted"})},C.signal.addEventListener("abort",I)});m(a(v,h,(Y=s==null?void 0:s.getPendingMeta)==null?void 0:Y.call(s,{requestId:v,arg:h},{getState:_,extra:y}))),W=await Promise.race([se,Promise.resolve(n(h,{dispatch:m,getState:_,extra:y,requestId:v,signal:C.signal,abort:x,rejectWithValue:(ee,fe)=>new gd(ee,fe),fulfillWithValue:(ee,fe)=>new F_(ee,fe)})).then(ee=>{if(ee instanceof gd)throw ee;return ee instanceof F_?o(ee.payload,v,h,ee.meta):o(ee,v,h)})])}catch(J){W=J instanceof gd?c(null,v,h,J.payload,J.meta):c(J,v,h)}finally{I&&C.signal.removeEventListener("abort",I)}return s&&!s.dispatchConditionRejection&&c.match(W)&&W.meta.condition||m(W),W}();return Object.assign(D,{abort:x,requestId:v,arg:h,unwrap(){return D.then(g1)}})}}return Object.assign(f,{pending:a,rejected:c,fulfilled:o,settled:c1(c,o),typePrefix:e})}return t.withTypes=()=>t,t})();function g1(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function _1(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var y1=Symbol.for("rtk-slice-createasyncthunk");function v1(t,e){return`${t}/${e}`}function w1({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[y1];return function(o){const{name:a,reducerPath:c=a}=o;if(!a)throw new Error(kn(11));const f=(typeof o.reducers=="function"?o.reducers(C1()):o.reducers)||{},h=Object.keys(f),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(b,B){const Y=typeof b=="string"?b:b.type;if(!Y)throw new Error(kn(12));if(Y in m.sliceCaseReducersByType)throw new Error(kn(13));return m.sliceCaseReducersByType[Y]=B,_},addMatcher(b,B){return m.sliceMatchers.push({matcher:b,reducer:B}),_},exposeAction(b,B){return m.actionCreators[b]=B,_},exposeCaseReducer(b,B){return m.sliceCaseReducersByName[b]=B,_}};h.forEach(b=>{const B=f[b],Y={reducerName:b,type:v1(a,b),createNotation:typeof o.reducers=="function"};T1(B)?R1(Y,B,_,e):I1(Y,B,_)});function y(){const[b={},B=[],Y=void 0]=typeof o.extraReducers=="function"?Ew(o.extraReducers):[o.extraReducers],J={...b,...m.sliceCaseReducersByType};return a1(o.initialState,se=>{for(let ee in J)se.addCase(ee,J[ee]);for(let ee of m.sliceMatchers)se.addMatcher(ee.matcher,ee.reducer);for(let ee of B)se.addMatcher(ee.matcher,ee.reducer);Y&&se.addDefaultCase(Y)})}const v=b=>b,C=new Map;let I;function O(b,B){return I||(I=y()),I(b,B)}function x(){return I||(I=y()),I.getInitialState()}function D(b,B=!1){function Y(se){let ee=se[b];return typeof ee>"u"&&B&&(ee=x()),ee}function J(se=v){const ee=b_(C,B,()=>new WeakMap);return b_(ee,se,()=>{const fe={};for(const[De,Rt]of Object.entries(o.selectors??{}))fe[De]=E1(Rt,se,x,B);return fe})}return{reducerPath:b,getSelectors:J,get selectors(){return J(Y)},selectSlice:Y}}const W={name:a,reducer:O,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:x,...D(c),injectInto(b,{reducerPath:B,...Y}={}){const J=B??c;return b.inject({reducerPath:J,reducer:O},Y),{...W,...D(J,!0)}}};return W}}function E1(t,e,n,s){function o(a,...c){let f=e(a);return typeof f>"u"&&s&&(f=n()),t(f,...c)}return o.unwrapped=t,o}var S1=w1();function C1(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function I1({type:t,reducerName:e,createNotation:n},s,o){let a,c;if("reducer"in s){if(n&&!k1(s))throw new Error(kn(17));a=s.reducer,c=s.prepare}else a=s;o.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,c?qs(t,c):qs(t))}function T1(t){return t._reducerDefinitionType==="asyncThunk"}function k1(t){return t._reducerDefinitionType==="reducerWithPrepare"}function R1({type:t,reducerName:e},n,s,o){if(!o)throw new Error(kn(18));const{payloadCreator:a,fulfilled:c,pending:f,rejected:h,settled:m,options:_}=n,y=o(t,a,_);s.exposeAction(e,y),c&&s.addCase(y.fulfilled,c),f&&s.addCase(y.pending,f),h&&s.addCase(y.rejected,h),m&&s.addMatcher(y.settled,m),s.exposeCaseReducer(e,{fulfilled:c||Vl,pending:f||Vl,rejected:h||Vl,settled:m||Vl})}function Vl(){}function kn(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}class P1{constructor(){Or(this,"levels");Or(this,"currentLevel");this.levels=["debug","info","warn","error"],this.currentLevel="debug"}setLevel(e){this.levels.includes(e)?this.currentLevel=e:console.error(`Nivel de log no vlido: ${e}`)}debug(e){this.log("debug",e)}info(e){this.log("info",e)}warn(e){this.log("warn",e)}error(e){this.log("error",e)}log(e,n){const s=this.levels.indexOf(e),o=this.levels.indexOf(this.currentLevel);if(s>=o){const a=new Date().toISOString();console[e](`[${e.toUpperCase()}] ${a}: ${n}`)}}}const N1=new P1,x1={menuItems:[{id:1,name:"Hamburguesa de Pollo",quantity:40,description:"Pollo frito y mayonesa",price:24,image:"hamburguesa.jpeg"},{id:2,name:"Pizza Margarita",quantity:30,description:"Tomate, mozzarella y albahaca",price:35,image:"margarita.jpg"},{id:3,name:"Tacos al Pastor",quantity:50,description:"Cerdo adobado con pia y cilantro",price:18,image:"tacos.jpg"},{id:4,name:"Ensalada Csar",quantity:25,description:"Lechuga, pollo y aderezo Csar",price:22,image:"ensalada.jpg"}],loading:!1,error:null,message:null},Xl=m1("menu/orderItem",async({orderedItem:t,orderedQuantity:e})=>{const n=Ks(ox,"orders"),s={id:t.id,name:t.name,orderedQuantity:e,unitPrice:t.price,totalPrice:e*t.price};return await KN(n,s).then(o=>N1.info(`Pedido guardado. URL: ${o}`)),{orderedItem:t,orderedQuantity:e}}),Sw=S1({name:"menu",initialState:x1,reducers:{clearMessage:t=>{t.message=null}},extraReducers:t=>{t.addCase(Xl.pending,e=>{e.loading=!0,e.message="Enviando pedido...",e.error=null}).addCase(Xl.fulfilled,(e,n)=>{e.loading=!1,e.message="Pedido enviado con xito";const{orderedItem:s,orderedQuantity:o}=n.payload;e.menuItems=e.menuItems.map(a=>a.id===s.id?{...a,quantity:a.quantity-o}:a)}).addCase(Xl.rejected,e=>{e.loading=!1,e.message=null,e.error="Error al enviar el pedido. Intente nuevamente."})}}),{clearMessage:A1}=Sw.actions,O1=Sw.reducer;function D1({selectedMenuItem:t,onReturnToMenu:e}){const{loading:n,message:s,error:o}=eh(C=>C.menu),a=Ox(),[c,f]=N.useState(1),[h,m]=N.useState(!1),_=C=>{const I=parseInt(C.target.value,10);f(isNaN(I)||I<1?1:I)},y=()=>{a(Xl({orderedItem:t,orderedQuantity:c})).then(()=>{m(!0)})},v=()=>{a(A1()),e()};return A.jsx("div",{className:"food-order-container",children:A.jsxs("div",{className:"food-details",children:[A.jsx("h4",{children:t.name}),A.jsx("div",{className:"food-image-container",children:A.jsx("img",{src:`images/${t.image}`,alt:t.name,className:"food-image"})}),A.jsx("p",{children:t.description}),A.jsxs("p",{className:"food-price",children:[(t.price*c).toFixed(2),""]}),A.jsxs("div",{className:"quantity-controls",children:[A.jsx("label",{htmlFor:"quantity",children:"Cantidad:"}),A.jsx("input",{type:"number",id:"quantity",value:c,onChange:_,min:"1"})]}),A.jsxs("div",{className:"buttons-container",children:[A.jsx("button",{className:"order-button",onClick:y,disabled:n||h,children:h?"Pedido enviado":n?"Enviando...":"Enviar pedido"}),A.jsx("button",{onClick:v,className:"return-button",children:"Volver al men"})]}),s&&A.jsx("p",{className:"order-confirmation",children:s}),o&&A.jsx("p",{className:"error-message",children:o})]})})}function L1(){const t=eh(o=>o.menu.menuItems),[e,n]=N.useState(null),s=o=>{n(o)};return A.jsxs("div",{className:"menuContainer",children:[" ",e?A.jsx(D1,{selectedMenuItem:e,onReturnToMenu:()=>n(null)}):A.jsxs(A.Fragment,{children:[A.jsx("h2",{children:"Men"}),A.jsx("h4",{className:"foodTitle",children:"Pulsa sobre cada producto para aadirlo"}),A.jsx("ul",{className:"ulFoods",children:t.map(o=>A.jsxs("li",{className:"liFoods",onClick:()=>s(o),children:[" ",A.jsx("img",{className:"foodImg",src:`images/${o.image}`,alt:o.name}),A.jsxs("div",{className:"foodItem",children:[A.jsx("p",{className:"foodDesc",children:o.description}),A.jsxs("p",{className:"foodPrice",children:[o.price,"$"]})]})]},o.id))})]})]})}const b1=({children:t})=>{const{user:e}=N.useContext(Va);return e?t:A.jsx(q_,{to:"/login",replace:!0})},U_=({children:t})=>{const{user:e,roles:n}=N.useContext(Va);return!e||!n||!n.includes(rn.ADMIN)?A.jsx(q_,{to:"/",replace:!0}):A.jsx(A.Fragment,{children:t})};function M1(){const t=eh(e=>e.menu.menuItems);return A.jsxs("div",{className:"StockPage",children:[A.jsx("h4",{className:"subTitle",children:"Disponibilidad de platos"}),A.jsx("ul",{className:"stockList",children:t.map(e=>A.jsxs("li",{className:"stockItem",children:[A.jsx("p",{children:e.name}),A.jsxs("p",{children:["Stock:",e.quantity]})]},e.id))})]})}const F1=()=>A.jsxs(ux,{children:[" ",A.jsxs(BC,{basename:"/DIRIAuth/",children:[" ",A.jsx(cx,{})," ",A.jsxs("div",{className:"main-content",children:[" ",A.jsxs(yC,{children:[" ",A.jsx(Xn,{path:"/",element:A.jsx(I_,{})})," ",A.jsx(Xn,{path:"/login",element:A.jsx(dx,{})})," ",A.jsx(Xn,{path:"/signUp",element:A.jsx(hx,{})})," ",A.jsx(Xn,{path:"/menu",element:A.jsx(b1,{children:A.jsx(L1,{})})}),A.jsx(Xn,{path:"/stock",element:A.jsxs(U_,{children:[" ",A.jsx(M1,{})," "]})}),A.jsx(Xn,{path:"/admin",element:A.jsxs(U_,{children:[" ",A.jsx(px,{})," "]})}),A.jsx(Xn,{path:"*",element:A.jsx(I_,{})})," "]})]})]})]}),U1=t=>e=>n=>{console.log("%cEstado anterior:","color: orange;",t.getState());const s=e(n);return console.log("%cSiguiente estado:","color: cyan;",t.getState()),console.groupEnd(),s},j1=o1({reducer:{menu:O1},middleware:t=>t().concat(U1)});PS.createRoot(document.getElementById("root")).render(A.jsx(N.StrictMode,{children:A.jsx(Nx,{store:j1,children:A.jsx(F1,{})})}));
